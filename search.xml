<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>微前端</title>
      <link href="/2025/01/08/%E5%BE%AE%E5%89%8D%E7%AB%AF/"/>
      <url>/2025/01/08/%E5%BE%AE%E5%89%8D%E7%AB%AF/</url>
      
        <content type="html"><![CDATA[<h1 id="一、monorepo"><a href="#一、monorepo" class="headerlink" title="一、monorepo"></a>一、monorepo</h1><p>pnpm-workspace.yaml</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">packages</span>:</span><br><span class="line">  # all packages <span class="keyword">in</span> direct subdirs <span class="keyword">of</span> packages/</span><br><span class="line">  - <span class="string">&quot;main&quot;</span></span><br><span class="line">  # all packages <span class="keyword">in</span> subdirs <span class="keyword">of</span> components/</span><br><span class="line">  - <span class="string">&quot;web/**&quot;</span></span><br><span class="line"></span><br><span class="line">  - <span class="string">&quot;common&quot;</span></span><br></pre></td></tr></table></figure><p>子模块复用</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm -F main add common</span><br></pre></td></tr></table></figure><h1 id="二、无界"><a href="#二、无界" class="headerlink" title="二、无界"></a>二、无界</h1><p><a href="https://github.com/Tencent/wujie">无界微前端官网</a></p><h2 id="main"><a href="#main" class="headerlink" title="main"></a>main</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pnpm i wujie</span><br><span class="line">pnpm i wujie-vue3</span><br></pre></td></tr></table></figure><p>main.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Wujie</span> <span class="keyword">from</span> <span class="string">&quot;wujie-vue3&quot;</span><span class="comment">// 引入对应版本</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title class_">Wujie</span>)</span><br></pre></td></tr></table></figure><p>App.vue</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>这是主应用<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">WujieVue</span> <span class="attr">url</span>=<span class="string">&quot;http://localhost:5174/&quot;</span> <span class="attr">name</span>=<span class="string">&quot;vue3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">WujieVue</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h1 id="三、源码"><a href="#三、源码" class="headerlink" title="三、源码"></a>三、源码</h1><p><a href="https://juejin.cn/post/7212603829572911159?searchId=202501062132300B836B213173F98EB919#heading-12">wujie-vue3源码</a></p><h1 id="四、通讯"><a href="#四、通讯" class="headerlink" title="四、通讯"></a>四、通讯</h1><h2 id="window"><a href="#window" class="headerlink" title="window"></a>window</h2><p>主应用定义一个全局变量</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">&#x27;xiaoman&#x27;</span></span><br></pre></td></tr></table></figure><p>子应用通过 window.parent.a 就可以访问到</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">send</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">alert</span>(<span class="variable language_">window</span>.<span class="property">parent</span>.<span class="property">a</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="props"><a href="#props" class="headerlink" title="props"></a>props</h2><p>通过props给子应用注入参数</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">WujieVue</span> :props=<span class="string">&quot;&#123;name:&#x27;xm&#x27;,age:18&#125;&quot;</span>  url=<span class="string">&quot;http://127.0.0.1:5174/&quot;</span> name=<span class="string">&quot;vue3&quot;</span>&gt;&lt;/<span class="title class_">WujieVue</span>&gt; &lt;!--子应用vue3--&gt;</span><br></pre></td></tr></table></figure><p>子应用可以通过$wujie来获取</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">$wujie</span>.<span class="property">props</span></span><br></pre></td></tr></table></figure><h2 id="event-bus"><a href="#event-bus" class="headerlink" title="event bus"></a>event bus</h2><p>主应用通过bus 监听</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;bus&#125; <span class="keyword">from</span> <span class="string">&#x27;wujie&#x27;</span></span><br><span class="line">bus.$on(<span class="string">&#x27;vue3&#x27;</span>, <span class="function">(<span class="params">data: any</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>子应用通过emit触发事件（反之也可以 主应用emit触发子应用on监听）</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">$wujie</span>.<span class="property">bus</span>.$emit(<span class="string">&#x27;vue3&#x27;</span>, &#123;<span class="attr">name</span>:<span class="string">&#x27;xm&#x27;</span>,<span class="attr">age</span>:<span class="number">18</span>&#125;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue自动压缩dist文件</title>
      <link href="/2023/12/15/Vue%E8%87%AA%E5%8A%A8%E5%8E%8B%E7%BC%A9dist%E6%96%87%E4%BB%B6/"/>
      <url>/2023/12/15/Vue%E8%87%AA%E5%8A%A8%E5%8E%8B%E7%BC%A9dist%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>最近部署项目频繁，故想省去手动压缩dist文件的步骤</p><hr><h1 id="一、vue-cli4"><a href="#一、vue-cli4" class="headerlink" title="一、vue-cli4"></a>一、vue-cli4</h1><h2 id="1-安装插件"><a href="#1-安装插件" class="headerlink" title="1.安装插件"></a>1.安装插件</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install filemanager<span class="literal">-webpack-plugin</span> <span class="literal">-D</span></span><br></pre></td></tr></table></figure><h2 id="2-配置vue-config-js"><a href="#2-配置vue-config-js" class="headerlink" title="2.配置vue.config.js"></a>2.配置vue.config.js</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">FileManagerPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;filemanager-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> packageName = <span class="string">&quot;dist&quot;</span>;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">outputDir</span>: packageName,</span><br><span class="line">  ......</span><br><span class="line">    <span class="title function_">chainWebpack</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    config</span><br><span class="line">      .<span class="title function_">plugin</span>(<span class="string">&quot;fileManager&quot;</span>)</span><br><span class="line">      .<span class="title function_">use</span>(<span class="title class_">FileManagerPlugin</span>)</span><br><span class="line">      .<span class="title function_">tap</span>(<span class="function">(<span class="params">args</span>) =&gt;</span> [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">events</span>: &#123;</span><br><span class="line">            <span class="attr">onEnd</span>: &#123;</span><br><span class="line">              <span class="attr">delete</span>: [</span><br><span class="line">                <span class="comment">// 首先需要删除项目根目录下的dist.zip</span></span><br><span class="line">                <span class="string">`./<span class="subst">$&#123;packageName&#125;</span>.zip`</span>,</span><br><span class="line">              ],</span><br><span class="line">              <span class="attr">archive</span>: [</span><br><span class="line">                <span class="comment">// 选择文件夹将之打包成xxx.zip并放在根目录</span></span><br><span class="line">                &#123;</span><br><span class="line">                  <span class="attr">source</span>: <span class="string">`./<span class="subst">$&#123;packageName&#125;</span>`</span>,</span><br><span class="line">                  <span class="attr">destination</span>: <span class="string">`./<span class="subst">$&#123;packageName&#125;</span>.zip`</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">              ],</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ]);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="二、vite"><a href="#二、vite" class="headerlink" title="二、vite"></a>二、vite</h1><h2 id="1-安装插件-1"><a href="#1-安装插件-1" class="headerlink" title="1.安装插件"></a>1.安装插件</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install rollup<span class="literal">-plugin-compression</span> <span class="literal">-D</span></span><br></pre></td></tr></table></figure><h2 id="2-配置vite-config-js"><a href="#2-配置vite-config-js" class="headerlink" title="2.配置vite.config.js"></a>2.配置vite.config.js</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> compresssionBuild <span class="keyword">from</span> <span class="string">&quot;rollup-plugin-compression&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> type &#123; <span class="title class_">ICompressionOptions</span> &#125; <span class="keyword">from</span> <span class="string">&quot;rollup-plugin-compression&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">option</span>: <span class="title class_">ICompressionOptions</span> = &#123;</span><br><span class="line">  <span class="attr">sourceName</span>: <span class="string">`dist`</span>,</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&quot;zip&quot;</span>,</span><br><span class="line">  <span class="attr">targetName</span>: <span class="string">`dist`</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">build</span>: &#123;</span><br><span class="line">    <span class="attr">outDir</span>: option.<span class="property">sourceName</span></span><br><span class="line">  &#125;,</span><br><span class="line">  ......</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">vue</span>(), <span class="title function_">compresssionBuild</span>(option)]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><hr><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>最好使用Jenkins自动化部署</p>]]></content>
      
      
      <categories>
          
          <category> 服务器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cesium添加流动箭头</title>
      <link href="/2023/12/12/Cesium%E6%B7%BB%E5%8A%A0%E6%B5%81%E5%8A%A8%E7%AE%AD%E5%A4%B4/"/>
      <url>/2023/12/12/Cesium%E6%B7%BB%E5%8A%A0%E6%B5%81%E5%8A%A8%E7%AE%AD%E5%A4%B4/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>添加三维管线的方法和数据，参考右文：<a href="https://752841728.github.io/2023/08/24/Cesium%E6%B7%BB%E5%8A%A0%E4%B8%89%E7%BB%B4%E7%AE%A1%E7%BA%BF">Cesium添加三维管线</a><br>本文是在add3DLine函数的基础上增加withAnimation传参实现添加流动箭头（使用WebGL1.0的语法）<br>示例中使用的数据：<a href="https://github.com/752841728/hexo-picture/blob/main/map/arrow.png">arrow.png</a></p><hr><h1 id="一、根据图片大小分配箭头数量"><a href="#一、根据图片大小分配箭头数量" class="headerlink" title="一、根据图片大小分配箭头数量"></a>一、根据图片大小分配箭头数量</h1><p>参考资料：<a href="https://blog.csdn.net/qq_34447899/article/details/123224443">cesium polyline 自定义材质图片运动线</a><br>缺陷：通过计算线的角度解决图片破碎问题，导致部分情况箭头方向相反</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> arrow_img <span class="keyword">from</span> <span class="string">&quot;@/assets/arrow.png&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">initMap</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">Cesium</span>.<span class="property">Ion</span>.<span class="property">defaultAccessToken</span> =</span><br><span class="line">    <span class="string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2ZTgxOGNhZC03NThmLTQ0NzMtOTNlYS1kNmM3YzlmZDU3NTMiLCJpZCI6MTI1NTY3LCJpYXQiOjE2NzY5MDI0MzJ9.ulIEz3NCh2cMEBiHrqIuv9I6icn5KTMMnBdy2wassoM&quot;</span>;</span><br><span class="line">  viewer = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Viewer</span>(<span class="string">&quot;map&quot;</span>, &#123;</span><br><span class="line">    <span class="comment">// 配置项</span></span><br><span class="line">    <span class="attr">terrainProvider</span>: <span class="title class_">Cesium</span>.<span class="title function_">createWorldTerrain</span>(), <span class="comment">// 生成地形</span></span><br><span class="line">    <span class="comment">// requestRenderMode: true, // 优化性能</span></span><br><span class="line">    <span class="comment">// maximumRenderTimeChange: Infinity, // 优化性能</span></span><br><span class="line">    <span class="attr">contextOptions</span>: &#123;</span><br><span class="line">      <span class="attr">requestWebgl1</span>: <span class="literal">true</span>,  <span class="comment">// 使用WebGL1.0的语法</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">  viewer.<span class="property">scene</span>.<span class="property">globe</span>.<span class="property">depthTestAgainstTerrain</span> = <span class="literal">true</span>; <span class="comment">// 开启深度检测</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加三维管线</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add3DLine</span>(<span class="params">withOutline, withAnimation</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> volume = []; <span class="comment">// 管线</span></span><br><span class="line">  <span class="keyword">const</span> volume_outline = []; <span class="comment">// 管线轮廓</span></span><br><span class="line">  <span class="keyword">const</span> volume_animation = []; <span class="comment">// 流动箭头</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 管线的横截面，radius半径，side_number几边形</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">computeCircle</span>(<span class="params">radius, side_number</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> positions = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; side_number; i++) &#123;</span><br><span class="line">      <span class="keyword">const</span> radians = <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toRadians</span>(i * (<span class="number">360</span> / side_number)); <span class="comment">// 360边形就是一个圆</span></span><br><span class="line">      positions.<span class="title function_">push</span>(</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian2</span>(</span><br><span class="line">          radius * <span class="title class_">Math</span>.<span class="title function_">cos</span>(radians),</span><br><span class="line">          radius * <span class="title class_">Math</span>.<span class="title function_">sin</span>(radians)</span><br><span class="line">        )</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> positions;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  mapData.<span class="property">features</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">feature, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> positions = feature.<span class="property">geometry</span>.<span class="property">coordinates</span>[<span class="number">0</span>];</span><br><span class="line">    volume.<span class="title function_">push</span>(</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">GeometryInstance</span>(&#123;</span><br><span class="line">        <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PolylineVolumeGeometry</span>(&#123;</span><br><span class="line">          <span class="attr">polylinePositions</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegreesArrayHeights</span>(</span><br><span class="line">            <span class="title function_">handleData</span>(positions, <span class="number">5</span>)</span><br><span class="line">          ),</span><br><span class="line">          <span class="attr">shapePositions</span>: <span class="title function_">computeCircle</span>(<span class="number">0.5</span>, <span class="number">6</span>),</span><br><span class="line">        &#125;),</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// 管线轮廓</span></span><br><span class="line">    <span class="keyword">if</span> (withOutline) &#123;</span><br><span class="line">      volume_outline.<span class="title function_">push</span>(</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">GeometryInstance</span>(&#123;</span><br><span class="line">          <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PolylineVolumeOutlineGeometry</span>(&#123;</span><br><span class="line">            <span class="attr">polylinePositions</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegreesArrayHeights</span>(</span><br><span class="line">              <span class="title function_">handleData</span>(positions, <span class="number">5</span>)</span><br><span class="line">            ),</span><br><span class="line">            <span class="attr">shapePositions</span>: <span class="title function_">computeCircle</span>(<span class="number">0.5</span>, <span class="number">6</span>),</span><br><span class="line">          &#125;),</span><br><span class="line">          <span class="attr">attributes</span>: &#123;</span><br><span class="line">            <span class="attr">color</span>: <span class="title class_">Cesium</span>.<span class="property">ColorGeometryInstanceAttribute</span>.<span class="title function_">fromColor</span>(</span><br><span class="line">              <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Color</span>(<span class="number">255</span> / <span class="number">255</span>, <span class="number">255</span> / <span class="number">255</span>, <span class="number">255</span> / <span class="number">255</span>, <span class="number">1</span>)</span><br><span class="line">            ),</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;)</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 流动箭头</span></span><br><span class="line">    <span class="keyword">if</span> (withAnimation) &#123;</span><br><span class="line">      volume_animation.<span class="title function_">push</span>(</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">GeometryInstance</span>(&#123;</span><br><span class="line">          <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PolylineGeometry</span>(&#123;</span><br><span class="line">            <span class="attr">positions</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegreesArrayHeights</span>(</span><br><span class="line">              <span class="title function_">handleData</span>(positions, <span class="number">5.5</span>)</span><br><span class="line">            ),</span><br><span class="line">            <span class="attr">width</span>: <span class="number">10</span>,</span><br><span class="line">          &#125;),</span><br><span class="line">        &#125;)</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  viewer.<span class="property">scene</span>.<span class="property">primitives</span>.<span class="title function_">add</span>(</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Primitive</span>(&#123;</span><br><span class="line">      <span class="attr">geometryInstances</span>: volume,</span><br><span class="line">      <span class="attr">releaseGeometryInstances</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">appearance</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">EllipsoidSurfaceAppearance</span>(&#123;</span><br><span class="line">        <span class="attr">material</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Material</span>(&#123;</span><br><span class="line">          <span class="attr">fabric</span>: &#123;</span><br><span class="line">            <span class="attr">uniforms</span>: &#123;</span><br><span class="line">              <span class="attr">image</span>: surface_img,</span><br><span class="line">              <span class="attr">color</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="title function_">fromBytes</span>(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>),</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">source</span>: <span class="string">`</span></span><br><span class="line"><span class="string">                uniform vec4 color;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">                czm_material czm_getMaterial(czm_materialInput materialInput)</span></span><br><span class="line"><span class="string">                &#123;</span></span><br><span class="line"><span class="string">                    czm_material material = czm_getDefaultMaterial(materialInput);</span></span><br><span class="line"><span class="string">                    vec2 st = materialInput.st;</span></span><br><span class="line"><span class="string">                    float s = st.s;</span></span><br><span class="line"><span class="string">                    float t = st.t;</span></span><br><span class="line"><span class="string">                    vec4 colorImage = texture(image, vec2(fract(s), t));</span></span><br><span class="line"><span class="string">                    material.diffuse = colorImage.rgb * color.rgb;</span></span><br><span class="line"><span class="string">                    return material;</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">                `</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;),</span><br><span class="line">      &#125;),</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">  <span class="comment">// 管线轮廓</span></span><br><span class="line">  <span class="keyword">if</span> (withOutline) &#123;</span><br><span class="line">    viewer.<span class="property">scene</span>.<span class="property">primitives</span>.<span class="title function_">add</span>(</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Primitive</span>(&#123;</span><br><span class="line">        <span class="attr">geometryInstances</span>: volume_outline,</span><br><span class="line">        <span class="attr">appearance</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PerInstanceColorAppearance</span>(&#123;</span><br><span class="line">          <span class="attr">flat</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="attr">renderState</span>: &#123;</span><br><span class="line">            <span class="attr">lineWidth</span>: <span class="number">1.0</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;),</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 流动箭头</span></span><br><span class="line">  <span class="keyword">if</span> (withAnimation) &#123;</span><br><span class="line">    viewer.<span class="property">scene</span>.<span class="property">primitives</span>.<span class="title function_">add</span>(</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Primitive</span>(&#123;</span><br><span class="line">        <span class="attr">asynchronous</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">geometryInstances</span>: volume_animation,</span><br><span class="line">        <span class="attr">appearance</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PolylineMaterialAppearance</span>(&#123;</span><br><span class="line">          <span class="attr">material</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Material</span>(&#123;</span><br><span class="line">            <span class="attr">fabric</span>: &#123;</span><br><span class="line">              <span class="attr">uniforms</span>: &#123;</span><br><span class="line">                <span class="attr">image</span>: arrow_img,</span><br><span class="line">                <span class="attr">imageW</span>: <span class="number">20</span>,</span><br><span class="line">                <span class="attr">alpha</span>: <span class="number">1.0</span>,</span><br><span class="line">              &#125;,</span><br><span class="line">              <span class="attr">source</span>: <span class="string">`</span></span><br><span class="line"><span class="string">                varying float v_polylineAngle;</span></span><br><span class="line"><span class="string">                uniform float alpha;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">                mat2 rotate(float rad) &#123;</span></span><br><span class="line"><span class="string">                  float c = cos(rad);</span></span><br><span class="line"><span class="string">                  float s = sin(rad);</span></span><br><span class="line"><span class="string">                  return mat2(c, s, -s, c);</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">                czm_material czm_getMaterial(czm_materialInput materialInput)</span></span><br><span class="line"><span class="string">                &#123;</span></span><br><span class="line"><span class="string">                  czm_material material = czm_getDefaultMaterial(materialInput);</span></span><br><span class="line"><span class="string">                  vec2 st = materialInput.st;</span></span><br><span class="line"><span class="string">                  vec2 pos = rotate(v_polylineAngle) * gl_FragCoord.xy;</span></span><br><span class="line"><span class="string">                  float s = pos.x / (imageW * czm_pixelRatio);</span></span><br><span class="line"><span class="string">                  s = s - czm_frameNumber / 60.0;</span></span><br><span class="line"><span class="string">                  float t = st.t;</span></span><br><span class="line"><span class="string">                  vec4 colorImage = texture2D(image, vec2(fract(s), t));</span></span><br><span class="line"><span class="string">                  float a = colorImage.a;</span></span><br><span class="line"><span class="string">                  material.diffuse = colorImage.rgb;</span></span><br><span class="line"><span class="string">                  material.alpha = a * alpha;</span></span><br><span class="line"><span class="string">                  return material;</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">`</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;),</span><br><span class="line">        &#125;),</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleData</span>(<span class="params">data, height</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> arr = [];</span><br><span class="line">    data.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">      arr.<span class="title function_">push</span>(...<span class="title function_">tranformCoordinate</span>(item[<span class="number">0</span>], item[<span class="number">1</span>]));</span><br><span class="line">      <span class="keyword">if</span> (height) arr.<span class="title function_">push</span>(height);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>暂时没有完美实现流动箭头的方案</p>]]></content>
      
      
      <categories>
          
          <category> GIS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cesium </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cesium碰撞检测弹窗</title>
      <link href="/2023/12/12/Cesium%E7%A2%B0%E6%92%9E%E6%A3%80%E6%B5%8B%E5%BC%B9%E7%AA%97/"/>
      <url>/2023/12/12/Cesium%E7%A2%B0%E6%92%9E%E6%A3%80%E6%B5%8B%E5%BC%B9%E7%AA%97/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>弹窗在不互相遮挡的情况下，随着cesium相机高度升高而减少，随着cesium相机高度降低而增加</p><hr><h1 id="一、代码"><a href="#一、代码" class="headerlink" title="一、代码"></a>一、代码</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100vw; height: 100vh&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in popupData&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">class</span>=<span class="string">&quot;popup&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">:style</span>=<span class="string">&quot;&#123;</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">        left: item.x + &#x27;px&#x27;,</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">        top: item.y + &#x27;px&#x27;,</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">      &#125;&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">Cesium</span> <span class="keyword">from</span> <span class="string">&quot;cesium&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="string">&quot;cesium/Build/Cesium/Widgets/widgets.css&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> viewer;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&quot;cesium&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">popupData</span>: [],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">initMap</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">let</span> that = <span class="variable language_">this</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title class_">Cesium</span>.<span class="property">Ion</span>.<span class="property">defaultAccessToken</span> =</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2ZTgxOGNhZC03NThmLTQ0NzMtOTNlYS1kNmM3YzlmZDU3NTMiLCJpZCI6MTI1NTY3LCJpYXQiOjE2NzY5MDI0MzJ9.ulIEz3NCh2cMEBiHrqIuv9I6icn5KTMMnBdy2wassoM&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      viewer = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Viewer</span>(<span class="string">&quot;map&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      viewer.<span class="property">scene</span>.<span class="property">postRender</span>.<span class="title function_">addEventListener</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        that.<span class="title function_">addPopup</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">setView</span>(<span class="params">x, y, z = <span class="number">100000</span></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">if</span> (x <span class="keyword">instanceof</span> <span class="title class_">Array</span> || y <span class="keyword">instanceof</span> <span class="title class_">Array</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        viewer.<span class="property">camera</span>.<span class="title function_">setView</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">destination</span>: <span class="title class_">Cesium</span>.<span class="property">Rectangle</span>.<span class="title function_">fromDegrees</span>(</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            ...<span class="title function_">handleRectangleDegrees</span>(x, y)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          ),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">duration</span>: <span class="number">0</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">complete</span>: <span class="function">() =&gt;</span> &#123;&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125; <span class="keyword">else</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        viewer.<span class="property">camera</span>.<span class="title function_">setView</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">destination</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(x, y, z),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">duration</span>: <span class="number">0</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">complete</span>: <span class="function">() =&gt;</span> &#123;&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">addPopup</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">let</span> arr = [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.516554832785</span>, <span class="number">22.7815541566398</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.565595110563</span>, <span class="number">22.8119042280145</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.585566261118</span>, <span class="number">22.7467959068676</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.585561647606</span>, <span class="number">22.7467922756939</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.585544380734</span>, <span class="number">22.7468031264434</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.5250091611</span>, <span class="number">22.796468624824</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.53501380961</span>, <span class="number">22.7752535345139</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.606360650159</span>, <span class="number">22.7673058506878</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.575970393566</span>, <span class="number">22.8011478781795</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.48319856831</span>, <span class="number">22.8434974846255</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.483183010224</span>, <span class="number">22.8434759099068</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.521532982952</span>, <span class="number">22.7202557655554</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.53274534813</span>, <span class="number">22.7955110445971</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.584525474457</span>, <span class="number">22.7676399422363</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.54157885687</span>, <span class="number">22.8101993251604</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.540344472305</span>, <span class="number">22.7983192314786</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.536264743559</span>, <span class="number">22.7850303729224</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.5897553783</span>, <span class="number">22.7504601423855</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.513549642677</span>, <span class="number">22.8011357132934</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.665260156322</span>, <span class="number">22.6558535329566</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.665242814055</span>, <span class="number">22.6540658381607</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.540721493798</span>, <span class="number">22.8003300912433</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.526640076431</span>, <span class="number">22.6870157770143</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.494998793222</span>, <span class="number">22.8129609109105</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.593364200102</span>, <span class="number">22.743924187381</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.540681930867</span>, <span class="number">22.8078782923931</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.550853128856</span>, <span class="number">22.7614672586024</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.517482495539</span>, <span class="number">22.7849363232933</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.662701458716</span>, <span class="number">22.6466855872565</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.594501573329</span>, <span class="number">22.7505207744991</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.597951948579</span>, <span class="number">22.7769371796389</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.550305763681</span>, <span class="number">22.7620551543094</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.568432803916</span>, <span class="number">22.7563407873987</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.525835234783</span>, <span class="number">22.7976826914486</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.536859093935</span>, <span class="number">22.8207334899539</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.533484184956</span>, <span class="number">22.8106796700382</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.561286394469</span>, <span class="number">22.6576939900548</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.517806458323</span>, <span class="number">22.7815962791158</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.516595454663</span>, <span class="number">22.6914001747332</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.542308151213</span>, <span class="number">22.7973896718941</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.603754064104</span>, <span class="number">22.7708103375522</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.513533350975</span>, <span class="number">22.8012006043278</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.514669619202</span>, <span class="number">22.7985178250092</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.518584605796</span>, <span class="number">22.8266911342335</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.514671591971</span>, <span class="number">22.7985149161823</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.514672523459</span>, <span class="number">22.7985136999894</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.514673302842</span>, <span class="number">22.7985119821778</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.525831173412</span>, <span class="number">22.797677088093</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.525822803781</span>, <span class="number">22.7976688379218</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.525828709136</span>, <span class="number">22.7976751872076</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.525826808323</span>, <span class="number">22.7976734135123</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.52583358882</span>, <span class="number">22.7976798836908</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.566106350839</span>, <span class="number">22.801166199545</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.566111262961</span>, <span class="number">22.801242665269</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.543064161582</span>, <span class="number">22.783263992993</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.598001030574</span>, <span class="number">22.7770088898555</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.54068188311</span>, <span class="number">22.8078570901731</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.540569108785</span>, <span class="number">22.7957774034675</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.517826225587</span>, <span class="number">22.7816572777368</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.536864075158</span>, <span class="number">22.8207324208513</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.536869022012</span>, <span class="number">22.8207302807108</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.533496690806</span>, <span class="number">22.810679262368</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.540554780068</span>, <span class="number">22.7958167856627</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.54905183958</span>, <span class="number">22.8055537524493</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.56644295678</span>, <span class="number">22.800544710883</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.544432042623</span>, <span class="number">22.8030296675129</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.495158864878</span>, <span class="number">22.797248092325</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.516579222339</span>, <span class="number">22.6914439526023</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.508136024199</span>, <span class="number">22.8503121640053</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.533490103578</span>, <span class="number">22.8106792430909</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.533503339525</span>, <span class="number">22.8106780998189</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.533507664509</span>, <span class="number">22.8106782867513</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.535007260258</span>, <span class="number">22.7752425504507</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.575976679637</span>, <span class="number">22.8011399549163</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.566459714017</span>, <span class="number">22.8005430389587</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.525965071626</span>, <span class="number">22.8307287822828</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.513273902813</span>, <span class="number">22.7829777203857</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">postiton</span>: [<span class="number">113.532746424803</span>, <span class="number">22.7955034671885</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      ];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">popupData</span> = [];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt;= arr.<span class="property">length</span> - <span class="number">1</span>; i++) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">let</span> position = <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(...arr[i].<span class="property">postiton</span>, <span class="number">0</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">let</span> box1 = <span class="title class_">Cesium</span>.<span class="property">SceneTransforms</span>.<span class="title function_">wgs84ToWindowCoordinates</span>(</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          viewer.<span class="property">scene</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          position</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        );</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">for</span> (<span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt;= arr.<span class="property">length</span> - <span class="number">1</span>; j++) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">let</span> position = <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(...arr[j].<span class="property">postiton</span>, <span class="number">0</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">let</span> box2 = <span class="title class_">Cesium</span>.<span class="property">SceneTransforms</span>.<span class="title function_">wgs84ToWindowCoordinates</span>(</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            viewer.<span class="property">scene</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            position</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          );</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">let</span> flag = <span class="variable language_">this</span>.<span class="title function_">collision</span>(box1, box2);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">if</span> (flag) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            arr[j].<span class="property">show</span> = <span class="literal">false</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      arr.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">if</span> (item.<span class="property">show</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">let</span> position = <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(...item.<span class="property">postiton</span>, <span class="number">0</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">let</span> box = <span class="title class_">Cesium</span>.<span class="property">SceneTransforms</span>.<span class="title function_">wgs84ToWindowCoordinates</span>(</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            viewer.<span class="property">scene</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            position</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          );</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="variable language_">this</span>.<span class="property">popupData</span>.<span class="title function_">push</span>(box);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">collision</span>(<span class="params">box1, box2</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">let</span> width = <span class="number">75</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">let</span> height = <span class="number">75</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">let</span> left = <span class="title class_">Math</span>.<span class="title function_">max</span>(box1.<span class="property">x</span>, box2.<span class="property">x</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">let</span> top = <span class="title class_">Math</span>.<span class="title function_">max</span>(box1.<span class="property">y</span>, box2.<span class="property">y</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">let</span> right = <span class="title class_">Math</span>.<span class="title function_">min</span>(box1.<span class="property">x</span> + width, box2.<span class="property">x</span> + width);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">let</span> bottom = <span class="title class_">Math</span>.<span class="title function_">min</span>(box1.<span class="property">y</span> + height, box2.<span class="property">y</span> + height);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">if</span> (left &lt; right &amp;&amp; top &lt; bottom) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> <span class="literal">true</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125; <span class="keyword">else</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> <span class="literal">false</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">this</span>.<span class="title function_">initMap</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">this</span>.<span class="title function_">setView</span>(<span class="number">113.44</span>, <span class="number">22.73</span>); <span class="comment">// 南沙区中心点</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">this</span>.<span class="title function_">addPopup</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.popup</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">background-color</span>: <span class="number">#002967</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">border</span>: <span class="number">0.05rem</span> solid <span class="number">#fff</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">width</span>: <span class="number">50px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">height</span>: <span class="number">50px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">border-radius</span>: <span class="number">0.5rem</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">padding</span>: <span class="number">1rem</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> GIS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cesium </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TypeScript学习笔记</title>
      <link href="/2023/09/05/TypeScript%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2023/09/05/TypeScript%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>近期在学习TypeScript，这里记录一下</p><hr><h1 id="一、基础类型"><a href="#一、基础类型" class="headerlink" title="一、基础类型"></a>一、基础类型</h1><p>boolean、number、string、null、undefined比较简单，不再阐述</p><p>array</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">arr</span>: <span class="built_in">number</span>[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr</span>: <span class="title class_">Array</span>&lt;<span class="built_in">number</span>&gt; = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr</span>: [<span class="built_in">number</span>, <span class="built_in">string</span>] = [<span class="number">1</span>, <span class="string">&#x27;2&#x27;</span>]<span class="comment">// 元组tuple</span></span><br></pre></td></tr></table></figure><p>enum</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 异构枚举，既包含数字又包含字符串</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction</span> &#123;</span><br><span class="line">  <span class="variable constant_">NORTH</span> = <span class="number">0</span>,</span><br><span class="line">  <span class="variable constant_">SOUTH</span> = <span class="number">1</span>,</span><br><span class="line">  <span class="variable constant_">EAST</span> = <span class="number">2</span>,</span><br><span class="line">  <span class="variable constant_">WEST</span> = <span class="string">&#x27;A&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Direction</span>.<span class="property">NORTH</span>)    <span class="comment">// 0</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Direction</span>[<span class="number">0</span>])   <span class="comment">// NORTH</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// es5</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Direction</span>;</span><br><span class="line">(<span class="keyword">function</span> (<span class="params"><span class="title class_">Direction</span></span>) &#123;</span><br><span class="line">    <span class="title class_">Direction</span>[<span class="title class_">Direction</span>[<span class="string">&quot;NORTH&quot;</span>] = <span class="number">0</span>] = <span class="string">&quot;NORTH&quot;</span>;</span><br><span class="line">    <span class="title class_">Direction</span>[<span class="title class_">Direction</span>[<span class="string">&quot;SOUTH&quot;</span>] = <span class="number">1</span>] = <span class="string">&quot;SOUTH&quot;</span>;</span><br><span class="line">    <span class="title class_">Direction</span>[<span class="title class_">Direction</span>[<span class="string">&quot;EAST&quot;</span>] = <span class="number">2</span>] = <span class="string">&quot;EAST&quot;</span>;</span><br><span class="line">    <span class="title class_">Direction</span>[<span class="string">&quot;WEST&quot;</span>] = <span class="string">&quot;A&quot;</span>;</span><br><span class="line">&#125;)(<span class="title class_">Direction</span> || (<span class="title class_">Direction</span> = &#123;&#125;));</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Direction</span>.<span class="property">NORTH</span>); <span class="comment">// 0</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Direction</span>[<span class="number">0</span>]); <span class="comment">// NORTH</span></span><br></pre></td></tr></table></figure><p>any、unknown</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 所有类型可以赋值给any，any可以赋值给所有类型</span></span><br><span class="line"><span class="comment">// 所有类型可以赋值给unknown，unknown不可以赋值给任何类型</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">test</span>: <span class="built_in">number</span> = <span class="number">123</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">test1</span>: <span class="built_in">any</span> = test;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">test2</span>: <span class="built_in">number</span> = test1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">test3</span>: <span class="built_in">unknown</span> = test;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">test4</span>: <span class="built_in">number</span> = test3; <span class="comment">// error</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(test1[<span class="number">0</span>])</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(test3[<span class="number">0</span>])   <span class="comment">// error</span></span><br></pre></td></tr></table></figure><p>void</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数没有返回值时使用</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">warnUser</span>(<span class="params"></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;This is my warning message&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>never</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 确保类型绝对安全的代码，避免新增了联合类型，但没有对应的实现</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Foo</span> = <span class="built_in">string</span> | <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">controlFlowAnalysisWithNever</span>(<span class="params"><span class="attr">foo</span>: <span class="title class_">Foo</span></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> foo === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> foo === <span class="string">&quot;number&quot;</span>) &#123;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">check</span>: <span class="built_in">never</span> = foo;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 新增了Foo的类型，但没有对应的实现</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Foo</span> = <span class="built_in">string</span> | <span class="built_in">number</span> | <span class="built_in">boolean</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">controlFlowAnalysisWithNever</span>(<span class="params"><span class="attr">foo</span>: <span class="title class_">Foo</span></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> foo === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> foo === <span class="string">&quot;number&quot;</span>) &#123;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">check</span>: <span class="built_in">never</span> = foo;<span class="comment">// error</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="二、类型断言"><a href="#二、类型断言" class="headerlink" title="二、类型断言"></a>二、类型断言</h1><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 两种写法</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">someValue</span>: <span class="built_in">any</span> = <span class="string">&quot;this is a string&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">strLength</span>: <span class="built_in">number</span> = (&lt;<span class="built_in">string</span>&gt;someValue).<span class="property">length</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">strLength</span>: <span class="built_in">number</span> = (someValue <span class="keyword">as</span> <span class="built_in">string</span>).<span class="property">length</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Canvas教程</title>
      <link href="/2023/08/29/Canvas%E6%95%99%E7%A8%8B/"/>
      <url>/2023/08/29/Canvas%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>发现一篇Canvas教程，写得实在是太好了，这里就直接转载了</p><hr><h1 id="canvas详细入门教程（1W字-吐血分享）"><a href="#canvas详细入门教程（1W字-吐血分享）" class="headerlink" title="canvas详细入门教程（1W字 吐血分享）"></a><a href="https://blog.csdn.net/nvgis/article/details/127316552?spm=1001.2014.3001.5506">canvas详细入门教程（1W字 吐血分享）</a></h1>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WebGL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端项目部署流程</title>
      <link href="/2023/08/28/%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B/"/>
      <url>/2023/08/28/%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>项目组没有运维，前端负责打包部署</p><hr><h1 id="一、vue-cli打包优化"><a href="#一、vue-cli打包优化" class="headerlink" title="一、vue-cli打包优化"></a>一、vue-cli打包优化</h1><h2 id="1-productionSourceMap"><a href="#1-productionSourceMap" class="headerlink" title="1.productionSourceMap"></a>1.productionSourceMap</h2><p>虽然减少包体积，但是无法定位出现问题的代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">productionSourceMap</span>: <span class="literal">false</span>,</span><br></pre></td></tr></table></figure><h2 id="2-gzip"><a href="#2-gzip" class="headerlink" title="2.gzip"></a>2.gzip</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install compression-webpack-plugin</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">CompressionWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;compression-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="attr">plugins</span>: [</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">CompressionWebpackPlugin</span>(),</span><br><span class="line">],</span><br></pre></td></tr></table></figure><h2 id="3-去除console"><a href="#3-去除console" class="headerlink" title="3.去除console"></a>3.去除console</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install babel-plugin-transform-remove-<span class="variable language_">console</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> proPlugins = [];</span><br><span class="line"><span class="comment">// 判断环境</span></span><br><span class="line"><span class="keyword">if</span> (process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;production&#x27;</span>) &#123;</span><br><span class="line">  proPlugins.<span class="title function_">push</span>(<span class="string">&#x27;transform-remove-console&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    ...proPlugins</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="二、vite打包优化"><a href="#二、vite打包优化" class="headerlink" title="二、vite打包优化"></a>二、vite打包优化</h1><h2 id="1-分包"><a href="#1-分包" class="headerlink" title="1.分包"></a>1.分包</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">build</span>: &#123;</span><br><span class="line">  <span class="attr">rollupOptions</span>: &#123;</span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">      <span class="comment">// 对静态资源进行单独打包</span></span><br><span class="line">      <span class="attr">assetFileNames</span>: <span class="string">&quot;static/[ext]/[name].[hash].[ext]&quot;</span>,</span><br><span class="line">      <span class="comment">// 对项目依赖进行单独打包</span></span><br><span class="line">      <span class="attr">manualChunks</span>: <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (id.<span class="title function_">includes</span>(<span class="string">&quot;node_modules&quot;</span>)) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="string">&quot;vandor&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h3 id="出现内存不足，报JavaScript-heap-out-of-memory错误"><a href="#出现内存不足，报JavaScript-heap-out-of-memory错误" class="headerlink" title="出现内存不足，报JavaScript heap out of memory错误"></a>出现内存不足，报JavaScript heap out of memory错误</h3><p>安装依赖</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install cross-env increase-memory-limit</span><br></pre></td></tr></table></figure><p>修改package.json文件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;fix-memory-limit&quot;</span>: <span class="string">&quot;cross-env LIMIT=4096 increase-memory-limit&quot;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>执行命令</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run fix-memory-limit</span><br></pre></td></tr></table></figure><h3 id="报”node-–max-old-space-size-4096”不是内部或外部命令，也不是可运行的程序或批处理文件错误"><a href="#报”node-–max-old-space-size-4096”不是内部或外部命令，也不是可运行的程序或批处理文件错误" class="headerlink" title="报”node –max-old-space-size&#x3D;4096”不是内部或外部命令，也不是可运行的程序或批处理文件错误"></a>报”node –max-old-space-size&#x3D;4096”不是内部或外部命令，也不是可运行的程序或批处理文件错误</h3><p>批量替换node_modules&#x2F;.bin的*.cmd文件的”%_prog%”为%_prog%<br><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/9-1.png" alt="在这里插入图片描述"></p><h2 id="2-gzip-1"><a href="#2-gzip-1" class="headerlink" title="2.gzip"></a>2.gzip</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vite-plugin-compression</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">VitePluginCompression</span> <span class="keyword">from</span> <span class="string">&quot;vite-plugin-compression&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="attr">plugins</span>: [</span><br><span class="line">  <span class="title class_">VitePluginCompression</span>()</span><br><span class="line">],</span><br></pre></td></tr></table></figure><h2 id="3-去除console-1"><a href="#3-去除console-1" class="headerlink" title="3.去除console"></a>3.去除console</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">build</span>:&#123;</span><br><span class="line">  <span class="attr">minify</span>: <span class="string">&#x27;terser&#x27;</span>,</span><br><span class="line">  <span class="attr">terserOptions</span>: &#123;</span><br><span class="line">    <span class="attr">compress</span>: &#123;</span><br><span class="line">      <span class="attr">drop_console</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">drop_debugger</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h1 id="三、nginx部署"><a href="#三、nginx部署" class="headerlink" title="三、nginx部署"></a>三、nginx部署</h1><p>使用Xshell新建会话<br><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/9-2.png" alt="在这里插入图片描述"><br>进入到部署的目录下<br><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/9-3.png" alt="在这里插入图片描述"><br>使用Xftp传输打包好的包<br><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/9-4.png" alt="在这里插入图片描述"><br>使用unzip dist.zip命令解压即可</p><hr><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>部署前端项目其实非常简单</p>]]></content>
      
      
      <categories>
          
          <category> 服务器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue使用不支持的文件类型</title>
      <link href="/2023/08/28/Vue%E4%BD%BF%E7%94%A8%E4%B8%8D%E6%94%AF%E6%8C%81%E7%9A%84%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B/"/>
      <url>/2023/08/28/Vue%E4%BD%BF%E7%94%A8%E4%B8%8D%E6%94%AF%E6%8C%81%E7%9A%84%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Vue使用不支持的文件类型时，报You may need an appropriate loader to handle this file type, currently no loaders are configured to process this file.错误<br>示例中使用的数据：<a href="https://github.com/752841728/hexo-picture/blob/main/map/Cesium_Air.gltf">Cesium_Air.gltf</a></p><hr><h1 id="一、vue-cli"><a href="#一、vue-cli" class="headerlink" title="一、vue-cli"></a>一、vue-cli</h1><p>vue-cli4只支持node16版本，node16版本以上的版本需要修改package.json文件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;serve&quot;</span>: <span class="string">&quot;set NODE_OPTIONS=--openssl-legacy-provider &amp;&amp; vue-cli-service serve&quot;</span>,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="1-安装依赖"><a href="#1-安装依赖" class="headerlink" title="1.安装依赖"></a>1.安装依赖</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install url-loader</span><br><span class="line">npm install file-loader</span><br></pre></td></tr></table></figure><h2 id="2-配置vue-config-js文件"><a href="#2-配置vue-config-js文件" class="headerlink" title="2.配置vue.config.js文件"></a>2.配置vue.config.js文件</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">  <span class="attr">rules</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">test</span>: <span class="regexp">/\.(gltf)$/</span>,</span><br><span class="line">      <span class="attr">use</span>: &#123;</span><br><span class="line">        <span class="attr">loader</span>: <span class="string">&quot;url-loader&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h1 id="二、vite"><a href="#二、vite" class="headerlink" title="二、vite"></a>二、vite</h1><h2 id="1-配置vite-config-js文件"><a href="#1-配置vite-config-js文件" class="headerlink" title="1.配置vite.config.js文件"></a>1.配置vite.config.js文件</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">assetsInclude</span>: [<span class="string">&#x27;**/*.gltf&#x27;</span>],</span><br></pre></td></tr></table></figure><h1 id="三、使用方法"><a href="#三、使用方法" class="headerlink" title="三、使用方法"></a>三、使用方法</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> gltf <span class="keyword">from</span> <span class="string">&quot;@/assets/Cesium_Air.gltf&quot;</span>;</span><br><span class="line"></span><br><span class="line">viewer.<span class="property">scene</span>.<span class="property">primitives</span>.<span class="title function_">add</span>(</span><br><span class="line">  <span class="title class_">Cesium</span>.<span class="property">Model</span>.<span class="title function_">fromGltf</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: gltf,</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>如果觉得配置麻烦，可以直接将Cesium_Air.gltf文件放在public目录下，但会增加打包后包的大小</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">viewer.<span class="property">scene</span>.<span class="property">primitives</span>.<span class="title function_">add</span>(</span><br><span class="line">  <span class="title class_">Cesium</span>.<span class="property">Model</span>.<span class="title function_">fromGltf</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;./Cesium_Air.gltf&quot;</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><hr><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>感觉vue-cli4已经逐步进入淘汰阶段了，以后的文章不会再出现vue-cli4的内容了</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cesium相机根据路径飞行</title>
      <link href="/2023/08/28/Cesium%E7%9B%B8%E6%9C%BA%E6%A0%B9%E6%8D%AE%E8%B7%AF%E5%BE%84%E9%A3%9E%E8%A1%8C/"/>
      <url>/2023/08/28/Cesium%E7%9B%B8%E6%9C%BA%E6%A0%B9%E6%8D%AE%E8%B7%AF%E5%BE%84%E9%A3%9E%E8%A1%8C/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Cesium相机根据路径飞行，参考官网例子：<a href="https://sandcastle.cesium.com/?src=CZML%20Path.html">CZML Path</a></p><hr><h1 id="一、路径"><a href="#一、路径" class="headerlink" title="一、路径"></a>一、路径</h1><p>path.json</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">&quot;id&quot;</span>: <span class="string">&quot;document&quot;</span>,</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;CZML Path&quot;</span>,</span><br><span class="line">    <span class="string">&quot;version&quot;</span>: <span class="string">&quot;1.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;clock&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;interval&quot;</span>: <span class="string">&quot;2012-08-04T10:00:00Z/2012-08-04T15:00:00Z&quot;</span>,</span><br><span class="line">      <span class="string">&quot;currentTime&quot;</span>: <span class="string">&quot;2012-08-04T10:00:00Z&quot;</span>,</span><br><span class="line">      <span class="string">&quot;multiplier&quot;</span>: <span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">&quot;id&quot;</span>: <span class="string">&quot;path&quot;</span>,</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;path with GPS flight data&quot;</span>,</span><br><span class="line">    <span class="string">&quot;description&quot;</span>: <span class="string">&quot;&lt;p&gt;Hang gliding flight log data from Daniel H. Friedman.&lt;br&gt;Icon created by Larisa Skosyrska from the Noun Project&lt;/p&gt;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;availability&quot;</span>: <span class="string">&quot;2012-08-04T10:00:00Z/2012-08-04T15:00:00Z&quot;</span>,</span><br><span class="line">    <span class="string">&quot;path&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;material&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;polylineOutline&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;color&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;rgba&quot;</span>: [<span class="number">255</span>, <span class="number">0</span>, <span class="number">255</span>, <span class="number">255</span>]</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="string">&quot;outlineColor&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;rgba&quot;</span>: [<span class="number">0</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>]</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="string">&quot;outlineWidth&quot;</span>: <span class="number">5</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;width&quot;</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="string">&quot;leadTime&quot;</span>: <span class="number">10</span>,</span><br><span class="line">      <span class="string">&quot;trailTime&quot;</span>: <span class="number">1000</span>,</span><br><span class="line">      <span class="string">&quot;resolution&quot;</span>: <span class="number">5</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;billboard&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;image&quot;</span>: <span class="string">&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAfCAYAAACVgY94AAAACXBIWXMAAC4jAAAuIwF4pT92AAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAA7VJREFUeNrEl2uIlWUQx39nXUu0m2uQbZYrbabdLKMs/VBkmHQjioqFIhBS+hKEQpQRgVAf2u5RQkGBRUllRH4I2e5ZUBJlEZVt5i0tTfHStrZ6fn35L70d9n7Obg88vOedmWfmf2bmmZkXlRrtq9V16mZ1iVqqhd5agXvQf1c5zw/V8dXqrqO6dQKwBrgdWApsCb0VqAc2AnOrMVANwIsD4BLgTOBPYB2wHJgEzAG+ANqAu4ZsZYiuX5QwfqI2hvaNulA9J7zLQn8o76vUuuHOwXHqSzH4aIF+TWjnBkSH+nCBf716SP1KPWO4AJ6ltgfIjRW8p9U/1KPz/ry6RT2mIDNF3Zjz19Ya4G1R/J16dgWvQd2pPlXhMdVZPUTgxfCW1wJgXUJpQlvfg8zs8K8r0Caom9QHetG7NGfa1ElDBThRXRtFd/Qh16puKIS3e7+clBjdy7kL1b3q4fzJQQGck5z6Nb97kxujblWf64HXov7Vl/E4YXWccP9AAd6dAx+ox/WTArNzY1t64B0f8K0DyLXuUvRGZfcpCo1VX4tg6wB76WMB0dALf526foAX8cqUot2pGP8B2Kz+krBeNYjS8636dh/8Beo2deoA9TWp76pd6g0q9cDNwKvAD8A84EfglLRBe2g+JWAfcEF68bPABOCoAl/gIPA5MA64FVgGnNhP292W3r0SeB1YVlJXAjcBP8XwyQUj9AKwAzg2+/fQSsBhoJxBAaALaIzenZGnD911wA7gEDAD2FFSpwOzgDHZ5T7+ZSlGd2d6AXgi5+qAn+O5U0PbBVwKtAD3AHuB8f3YGBUdncCGoQ4LE9XtGRqK9LnduVPRIu2BPqwD65IYbS7Qpql7Ql9YoJcy9bwzkgPrfOCj5G33+h54E/g0PAr5thq4ApgyEgNrc27aWwVaPTA1QJ4BjgTGFvhteV40EgPrgvTP7qlmZqFnl9WD+b2posN83E/NrEkOjlI/U1fkfUYa/pe5IE3qZPW8jFOqiyN7p3pAPX04c7AxYSoDDcAjKT2LgLXA6IR2M3Bviv59wDTgQGTPH84Qd8+HXfHcoUws2zM0HMjuUPep+xP2PWpnwtw0GJsldbBpewQwE/gbeDyt7H1gcW53O7AC+A3Yn6+/W+Ld9SnWA15DAVhc8xK2TuA9YHrCuhV4EngFuBx4YagG6qv8cF+T52kB2Zy+e1I8taUacNV+uBdXO7ABmJwJpwx8XQvF9TUCWM64tiQhbq/oMv+7BwFWpQzNT8vbVQul/wwAGzzdmXU1xuUAAAAASUVORK5CYII=&quot;</span>,</span><br><span class="line">      <span class="string">&quot;scale&quot;</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="string">&quot;eyeOffset&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;cartesian&quot;</span>: [<span class="number">0.0</span>, <span class="number">0.0</span>, -<span class="number">10.0</span>]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;position&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;epoch&quot;</span>: <span class="string">&quot;2012-08-04T10:00:00Z&quot;</span>,</span><br><span class="line">      <span class="string">&quot;cartographicDegrees&quot;</span>: [</span><br><span class="line">        <span class="number">0</span>, <span class="number">114.11929057321021</span>, <span class="number">22.508639454137754</span>, <span class="number">0</span>, <span class="number">1200</span>, <span class="number">114.13791536061427</span>,</span><br><span class="line">        <span class="number">22.492303116519146</span>, <span class="number">0</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>隐藏飞机</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;billboard&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;scale&quot;</span>: <span class="number">0</span>,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>隐藏路径</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;path&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;width&quot;</span>: <span class="number">0</span>,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>时间范围和倍速</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;clock&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;interval&quot;</span>: <span class="string">&quot;2012-08-04T10:00:00Z/2012-08-04T15:00:00Z&quot;</span>,</span><br><span class="line">  <span class="string">&quot;currentTime&quot;</span>: <span class="string">&quot;2012-08-04T10:00:00Z&quot;</span>,</span><br><span class="line">  <span class="string">&quot;multiplier&quot;</span>: <span class="number">10</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>相机位置，第一个参数是时间（clock.multiplier乘秒），第二个到第四个参数分别是时间所在的经度，纬度，高度</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;position&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;cartographicDegrees&quot;</span>: [</span><br><span class="line">    <span class="number">0</span>, <span class="number">114.11929057321021</span>, <span class="number">22.508639454137754</span>, <span class="number">0</span>, <span class="number">1200</span>, <span class="number">114.13791536061427</span>,</span><br><span class="line">    <span class="number">22.492303116519146</span>, <span class="number">0</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="二、配置"><a href="#二、配置" class="headerlink" title="二、配置"></a>二、配置</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100vw; height: 100vh&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">Cesium</span> <span class="keyword">from</span> <span class="string">&quot;cesium&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="string">&quot;cesium/Build/Cesium/Widgets/widgets.css&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&quot;@/assets/path.json&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&quot;cesium&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">viewer</span>: <span class="literal">null</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">initMap</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title class_">Cesium</span>.<span class="property">Ion</span>.<span class="property">defaultAccessToken</span> =</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2ZTgxOGNhZC03NThmLTQ0NzMtOTNlYS1kNmM3YzlmZDU3NTMiLCJpZCI6MTI1NTY3LCJpYXQiOjE2NzY5MDI0MzJ9.ulIEz3NCh2cMEBiHrqIuv9I6icn5KTMMnBdy2wassoM&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">viewer</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Viewer</span>(<span class="string">&quot;map&quot;</span>, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 配置项</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">shouldAnimate</span>: <span class="literal">true</span>,    <span class="comment">// 开启动画</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">this</span>.<span class="title function_">initMap</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">this</span>.<span class="title function_">startFly</span>(path);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h1 id="三、开始飞行"><a href="#三、开始飞行" class="headerlink" title="三、开始飞行"></a>三、开始飞行</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">startFly</span> = (<span class="params">path</span>) =&gt; &#123;</span><br><span class="line">  viewer.<span class="property">dataSources</span></span><br><span class="line">    .<span class="title function_">add</span>(<span class="title class_">Cesium</span>.<span class="property">CzmlDataSource</span>.<span class="title function_">load</span>(path))</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">dataSource</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> flyEntity = dataSource.<span class="property">entities</span>.<span class="title function_">getById</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line">      <span class="comment">// 设置初始角度</span></span><br><span class="line">      flyEntity.<span class="property">viewFrom</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>(<span class="number">200</span>, <span class="number">0</span>, <span class="number">200</span>);</span><br><span class="line">      <span class="comment">// 避免相机视角卡顿</span></span><br><span class="line">      flyEntity.<span class="property">position</span>.<span class="title function_">setInterpolationOptions</span>(&#123;</span><br><span class="line">        <span class="attr">interpolationDegree</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">interpolationAlgorithm</span>: <span class="title class_">Cesium</span>.<span class="property">LagrangePolynomialApproximation</span>,</span><br><span class="line">      &#125;);</span><br><span class="line">      viewer.<span class="property">trackedEntity</span> = flyEntity;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><hr><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>飞行过程中调整视角<br><a href="https://blog.csdn.net/dahongdahong/article/details/108647230">Cesium飞行漫游，动态调整视角</a><br><a href="https://blog.csdn.net/linzi19900517/article/details/129089787">Cesium 视角跟随-第一人称视角漫游</a></p>]]></content>
      
      
      <categories>
          
          <category> GIS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cesium </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cesium批量添加label和billboard</title>
      <link href="/2023/08/28/Cesium%E6%89%B9%E9%87%8F%E6%B7%BB%E5%8A%A0label%E5%92%8Cbillboard/"/>
      <url>/2023/08/28/Cesium%E6%89%B9%E9%87%8F%E6%B7%BB%E5%8A%A0label%E5%92%8Cbillboard/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>使用primitive批量添加label和billboard<br>示例中使用的数据：<a href="https://github.com/752841728/hexo-picture/blob/main/map/pump.json">pump.json</a>、<a href="https://github.com/752841728/hexo-picture/blob/main/map/pump_icon.png">pump_icon.png</a></p><hr><h1 id="一、配置"><a href="#一、配置" class="headerlink" title="一、配置"></a>一、配置</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100vw; height: 100vh&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">Cesium</span> <span class="keyword">from</span> <span class="string">&quot;cesium&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="string">&quot;cesium/Build/Cesium/Widgets/widgets.css&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> pumpData <span class="keyword">from</span> <span class="string">&quot;@/assets/pump.json&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> pump_icon <span class="keyword">from</span> <span class="string">&quot;@/assets/pump_icon.jpg&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; tranformCoordinate &#125; <span class="keyword">from</span> <span class="string">&quot;@/utils/map.js&quot;</span>;    <span class="comment">// 转换坐标系的方法</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&quot;cesium&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">viewer</span>: <span class="literal">null</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">initMap</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title class_">Cesium</span>.<span class="property">Ion</span>.<span class="property">defaultAccessToken</span> =</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2ZTgxOGNhZC03NThmLTQ0NzMtOTNlYS1kNmM3YzlmZDU3NTMiLCJpZCI6MTI1NTY3LCJpYXQiOjE2NzY5MDI0MzJ9.ulIEz3NCh2cMEBiHrqIuv9I6icn5KTMMnBdy2wassoM&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">viewer</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Viewer</span>(<span class="string">&quot;map&quot;</span>, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 配置项</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">terrainProvider</span>: <span class="title class_">Cesium</span>.<span class="title function_">createWorldTerrain</span>(), <span class="comment">// 生成地形</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">requestRenderMode</span>: <span class="literal">true</span>,  <span class="comment">// 优化性能</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">maximumRenderTimeChange</span>: <span class="title class_">Infinity</span>,  <span class="comment">// 优化性能</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      viewer.<span class="property">scene</span>.<span class="property">globe</span>.<span class="property">depthTestAgainstTerrain</span> = <span class="literal">true</span>;  <span class="comment">// 开启深度检测</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      viewer.<span class="property">scene</span>.<span class="property">postProcessStages</span>.<span class="property">fxaa</span>.<span class="property">enabled</span> = <span class="literal">true</span>;  <span class="comment">// 抗锯齿</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">this</span>.<span class="title function_">initMap</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">this</span>.<span class="title function_">add_primitive_icon</span>(pumpData.<span class="property">features</span>, pump_icon, <span class="literal">true</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h1 id="二、label和billboard"><a href="#二、label和billboard" class="headerlink" title="二、label和billboard"></a>二、label和billboard</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">add_primitive_icon</span> = (<span class="params">data, image, withLabel</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> icons = viewer.<span class="property">scene</span>.<span class="property">primitives</span>.<span class="title function_">add</span>(<span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">BillboardCollection</span>());</span><br><span class="line">  <span class="keyword">let</span> labels;</span><br><span class="line">  <span class="keyword">if</span> (withLabel) &#123;</span><br><span class="line">    labels = viewer.<span class="property">scene</span>.<span class="property">primitives</span>.<span class="title function_">add</span>(<span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">LabelCollection</span>());</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt;= data.<span class="property">length</span> - <span class="number">1</span>; index++) &#123;</span><br><span class="line">    <span class="keyword">let</span> coordinates = data[index].<span class="property">geometry</span>.<span class="property">coordinates</span>;</span><br><span class="line">    <span class="keyword">let</span> text = data[index].<span class="property">properties</span>.<span class="property">CHINESE_NAME</span>;</span><br><span class="line">    <span class="keyword">let</span> name = data[index].<span class="property">properties</span>.<span class="property">NAME</span>;</span><br><span class="line">    <span class="keyword">let</span> position = <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(</span><br><span class="line">      ...<span class="title function_">tranformCoordinate</span>(coordinates[<span class="number">0</span>], coordinates[<span class="number">1</span>]),</span><br><span class="line">      <span class="number">0</span></span><br><span class="line">    );</span><br><span class="line">    icons.<span class="title function_">add</span>(&#123;</span><br><span class="line">      <span class="attr">position</span>: position,</span><br><span class="line">      <span class="attr">image</span>: image,</span><br><span class="line">      <span class="attr">disableDepthTestDistance</span>: <span class="title class_">Number</span>.<span class="property">POSITIVE_INFINITY</span>,   <span class="comment">// 避免深度检测被地形遮挡</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">if</span> (withLabel) &#123;</span><br><span class="line">      labels.<span class="title function_">add</span>(&#123;</span><br><span class="line">        <span class="attr">position</span>: position,</span><br><span class="line">        <span class="attr">text</span>: name,</span><br><span class="line">        <span class="attr">scale</span>: <span class="number">0.5</span>, <span class="comment">// 放大后缩小，提高清晰度</span></span><br><span class="line">        <span class="attr">fillColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">WHITE</span>,</span><br><span class="line">        <span class="attr">outlineColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLACK</span>,</span><br><span class="line">        <span class="attr">outlineWidth</span>: <span class="number">12.0</span>,</span><br><span class="line">        <span class="attr">style</span>: <span class="title class_">Cesium</span>.<span class="property">LabelStyle</span>.<span class="property">FILL_AND_OUTLINE</span>,</span><br><span class="line">        <span class="attr">font</span>: <span class="string">&quot;40px Source Han Sans CN&quot;</span>,</span><br><span class="line">        <span class="attr">pixelOffset</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian2</span>(<span class="number">0</span>, <span class="number">50</span>),  <span class="comment">// 偏移量</span></span><br><span class="line">        <span class="attr">disableDepthTestDistance</span>: <span class="title class_">Number</span>.<span class="property">POSITIVE_INFINITY</span>, <span class="comment">// 避免深度检测被地形遮挡</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="三、效果图"><a href="#三、效果图" class="headerlink" title="三、效果图"></a>三、效果图</h1><p><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/8-1.png" alt="在这里插入图片描述"></p><hr><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>转换坐标系的tranformCoordinate方法，参考右文：<a href="https://752841728.github.io/2023/08/24/%E4%B8%8D%E5%90%8C%E5%9D%90%E6%A0%87%E7%B3%BB%E7%9A%84%E7%BB%8F%E7%BA%AC%E5%BA%A6%E8%BD%AC%E6%8D%A2/">不同坐标系的经纬度转换</a></p>]]></content>
      
      
      <categories>
          
          <category> GIS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cesium </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cesium自定义底图</title>
      <link href="/2023/08/24/Cesium%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BA%95%E5%9B%BE/"/>
      <url>/2023/08/24/Cesium%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BA%95%E5%9B%BE/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>近期在做大屏的项目，需要蓝色系的地图，让我头疼了很久，这里提供一些方案</p><hr><h1 id="一、配置"><a href="#一、配置" class="headerlink" title="一、配置"></a>一、配置</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Cesium的token</span></span><br><span class="line"><span class="title class_">Cesium</span>.<span class="property">Ion</span>.<span class="property">defaultAccessToken</span> =</span><br><span class="line">  <span class="string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2ZTgxOGNhZC03NThmLTQ0NzMtOTNlYS1kNmM3YzlmZDU3NTMiLCJpZCI6MTI1NTY3LCJpYXQiOjE2NzY5MDI0MzJ9.ulIEz3NCh2cMEBiHrqIuv9I6icn5KTMMnBdy2wassoM&quot;</span>;</span><br><span class="line"><span class="comment">// SuperMap的token</span></span><br><span class="line"><span class="title class_">Cesium</span>.<span class="property">Credential</span>.<span class="property">CREDENTIAL</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Credential</span>(</span><br><span class="line">  <span class="string">&quot;ILPgjURUGKYLUyyTvQpjzZKkmmJaH0P1YwvShK4xShMthIA3JbY68vvfyxqVitXLDV7l24XaWzG35SzVnCwNWg..&quot;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">viewer = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Viewer</span>(<span class="string">&quot;map&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">infoBox</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">animation</span>: <span class="literal">false</span>, <span class="comment">// 禁用动画控件</span></span><br><span class="line">  <span class="attr">timeline</span>: <span class="literal">false</span>, <span class="comment">// 禁用时间线控件</span></span><br><span class="line">  <span class="attr">homeButton</span>: <span class="literal">false</span>, <span class="comment">// 禁用Home按钮</span></span><br><span class="line">  <span class="attr">sceneModePicker</span>: <span class="literal">false</span>, <span class="comment">// 禁用场景模式选择器</span></span><br><span class="line">  <span class="attr">baseLayerPicker</span>: <span class="literal">false</span>, <span class="comment">// 禁用图层选择器</span></span><br><span class="line">  <span class="attr">navigationHelpButton</span>: <span class="literal">false</span>, <span class="comment">// 禁用帮助按钮</span></span><br><span class="line">  <span class="attr">fullscreenButton</span>: <span class="literal">false</span>, <span class="comment">// 禁用全屏按钮</span></span><br><span class="line">  <span class="attr">geocoder</span>: <span class="literal">false</span>, <span class="comment">// 禁用搜索框</span></span><br><span class="line">  <span class="attr">requestRenderMode</span>: <span class="literal">true</span>, <span class="comment">// 显示渲染</span></span><br><span class="line">  <span class="attr">maximumRenderTimeChange</span>: <span class="number">1.0</span>,</span><br><span class="line">  <span class="attr">navigation</span>: <span class="literal">false</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="二、Cesium底图"><a href="#二、Cesium底图" class="headerlink" title="二、Cesium底图"></a>二、Cesium底图</h1><h2 id="1、设置透明度"><a href="#1、设置透明度" class="headerlink" title="1、设置透明度"></a>1、设置透明度</h2><p>terrainProvider也会变得透明，用于展示地下管线</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// cesium方法</span></span><br><span class="line">viewer.<span class="property">scene</span>.<span class="property">screenSpaceCameraController</span>.<span class="property">enableCollisionDetection</span> = <span class="literal">false</span>;</span><br><span class="line">viewer.<span class="property">scene</span>.<span class="property">globe</span>.<span class="property">translucency</span>.<span class="property">enabled</span> = <span class="literal">true</span>;</span><br><span class="line">viewer.<span class="property">scene</span>.<span class="property">globe</span>.<span class="property">translucency</span>.<span class="property">frontFaceAlpha</span> = <span class="number">0.8</span>;</span><br><span class="line"><span class="comment">// supermap方法</span></span><br><span class="line">viewer.<span class="property">scene</span>.<span class="property">terrainProvider</span>.<span class="property">isCreateSkirt</span> = <span class="literal">false</span>;</span><br><span class="line">viewer.<span class="property">scene</span>.<span class="property">undergroundMode</span> = <span class="literal">true</span>;</span><br><span class="line">viewer.<span class="property">scene</span>.<span class="property">globe</span>.<span class="property">globeAlpha</span> = <span class="number">0.8</span>;</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/7-6.png" alt="在这里插入图片描述"></p><h1 id="三、天地图"><a href="#三、天地图" class="headerlink" title="三、天地图"></a>三、天地图</h1><h2 id="1、使用方法"><a href="#1、使用方法" class="headerlink" title="1、使用方法"></a>1、使用方法</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> imageryLayers = viewer.<span class="property">imageryLayers</span>;</span><br><span class="line"><span class="comment">// 移出Cesium底图</span></span><br><span class="line">imageryLayers.<span class="title function_">removeAll</span>();</span><br><span class="line"><span class="comment">// 添加天地图</span></span><br><span class="line"><span class="keyword">let</span> imagery = imageryLayers.<span class="title function_">addImageryProvider</span>(</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">WebMapTileServiceImageryProvider</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;http://t0.tianditu.gov.cn/vec_w/wmts?service=wmts&amp;request=GetTile&amp;version=1.0.0&amp;LAYER=vec&amp;tileMatrixSet=w&amp;TileMatrix=&#123;TileMatrix&#125;&amp;TileRow=&#123;TileRow&#125;&amp;TileCol=&#123;TileCol&#125;&amp;style=default&amp;format=tiles&amp;tk=f69df935f2b4e5d06629d91c56be2809&quot;</span>,</span><br><span class="line">    <span class="attr">format</span>: <span class="string">&quot;image/png&quot;</span>,</span><br><span class="line">    <span class="attr">layer</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">style</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">tileMatrixSetID</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br><span class="line">imageryLayers.<span class="title function_">addImageryProvider</span>(</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">WebMapTileServiceImageryProvider</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;http://t0.tianditu.gov.cn/cia_w/wmts?service=wmts&amp;request=GetTile&amp;version=1.0.0&amp;LAYER=cia&amp;tileMatrixSet=w&amp;TileMatrix=&#123;TileMatrix&#125;&amp;TileRow=&#123;TileRow&#125;&amp;TileCol=&#123;TileCol&#125;&amp;style=default&amp;format=tiles&amp;tk=f69df935f2b4e5d06629d91c56be2809&quot;</span>,</span><br><span class="line">    <span class="attr">format</span>: <span class="string">&quot;image/png&quot;</span>,</span><br><span class="line">    <span class="attr">layer</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">style</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">tileMatrixSetID</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="2、自定义颜色"><a href="#2、自定义颜色" class="headerlink" title="2、自定义颜色"></a>2、自定义颜色</h2><p>通过Cesium的API调整，缺点：只有黑色效果好，其他颜色效果差</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">imagery.<span class="property">hue</span> = <span class="number">3</span>;</span><br><span class="line">imagery.<span class="property">contrast</span> = -<span class="number">1.5</span>;</span><br><span class="line">imagery.<span class="property">alpha</span> = <span class="number">0.2</span>;</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/7-1.png" alt="在这里插入图片描述"></p><p>通过Cesium的API调整，球体设置颜色，天地图设置透明度，缺点：清晰度差</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">viewer.<span class="property">scene</span>.<span class="property">globe</span>.<span class="property">baseColor</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Color</span>(<span class="number">0</span>, <span class="number">40</span> / <span class="number">255</span>, <span class="number">102</span> / <span class="number">255</span>);</span><br><span class="line">imagery.<span class="property">contrast</span> = -<span class="number">1.5</span>;</span><br><span class="line">imagery.<span class="property">alpha</span> = <span class="number">0.2</span>;</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/7-2.png" alt="在这里插入图片描述"></p><p>通过修改imageryLayers的着色器代码，缺点：imageryLayers的所有图层都会变色</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">imageryTheme</span>(<span class="params">viewer, color</span>) &#123;</span><br><span class="line">  <span class="comment">// 设置两个变量，用来判断是否进行颜色的翻转和过滤</span></span><br><span class="line">  <span class="keyword">const</span> options = &#123;</span><br><span class="line">    <span class="attr">invertColor</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">filterRGB</span>: color,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">// 更改地图着色器代码</span></span><br><span class="line">  <span class="keyword">const</span> baseFragShader =</span><br><span class="line">    viewer.<span class="property">scene</span>.<span class="property">globe</span>.<span class="property">_surfaceShaderSet</span>.<span class="property">baseFragmentShaderSource</span>.<span class="property">sources</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; baseFragShader.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> strS = <span class="string">&quot;color = czm_saturation(color, textureSaturation);\n#endif\n&quot;</span>;</span><br><span class="line">    <span class="keyword">let</span> strT = <span class="string">&quot;color = czm_saturation(color, textureSaturation);\n#endif\n&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (options.<span class="property">invertColor</span>) &#123;</span><br><span class="line">      strT += <span class="string">`</span></span><br><span class="line"><span class="string">      color.r = 1.0 - color.r;</span></span><br><span class="line"><span class="string">      color.g = 1.0 - color.g;</span></span><br><span class="line"><span class="string">      color.b = 1.0 - color.b;</span></span><br><span class="line"><span class="string">      `</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (options.<span class="property">filterRGB</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      strT += <span class="string">`</span></span><br><span class="line"><span class="string">      color.r = color.r * <span class="subst">$&#123;options.filterRGB[<span class="number">0</span>]&#125;</span>.0/255.0;</span></span><br><span class="line"><span class="string">      color.g = color.g * <span class="subst">$&#123;options.filterRGB[<span class="number">1</span>]&#125;</span>.0/255.0;</span></span><br><span class="line"><span class="string">      color.b = color.b * <span class="subst">$&#123;options.filterRGB[<span class="number">2</span>]&#125;</span>.0/255.0;</span></span><br><span class="line"><span class="string">      `</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    baseFragShader[i] = baseFragShader[i].<span class="title function_">replace</span>(strS, strT);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">imageryTheme</span>(viewer, [<span class="number">0</span>, <span class="number">107</span>, <span class="number">207</span>]);</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/7-3.png" alt="在这里插入图片描述"></p><h1 id="四、智图"><a href="#四、智图" class="headerlink" title="四、智图"></a>四、智图</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加geoq地图</span></span><br><span class="line">imageryLayers.<span class="title function_">addImageryProvider</span>(</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">UrlTemplateImageryProvider</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;http://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer/tile/&#123;z&#125;/&#123;y&#125;/&#123;x&#125;&quot;</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/7-4.png" alt="在这里插入图片描述"></p><h1 id="五、Mapbox"><a href="#五、Mapbox" class="headerlink" title="五、Mapbox"></a>五、Mapbox</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加mapbox地图</span></span><br><span class="line">imageryLayers.<span class="title function_">addImageryProvider</span>(</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">MapboxStyleImageryProvider</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;https://api.mapbox.com/styles/v1&quot;</span>,</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&quot;752841728&quot;</span>,</span><br><span class="line">    <span class="attr">styleId</span>: <span class="string">&quot;cllgeh81w000601pehdb5e02r&quot;</span>,</span><br><span class="line">    <span class="attr">accessToken</span>:</span><br><span class="line">      <span class="string">&quot;pk.eyJ1IjoiNzUyODQxNzI4IiwiYSI6ImNsbGdiNnJoNTB6ZjIzcW8xMjVudjJtOGUifQ.u6q8oswvLpgvjdp3nW76jg&quot;</span>,</span><br><span class="line">    <span class="attr">scaleFactor</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/7-5.png" alt="在这里插入图片描述"></p><hr><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>天地图改不出理想的效果，智图不清楚是否可以商用，最后选择了Mapbox<br><a href="https://baijiahao.baidu.com/s?id=1769460780111679075&wfr=spider&for=pc">Mapbox注册教程</a><br><a href="https://www.mapbox.com/gallery/">Mapbox官方样式</a><br>还有一些尝试失败的方案<br><a href="https://zhuanlan.zhihu.com/p/480835644">Cesium 高性能扩展之自定义地图主题</a><br><a href="https://segmentfault.com/a/1190000041703873">天地图修改主题颜色修改背景色</a></p>]]></content>
      
      
      <categories>
          
          <category> GIS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cesium </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>不同坐标系的经纬度转换</title>
      <link href="/2023/08/24/%E4%B8%8D%E5%90%8C%E5%9D%90%E6%A0%87%E7%B3%BB%E7%9A%84%E7%BB%8F%E7%BA%AC%E5%BA%A6%E8%BD%AC%E6%8D%A2/"/>
      <url>/2023/08/24/%E4%B8%8D%E5%90%8C%E5%9D%90%E6%A0%87%E7%B3%BB%E7%9A%84%E7%BB%8F%E7%BA%AC%E5%BA%A6%E8%BD%AC%E6%8D%A2/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>不同坐标系的经纬度转换<br>示例中使用的网站：<a href="https://epsg.io/">https://epsg.io/</a></p><hr><h1 id="一、安装依赖"><a href="#一、安装依赖" class="headerlink" title="一、安装依赖"></a>一、安装依赖</h1><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install proj4</span><br></pre></td></tr></table></figure><h1 id="二、引入依赖"><a href="#二、引入依赖" class="headerlink" title="二、引入依赖"></a>二、引入依赖</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="keyword">default</span> <span class="keyword">as</span> proj4 &#125; <span class="keyword">from</span> <span class="string">&quot;proj4&quot;</span>;</span><br></pre></td></tr></table></figure><h1 id="三、使用方法"><a href="#三、使用方法" class="headerlink" title="三、使用方法"></a>三、使用方法</h1><h2 id="1-搜索坐标系"><a href="#1-搜索坐标系" class="headerlink" title="1.搜索坐标系"></a>1.搜索坐标系</h2><p><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/6-1.png" alt="在这里插入图片描述"></p><h2 id="2-复制对应代码"><a href="#2-复制对应代码" class="headerlink" title="2.复制对应代码"></a>2.复制对应代码</h2><p>“2326&#x3D;”不用复制<br><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/6-2.png" alt="在这里插入图片描述"></p><h2 id="3-经纬度转换"><a href="#3-经纬度转换" class="headerlink" title="3.经纬度转换"></a>3.经纬度转换</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// EPSG:2326坐标转WGS 84坐标</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">tranformCoordinate</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line"><span class="keyword">const</span> fromProjection = <span class="string">`PROJCS[&quot;Hong Kong 1980 Grid System&quot;,GEOGCS[&quot;Hong Kong 1980&quot;,DATUM[&quot;Hong_Kong_1980&quot;,SPHEROID[&quot;International 1924&quot;,6378388,297],TOWGS84[-162.619,-276.959,-161.764,-0.067753,2.243648,1.158828,-1.094246]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4611&quot;]],PROJECTION[&quot;Transverse_Mercator&quot;],PARAMETER[&quot;latitude_of_origin&quot;,22.3121333333333],PARAMETER[&quot;central_meridian&quot;,114.178555555556],PARAMETER[&quot;scale_factor&quot;,1],PARAMETER[&quot;false_easting&quot;,836694.05],PARAMETER[&quot;false_northing&quot;,819069.8],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;2326&quot;]]`</span>;</span><br><span class="line"><span class="keyword">const</span> toProjection = <span class="string">`GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]`</span>;</span><br><span class="line"><span class="keyword">const</span> newCoordinates = <span class="title function_">proj4</span>(fromProjection, toProjection, [x, y]);</span><br><span class="line"><span class="keyword">return</span> [newCoordinates[<span class="number">0</span>], newCoordinates[<span class="number">1</span>]]; <span class="comment">// 返回数组格式</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>Cesium的世界坐标、地理坐标、屏幕坐标等坐标转换，参考右文：<a href="https://blog.csdn.net/qq_17627195/article/details/127412829?ops_request_misc=&request_id=6e5136859c114aab89fa9127494dc61b&biz_id=&utm_medium=distribute.pc_search_result.none-task-blog-2~blog~koosearch~default-1-127412829-null-null.268%5Ev1%5Econtrol&utm_term=%E5%9D%90%E6%A0%87%E8%BD%AC%E6%8D%A2&spm=1018.2226.3001.4450">Cesium 坐标转换（各坐标互相转换）</a></p>]]></content>
      
      
      <categories>
          
          <category> GIS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cesium </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cesium添加三维管线</title>
      <link href="/2023/08/24/Cesium%E6%B7%BB%E5%8A%A0%E4%B8%89%E7%BB%B4%E7%AE%A1%E7%BA%BF/"/>
      <url>/2023/08/24/Cesium%E6%B7%BB%E5%8A%A0%E4%B8%89%E7%BB%B4%E7%AE%A1%E7%BA%BF/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>使用primitive添加三维管线，并自定义材质和颜色<br>示例中使用的数据：<a href="https://github.com/752841728/hexo-picture/blob/main/map/map-3d.json">map-3d.json</a>、<a href="https://github.com/752841728/hexo-picture/blob/main/map/surface.jpg">surface.jpg</a></p><hr><h1 id="一、配置"><a href="#一、配置" class="headerlink" title="一、配置"></a>一、配置</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100vw; height: 100vh&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; onMounted &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">Cesium</span> <span class="keyword">from</span> <span class="string">&quot;cesium&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="string">&quot;cesium/Build/Cesium/Widgets/widgets.css&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> mapData <span class="keyword">from</span> <span class="string">&quot;@/assets/map-3d.json&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> surface_img <span class="keyword">from</span> <span class="string">&quot;@/assets/surface.jpg&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; tranformCoordinate &#125; <span class="keyword">from</span> <span class="string">&quot;@/utils/map.js&quot;</span>; <span class="comment">// 转换坐标系的方法</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> viewer = <span class="literal">null</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">function</span> <span class="title function_">initMap</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title class_">Cesium</span>.<span class="property">Ion</span>.<span class="property">defaultAccessToken</span> =</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2ZTgxOGNhZC03NThmLTQ0NzMtOTNlYS1kNmM3YzlmZDU3NTMiLCJpZCI6MTI1NTY3LCJpYXQiOjE2NzY5MDI0MzJ9.ulIEz3NCh2cMEBiHrqIuv9I6icn5KTMMnBdy2wassoM&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  viewer = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Viewer</span>(<span class="string">&quot;map&quot;</span>, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 配置项</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">terrainProvider</span>: <span class="title class_">Cesium</span>.<span class="title function_">createWorldTerrain</span>(), <span class="comment">// 生成地形</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">requestRenderMode</span>: <span class="literal">true</span>, <span class="comment">// 优化性能</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">maximumRenderTimeChange</span>: <span class="title class_">Infinity</span>, <span class="comment">// 优化性能</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  viewer.<span class="property">scene</span>.<span class="property">globe</span>.<span class="property">depthTestAgainstTerrain</span> = <span class="literal">true</span>; <span class="comment">// 开启深度检测</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">function</span> <span class="title function_">setView</span>(<span class="params">x, y, z</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">if</span> (x <span class="keyword">instanceof</span> <span class="title class_">Array</span> || y <span class="keyword">instanceof</span> <span class="title class_">Array</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 如果x和y是数组，根据x和y计算出定位的矩形范围</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    viewer.<span class="property">camera</span>.<span class="title function_">setView</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">destination</span>: <span class="title class_">Cesium</span>.<span class="property">Rectangle</span>.<span class="title function_">fromDegrees</span>(...<span class="title function_">handleData</span>(x, y)),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">duration</span>: <span class="number">0</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">complete</span>: <span class="function">() =&gt;</span> &#123;&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125; <span class="keyword">else</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    viewer.<span class="property">camera</span>.<span class="title function_">setView</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">destination</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(x, y, z),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">duration</span>: <span class="number">0</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">complete</span>: <span class="function">() =&gt;</span> &#123;&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">function</span> <span class="title function_">handleData</span>(<span class="params">x_arr, y_arr</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> xmax = <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> xmin = <span class="number">180</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> ymax = <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> ymin = <span class="number">90</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    x_arr.<span class="title function_">forEach</span>(<span class="function">(<span class="params">x</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      xmax = <span class="title class_">Math</span>.<span class="title function_">max</span>(xmax, x);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      xmin = <span class="title class_">Math</span>.<span class="title function_">min</span>(xmin, x);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    y_arr.<span class="title function_">forEach</span>(<span class="function">(<span class="params">y</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      ymax = <span class="title class_">Math</span>.<span class="title function_">max</span>(ymax, y);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      ymin = <span class="title class_">Math</span>.<span class="title function_">min</span>(ymin, y);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> shift_x = (xmax - xmin) / <span class="number">20</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> shift_y = (ymax - ymin) / <span class="number">20</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> [xmin - shift_x, ymin - shift_y, xmax + shift_x, ymax + shift_y];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">initMap</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">setView</span>(<span class="number">114.12355031754687</span>, <span class="number">22.526787240228305</span>, <span class="number">10000</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">add3DLine</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="二、三维管线"><a href="#二、三维管线" class="headerlink" title="二、三维管线"></a>二、三维管线</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加三维管线</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add3DLine</span>(<span class="params">withOutline</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> volume = []; <span class="comment">// 管线</span></span><br><span class="line">  <span class="keyword">const</span> volume_outline = []; <span class="comment">// 管线轮廓</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 管线的横截面，radius半径，side_number几边形</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">computeCircle</span>(<span class="params">radius, side_number</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> positions = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; side_number; i++) &#123;</span><br><span class="line">      <span class="keyword">const</span> radians = <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toRadians</span>(i * (<span class="number">360</span> / side_number)); <span class="comment">// 360边形就是一个圆</span></span><br><span class="line">      positions.<span class="title function_">push</span>(</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian2</span>(</span><br><span class="line">          radius * <span class="title class_">Math</span>.<span class="title function_">cos</span>(radians),</span><br><span class="line">          radius * <span class="title class_">Math</span>.<span class="title function_">sin</span>(radians)</span><br><span class="line">        )</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> positions;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  mapData.<span class="property">features</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">feature, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> positions = feature.<span class="property">geometry</span>.<span class="property">coordinates</span>[<span class="number">0</span>];</span><br><span class="line">    volume.<span class="title function_">push</span>(</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">GeometryInstance</span>(&#123;</span><br><span class="line">        <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PolylineVolumeGeometry</span>(&#123;</span><br><span class="line">          <span class="attr">polylinePositions</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegreesArrayHeights</span>(</span><br><span class="line">            <span class="title function_">handleData</span>(positions, <span class="number">5</span>)</span><br><span class="line">          ),</span><br><span class="line">          <span class="attr">shapePositions</span>: <span class="title function_">computeCircle</span>(<span class="number">0.5</span>, <span class="number">6</span>),</span><br><span class="line">        &#125;),</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// 管线轮廓</span></span><br><span class="line">    <span class="keyword">if</span> (withOutline) &#123;</span><br><span class="line">      volume_outline.<span class="title function_">push</span>(</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">GeometryInstance</span>(&#123;</span><br><span class="line">          <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PolylineVolumeOutlineGeometry</span>(&#123;</span><br><span class="line">            <span class="attr">polylinePositions</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegreesArrayHeights</span>(</span><br><span class="line">              <span class="title function_">handleData</span>(positions, <span class="number">5</span>)</span><br><span class="line">            ),</span><br><span class="line">            <span class="attr">shapePositions</span>: <span class="title function_">computeCircle</span>(<span class="number">0.5</span>, <span class="number">6</span>),</span><br><span class="line">          &#125;),</span><br><span class="line">          <span class="attr">attributes</span>: &#123;</span><br><span class="line">            <span class="attr">color</span>: <span class="title class_">Cesium</span>.<span class="property">ColorGeometryInstanceAttribute</span>.<span class="title function_">fromColor</span>(</span><br><span class="line">              <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Color</span>(<span class="number">255</span> / <span class="number">255</span>, <span class="number">255</span> / <span class="number">255</span>, <span class="number">255</span> / <span class="number">255</span>, <span class="number">1</span>)</span><br><span class="line">            ),</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;)</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  viewer.<span class="property">scene</span>.<span class="property">primitives</span>.<span class="title function_">add</span>(</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Primitive</span>(&#123;</span><br><span class="line">      <span class="attr">geometryInstances</span>: volume,</span><br><span class="line">      <span class="attr">releaseGeometryInstances</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">appearance</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">EllipsoidSurfaceAppearance</span>(&#123;</span><br><span class="line">        <span class="attr">material</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Material</span>(&#123;</span><br><span class="line">          <span class="attr">fabric</span>: &#123;</span><br><span class="line">            <span class="attr">uniforms</span>: &#123;</span><br><span class="line">              <span class="attr">image</span>: surface_img,</span><br><span class="line">              <span class="attr">color</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="title function_">fromBytes</span>(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>),</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">source</span>: <span class="string">`</span></span><br><span class="line"><span class="string">                uniform vec4 color;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">                czm_material czm_getMaterial(czm_materialInput materialInput)</span></span><br><span class="line"><span class="string">                &#123;</span></span><br><span class="line"><span class="string">                    czm_material material = czm_getDefaultMaterial(materialInput);</span></span><br><span class="line"><span class="string">                    vec2 st = materialInput.st;</span></span><br><span class="line"><span class="string">                    float s = st.s;</span></span><br><span class="line"><span class="string">                    float t = st.t;</span></span><br><span class="line"><span class="string">                    vec4 colorImage = texture(image, vec2(fract(s), t));</span></span><br><span class="line"><span class="string">                    material.diffuse = colorImage.rgb * color.rgb;</span></span><br><span class="line"><span class="string">                    return material;</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">                `</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;),</span><br><span class="line">      &#125;),</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">  <span class="comment">// 管线轮廓</span></span><br><span class="line">  <span class="keyword">if</span> (withOutline) &#123;</span><br><span class="line">    viewer.<span class="property">scene</span>.<span class="property">primitives</span>.<span class="title function_">add</span>(</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Primitive</span>(&#123;</span><br><span class="line">        <span class="attr">geometryInstances</span>: volume_outline,</span><br><span class="line">        <span class="attr">appearance</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PerInstanceColorAppearance</span>(&#123;</span><br><span class="line">          <span class="attr">flat</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="attr">renderState</span>: &#123;</span><br><span class="line">            <span class="attr">lineWidth</span>: <span class="number">1.0</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;),</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleData</span>(<span class="params">data, height</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> arr = [];</span><br><span class="line">    data.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">      arr.<span class="title function_">push</span>(...<span class="title function_">tranformCoordinate</span>(item[<span class="number">0</span>], item[<span class="number">1</span>]));</span><br><span class="line">      <span class="keyword">if</span> (height) arr.<span class="title function_">push</span>(height);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="三、效果图"><a href="#三、效果图" class="headerlink" title="三、效果图"></a>三、效果图</h1><p><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/5-1.png" alt="在这里插入图片描述"></p><hr><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>转换坐标系的tranformCoordinate方法，参考右文：<a href="https://752841728.github.io/2023/08/24/%E4%B8%8D%E5%90%8C%E5%9D%90%E6%A0%87%E7%B3%BB%E7%9A%84%E7%BB%8F%E7%BA%AC%E5%BA%A6%E8%BD%AC%E6%8D%A2/">不同坐标系的经纬度转换</a></p>]]></content>
      
      
      <categories>
          
          <category> GIS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cesium </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cesium实现渐变色多边形</title>
      <link href="/2023/07/14/Cesium%E5%AE%9E%E7%8E%B0%E6%B8%90%E5%8F%98%E8%89%B2%E5%A4%9A%E8%BE%B9%E5%BD%A2/"/>
      <url>/2023/07/14/Cesium%E5%AE%9E%E7%8E%B0%E6%B8%90%E5%8F%98%E8%89%B2%E5%A4%9A%E8%BE%B9%E5%BD%A2/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>本文添加多边形的方法和数据，参考右文：<a href="https://752841728.github.io/2023/06/30/Cesium%E6%B7%BB%E5%8A%A0%E7%82%B9%E3%80%81%E7%BA%BF%E3%80%81%E9%9D%A2/">Cesium添加点、线、面</a></p><hr><h1 id="一、canvas实现渐变色"><a href="#一、canvas实现渐变色" class="headerlink" title="一、canvas实现渐变色"></a>一、canvas实现渐变色</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;mapBgCanvas&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position: fixed&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 渐变色画布</span></span><br><span class="line"><span class="title function_">initCanvas</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;mapBgCanvas&quot;</span>);</span><br><span class="line">  <span class="keyword">if</span> (canvas &amp;&amp; canvas.<span class="property">getContext</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> grad = ctx.<span class="title function_">createLinearGradient</span>(<span class="number">150</span>, <span class="number">0</span>, <span class="number">150</span>, <span class="number">150</span>); <span class="comment">// 创建一个渐变色线性对象</span></span><br><span class="line">    <span class="comment">// grad.addColorStop(0, &quot;rgba(28, 146, 210, 1)&quot;); // 设置渐变颜色</span></span><br><span class="line">    <span class="comment">// grad.addColorStop(1, &quot;rgba(76, 161, 175, 1)&quot;);</span></span><br><span class="line">    grad.<span class="title function_">addColorStop</span>(<span class="number">0</span>, <span class="string">&quot;rgba(44, 74, 157, 1)&quot;</span>); <span class="comment">// 设置渐变颜色</span></span><br><span class="line">    grad.<span class="title function_">addColorStop</span>(<span class="number">1</span>, <span class="string">&quot;rgba(33, 184, 255, 1)&quot;</span>);</span><br><span class="line">    ctx.<span class="property">fillStyle</span> = grad; <span class="comment">// 设置fillStyle为当前的渐变对象</span></span><br><span class="line">    ctx.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">300</span>, <span class="number">300</span>); <span class="comment">// 绘制渐变图形</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// entity</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">gradientColor</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">ImageMaterialProperty</span>(&#123;</span><br><span class="line">    <span class="attr">image</span>: <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;mapBgCanvas&quot;</span>),</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// primitive</span></span><br><span class="line">  <span class="comment">// this.gradientColor = new Cesium.Material(&#123;</span></span><br><span class="line">  <span class="comment">//   fabric: &#123;</span></span><br><span class="line">  <span class="comment">//     type: &quot;Image&quot;,</span></span><br><span class="line">  <span class="comment">//     uniforms: &#123;</span></span><br><span class="line">  <span class="comment">//       image: document.getElementById(&quot;mapBgCanvas&quot;),</span></span><br><span class="line">  <span class="comment">//     &#125;,</span></span><br><span class="line">  <span class="comment">//   &#125;,</span></span><br><span class="line">  <span class="comment">// &#125;);</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h1 id="二、entity实现渐变色多边形"><a href="#二、entity实现渐变色多边形" class="headerlink" title="二、entity实现渐变色多边形"></a>二、entity实现渐变色多边形</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// entity添加面</span></span><br><span class="line"><span class="title function_">add_entity_polygon</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">entity_polygon</span> = <span class="variable language_">this</span>.<span class="property">viewer</span>.<span class="property">entities</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">    <span class="attr">polygon</span>: &#123;</span><br><span class="line">      <span class="attr">hierarchy</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegreesArray</span>(</span><br><span class="line">        <span class="title function_">handleData</span>(mapData.<span class="property">polygon_vertices</span>)</span><br><span class="line">      ),</span><br><span class="line">      <span class="attr">material</span>: <span class="variable language_">this</span>.<span class="property">gradientColor</span>,</span><br><span class="line">      <span class="attr">height</span>: <span class="number">1000</span>, <span class="comment">// 一定要设置高度，否则outline不生效</span></span><br><span class="line">      <span class="attr">outline</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">outlineColor</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Color</span>(<span class="number">255</span> / <span class="number">255</span>, <span class="number">255</span> / <span class="number">255</span>, <span class="number">255</span> / <span class="number">255</span>, <span class="number">1</span>),</span><br><span class="line">      <span class="attr">outlineWidth</span>: <span class="number">2</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;polygon&quot;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleData</span>(<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> arr = [];</span><br><span class="line">    data.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">      arr.<span class="title function_">push</span>(<span class="title class_">Number</span>(item.<span class="property">x</span>), <span class="title class_">Number</span>(item.<span class="property">y</span>));</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h1 id="三、primitive实现渐变色多边形"><a href="#三、primitive实现渐变色多边形" class="headerlink" title="三、primitive实现渐变色多边形"></a>三、primitive实现渐变色多边形</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// primitive添加面</span></span><br><span class="line"><span class="title function_">add_primitive_polygon</span>(<span class="params"></span></span><br><span class="line"><span class="params">  color = <span class="keyword">new</span> Cesium.Color(<span class="number">0</span> / <span class="number">255</span>, <span class="number">185</span> / <span class="number">255</span>, <span class="number">255</span> / <span class="number">255</span>, <span class="number">1</span>)</span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 多边形</span></span><br><span class="line">  <span class="keyword">let</span> polygonGeometry = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">GeometryInstance</span>(&#123;</span><br><span class="line">    <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PolygonGeometry</span>(&#123;</span><br><span class="line">      <span class="attr">height</span>: <span class="number">1000</span>, <span class="comment">// 高度在这里设置</span></span><br><span class="line">      <span class="attr">polygonHierarchy</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PolygonHierarchy</span>(</span><br><span class="line">        <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegreesArray</span>(</span><br><span class="line">          <span class="title function_">handleData</span>(mapData.<span class="property">polygon_vertices</span>)</span><br><span class="line">        )</span><br><span class="line">      ),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="attr">id</span>: &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;polygon&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">primitive_polygon</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Primitive</span>(&#123;</span><br><span class="line">    <span class="attr">asynchronous</span>: <span class="literal">false</span>, <span class="comment">// 通过删除再添加实现变色，此过程不会出现卡顿</span></span><br><span class="line">    <span class="attr">geometryInstances</span>: polygonGeometry,</span><br><span class="line">    <span class="attr">appearance</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">EllipsoidSurfaceAppearance</span>(&#123;</span><br><span class="line">      <span class="attr">material</span>: <span class="variable language_">this</span>.<span class="property">gradientColor</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">viewer</span>.<span class="property">scene</span>.<span class="property">primitives</span>.<span class="title function_">add</span>(<span class="variable language_">this</span>.<span class="property">primitive_polygon</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 多边形边框</span></span><br><span class="line">  <span class="keyword">var</span> polygonOutlineGeometry = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">GeometryInstance</span>(&#123;</span><br><span class="line">    <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PolylineGeometry</span>(&#123;</span><br><span class="line">      <span class="attr">positions</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegreesArrayHeights</span>(</span><br><span class="line">        <span class="title function_">handleData</span>(mapData.<span class="property">polygon_vertices</span>, <span class="number">1000</span>)</span><br><span class="line">      ),</span><br><span class="line">      <span class="attr">width</span>: <span class="number">2</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="attr">id</span>: &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;polygon&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">primitive_polygonOutline</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Primitive</span>(&#123;</span><br><span class="line">    <span class="attr">asynchronous</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">geometryInstances</span>: polygonOutlineGeometry,</span><br><span class="line">    <span class="attr">appearance</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PolylineMaterialAppearance</span>(&#123;</span><br><span class="line">      <span class="attr">material</span>: <span class="title class_">Cesium</span>.<span class="property">Material</span>.<span class="title function_">fromType</span>(<span class="string">&quot;Color&quot;</span>, &#123;</span><br><span class="line">        <span class="attr">color</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Color</span>(<span class="number">255</span> / <span class="number">255</span>, <span class="number">255</span> / <span class="number">255</span>, <span class="number">255</span> / <span class="number">255</span>, <span class="number">1</span>),</span><br><span class="line">      &#125;),</span><br><span class="line">    &#125;),</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">viewer</span>.<span class="property">scene</span>.<span class="property">primitives</span>.<span class="title function_">add</span>(<span class="variable language_">this</span>.<span class="property">primitive_polygonOutline</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleData</span>(<span class="params">data, height</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> arr = [];</span><br><span class="line">    data.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">      arr.<span class="title function_">push</span>(<span class="title class_">Number</span>(item.<span class="property">x</span>), <span class="title class_">Number</span>(item.<span class="property">y</span>));</span><br><span class="line">      <span class="keyword">if</span> (height) arr.<span class="title function_">push</span>(height);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h1 id="四、效果图"><a href="#四、效果图" class="headerlink" title="四、效果图"></a>四、效果图</h1><p><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/4-1.png" alt="在这里插入图片描述"></p><hr><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p><a href="https://752841728.github.io/2023/06/30/Cesium%E6%B7%BB%E5%8A%A0%E7%82%B9%E3%80%81%E7%BA%BF%E3%80%81%E9%9D%A2/">Cesium添加点、线、面</a>中添加多边形的方法和本文中添加渐变色的方法，区别是将material改为this.gradientColor即可</p>]]></content>
      
      
      <categories>
          
          <category> GIS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cesium </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginx使用流程</title>
      <link href="/2023/07/14/Nginx%E4%BD%BF%E7%94%A8%E6%B5%81%E7%A8%8B/"/>
      <url>/2023/07/14/Nginx%E4%BD%BF%E7%94%A8%E6%B5%81%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Windows 的 Nginx、Tomcat 的使用流程</p><hr><h1 id="一、Nginx"><a href="#一、Nginx" class="headerlink" title="一、Nginx"></a>一、Nginx</h1><h2 id="1-下载"><a href="#1-下载" class="headerlink" title="1.下载"></a>1.下载</h2><p>下载地址：<a href="http://nginx.org/en/download.html">http://nginx.org/en/download.html</a></p><p><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/2-1.png" alt="在这里插入图片描述"></p><h2 id="2-使用"><a href="#2-使用" class="headerlink" title="2.使用"></a>2.使用</h2><p>使用 Vue 项目的 npm run build:prod 命令打包生成 dist 文件夹，将 dist 文件夹下的所有文件移动到 nginx 的 html 文件夹下</p><p><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/2-2.png" alt="在这里插入图片描述"></p><p>在 nginx 文件夹下运行 cmd 控制台</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nginx// 启动nginx服务</span><br><span class="line">nginx <span class="literal">-s</span> reload// 重新加载修改后的html文件或nginx配置文件（不需要重新启动nginx服务）</span><br><span class="line">nginx <span class="literal">-s</span> quit// 关闭nginx服务</span><br></pre></td></tr></table></figure><p>Nginx 服务的默认端口号是 80，conf 文件夹下的 nginx.conf 文件可以修改端口号</p><p><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/2-3.png" alt="在这里插入图片描述"></p><p>如果 Vue 项目的路由模式是 history 模式，那么刷新会出现 404 错误，因此需要 Nginx 进行反向代理</p><p><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/2-4.png" alt="在这里插入图片描述"></p><h2 id="3-部署多个项目"><a href="#3-部署多个项目" class="headerlink" title="3.部署多个项目"></a>3.部署多个项目</h2><p>一个计算机可以同时存在多个 Nginx 服务，只要保证端口号不同即可。如果需要在一个端口号下（https 的 443 端口号）部署多个项目，则通过子目录的方式实现</p><p><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/2-5.png" alt="在这里插入图片描述"><br><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/2-6.png" alt="在这里插入图片描述"><br>Vue 项目需要修改 vue.config.js（vue-cli 是 publicPath 属性，vite 是 base 属性）</p><p><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/2-8.png" alt="在这里插入图片描述"></p><p>Vue 项目还需要修改路由配置（vue-router3 是新增 base 属性，vue-router4 是使用 API 传参）</p><p><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/2-7.png" alt="在这里插入图片描述"></p><h1 id="二、Tomcat"><a href="#二、Tomcat" class="headerlink" title="二、Tomcat"></a>二、Tomcat</h1><h2 id="1-下载-1"><a href="#1-下载-1" class="headerlink" title="1.下载"></a>1.下载</h2><p>Tomcat 下载地址：<a href="https://tomcat.apache.org/download-80.cgil">https://tomcat.apache.org/download-80.cgi</a><br><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/2-9.png" alt="在这里插入图片描述"><br>Java 下载地址：<a href="https://www.oracle.com/java/technologies/downloads">https://www.oracle.com/java/technologies/downloads</a><br><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/2-10.png" alt="在这里插入图片描述"></p><h2 id="2-配置环境变量"><a href="#2-配置环境变量" class="headerlink" title="2.配置环境变量"></a>2.配置环境变量</h2><p>新增系统变量，对应 Tomcat 和 Java 安装路径</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CATALINA_BASEE:\tomcat\apache<span class="literal">-tomcat-8</span>.<span class="number">5.91</span></span><br><span class="line">CATALINA_HOMEE:\tomcat\apache<span class="literal">-tomcat-8</span>.<span class="number">5.91</span></span><br><span class="line">CATALINA_TMPDIRE:\tomcat\apache<span class="literal">-tomcat-8</span>.<span class="number">5.91</span>\temp</span><br><span class="line">JAVA_HOMEE:\Java\jdk1.<span class="number">8.0</span>_6</span><br><span class="line">CLASSPATH.;%JAVA_HOME%\lib\dt.jar;%JAVA_HOME%\lib\tools.jar</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/2-11.png" alt="在这里插入图片描述"><br>编辑 Path 环境变量</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">E:\tomcat\apache<span class="literal">-tomcat-8</span>.<span class="number">5.91</span>\bin</span><br><span class="line">%JAVA_HOME%\bin</span><br><span class="line">%JAVA_HOME%\jre\bin</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/2-12.png" alt="在这里插入图片描述"></p><h2 id="3-使用"><a href="#3-使用" class="headerlink" title="3.使用"></a>3.使用</h2><p>使用 Vue 项目的 npm run build:prod 命令打包生成 dist 文件夹，将 dist 文件夹下的所有文件移动到 sttss_web 的 html 文件夹下（新建 sttss_web 文件夹，名字随意）<br><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/2-13.png" alt="在这里插入图片描述"><br>如果 Vue 项目的路由模式是 history 模式，那么刷新会出现 404 错误，因此需要在 sttss_web 文件夹下添加 WEB_INF&#x2F;web.xml 文件</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee/web-app_2_5.xsd&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">id</span>=<span class="string">&quot;scplatform&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">version</span>=<span class="string">&quot;2.5&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>/<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">error-page</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">error-code</span>&gt;</span>404<span class="tag">&lt;/<span class="name">error-code</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">location</span>&gt;</span>/index.html<span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">error-page</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/2-14.png" alt="在这里插入图片描述"><br>双击 bin&#x2F;startup.bat 启动 Tomcat 服务即可</p><p><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/2-15.png" alt="在这里插入图片描述"><br>Tomcat 服务的默认端口号是 8080，conf 文件夹下的 server.xml 文件可以修改端口号</p><p><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/2-16.png" alt="在这里插入图片描述"><br>如果请求 Tomcat 的静态资源出现跨域问题，可以在 conf 文件夹下的 web.xml 文件添加配置</p><p><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/2-17.png" alt="在这里插入图片描述"></p><hr><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>本文使用的是 Tomcat 8 和 Java 8，不同的版本的 Tomcat 和 Java 会有兼容性问题</p>]]></content>
      
      
      <categories>
          
          <category> 服务器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cesium添加三维数据</title>
      <link href="/2023/06/30/Cesium%E6%B7%BB%E5%8A%A0%E4%B8%89%E7%BB%B4%E6%95%B0%E6%8D%AE/"/>
      <url>/2023/06/30/Cesium%E6%B7%BB%E5%8A%A0%E4%B8%89%E7%BB%B4%E6%95%B0%E6%8D%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Cesium添加gltf、3dtiles、geotiff、超图等三维数据</p><hr><h1 id="一、gltf"><a href="#一、gltf" class="headerlink" title="一、gltf"></a>一、gltf</h1><h2 id="1-entity"><a href="#1-entity" class="headerlink" title="1.entity"></a>1.entity</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> viewer = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Viewer</span>(<span class="string">&quot;cesiumcontainer&quot;</span>, &#123;</span><br><span class="line">    <span class="comment">//动态动画</span></span><br><span class="line">    <span class="attr">shouldAnimate</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 设置模型位置</span></span><br><span class="line"><span class="keyword">let</span> position = <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(<span class="number">114.162813</span>, <span class="number">22.279327</span>, <span class="number">100</span>);</span><br><span class="line"><span class="comment">// 设置模型方向</span></span><br><span class="line"><span class="keyword">let</span> hpRoll = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">HeadingPitchRoll</span>(<span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toRadians</span>(<span class="number">0</span>), <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toRadians</span>(<span class="number">0</span>), <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toRadians</span>(<span class="number">0</span>));<span class="comment">//弧度</span></span><br><span class="line"><span class="keyword">let</span> orientation = <span class="title class_">Cesium</span>.<span class="property">Transforms</span>.<span class="title function_">headingPitchRollQuaternion</span>(position, hpRoll);</span><br><span class="line"><span class="keyword">let</span> model = viewer.<span class="property">entities</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">    <span class="comment">// 模型id</span></span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;model&#x27;</span>,</span><br><span class="line">    <span class="comment">// 模型位置</span></span><br><span class="line">    <span class="attr">position</span>: position,</span><br><span class="line">    <span class="comment">// 模型方向</span></span><br><span class="line">    <span class="attr">orientation</span>: orientation,</span><br><span class="line">    <span class="comment">// 模型资源</span></span><br><span class="line">    <span class="attr">model</span>: &#123;</span><br><span class="line">        <span class="comment">// 模型路径</span></span><br><span class="line">        <span class="attr">uri</span>: <span class="string">&#x27;./gltf/Cesium_Air.gltf&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">viewer.<span class="title function_">zoomTo</span>(model)</span><br></pre></td></tr></table></figure><h2 id="2-primitive"><a href="#2-primitive" class="headerlink" title="2.primitive"></a>2.primitive</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> viewer = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Viewer</span>(<span class="string">&quot;cesiumcontainer&quot;</span>, &#123;</span><br><span class="line">    <span class="comment">//动态动画</span></span><br><span class="line">    <span class="attr">shouldAnimate</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 设置模型位置</span></span><br><span class="line"><span class="keyword">let</span> position = <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(<span class="number">114.162813</span>, <span class="number">22.279327</span>, <span class="number">100</span>);</span><br><span class="line"><span class="comment">// 设置模型方向</span></span><br><span class="line"><span class="keyword">let</span> hpRoll = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">HeadingPitchRoll</span>(<span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toRadians</span>(<span class="number">0</span>), <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toRadians</span>(<span class="number">0</span>), <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toRadians</span>(<span class="number">0</span>));<span class="comment">//弧度</span></span><br><span class="line"><span class="keyword">let</span> modelMatrix = <span class="title class_">Cesium</span>.<span class="property">Transforms</span>.<span class="title function_">headingPitchRollToFixedFrame</span>(</span><br><span class="line">    position,</span><br><span class="line">    hpRoll,</span><br><span class="line">    <span class="title class_">Cesium</span>.<span class="property">Ellipsoid</span>.<span class="property">WGS84</span>,</span><br><span class="line">    <span class="title class_">Cesium</span>.<span class="property">Transforms</span>.<span class="property">eastNorthUpToFixedFrame</span>,</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Matrix4</span>()</span><br><span class="line">);</span><br><span class="line"><span class="keyword">let</span> model = viewer.<span class="property">scene</span>.<span class="property">primitives</span>.<span class="title function_">add</span>(</span><br><span class="line">    <span class="title class_">Cesium</span>.<span class="property">Model</span>.<span class="title function_">fromGltf</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&quot;./gltf/Cesium_Air.gltf&quot;</span>,</span><br><span class="line">        <span class="attr">modelMatrix</span>: modelMatrix,</span><br><span class="line">        <span class="attr">scale</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">color</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Color</span>(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>),</span><br><span class="line">    &#125;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">viewer.<span class="property">camera</span>.<span class="title function_">setView</span>(&#123;</span><br><span class="line">    <span class="attr">destination</span>: position,</span><br><span class="line">    <span class="attr">duration</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">complete</span>: <span class="function">() =&gt;</span> &#123;&#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/3-1.png" alt="在这里插入图片描述"></p><h1 id="二、3dtiles"><a href="#二、3dtiles" class="headerlink" title="二、3dtiles"></a>二、3dtiles</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> viewer = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Viewer</span>(<span class="string">&quot;cesiumcontainer&quot;</span>, &#123;</span><br><span class="line">  <span class="comment">// 生成地形</span></span><br><span class="line">  <span class="attr">terrainProvider</span>: <span class="title class_">Cesium</span>.<span class="title function_">createWorldTerrain</span>(),</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 加载倾斜示范数据</span></span><br><span class="line"><span class="keyword">var</span> palaceTileset = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cesium3DTileset</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&quot;./3dtiles/W20229-MWBRWPS-M-B-000/W20229-MWBRWPS-M-B-000/tileset.json&quot;</span>,</span><br><span class="line">&#125;);</span><br><span class="line">palaceTileset.<span class="property">readyPromise</span>.<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">palaceTileset</span>) &#123;</span><br><span class="line">  viewer.<span class="property">scene</span>.<span class="property">primitives</span>.<span class="title function_">add</span>(palaceTileset);</span><br><span class="line">  <span class="comment">// 控制模型的位置</span></span><br><span class="line">  <span class="title function_">update3dtilesMaxtrix</span>(palaceTileset, &#123;</span><br><span class="line">    <span class="attr">tx</span>: <span class="number">114.1314395</span>, <span class="comment">// 模型中心X轴坐标（经度，单位：十进制度）</span></span><br><span class="line">    <span class="attr">ty</span>: <span class="number">22.5404925</span>, <span class="comment">// 模型中心Y轴坐标（纬度，单位：十进制度）</span></span><br><span class="line">    <span class="attr">tz</span>: <span class="number">0</span>, <span class="comment">// 模型中心Z轴坐标（高程，单位：米）</span></span><br><span class="line">    <span class="attr">rx</span>: <span class="number">0</span>, <span class="comment">// X轴（经度）方向旋转角度（单位：度）</span></span><br><span class="line">    <span class="attr">ry</span>: <span class="number">0</span>, <span class="comment">// Y轴（纬度）方向旋转角度（单位：度）</span></span><br><span class="line">    <span class="attr">rz</span>: <span class="number">182.5</span>, <span class="comment">// Z轴（高程）方向旋转角度（单位：度）</span></span><br><span class="line">    <span class="attr">scale</span>: <span class="number">1</span>, <span class="comment">// 缩放比例</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// 定位到三维模型</span></span><br><span class="line">  viewer.<span class="title function_">zoomTo</span>(palaceTileset);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="1-控制位置"><a href="#1-控制位置" class="headerlink" title="1.控制位置"></a>1.控制位置</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 控制位置</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">update3dtilesMaxtrix</span>(<span class="params">tileset, position_params</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> cartographic = <span class="title class_">Cesium</span>.<span class="property">Cartographic</span>.<span class="title function_">fromCartesian</span>(</span><br><span class="line">    tileset.<span class="property">boundingSphere</span>.<span class="property">center</span></span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">var</span> surface = <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(</span><br><span class="line">    <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toDegrees</span>(cartographic.<span class="property">longitude</span>),</span><br><span class="line">    <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toDegrees</span>(cartographic.<span class="property">latitude</span>),</span><br><span class="line">    cartographic.<span class="property">height</span></span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">var</span> offset = <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(</span><br><span class="line">    position_params.<span class="property">tx</span>,</span><br><span class="line">    position_params.<span class="property">ty</span>,</span><br><span class="line">    position_params.<span class="property">tz</span></span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">var</span> translation = <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">subtract</span>(</span><br><span class="line">    offset,</span><br><span class="line">    surface,</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>()</span><br><span class="line">  );</span><br><span class="line">  <span class="comment">// 赋值给tileset</span></span><br><span class="line">  tileset.<span class="property">modelMatrix</span> = <span class="title class_">Cesium</span>.<span class="property">Matrix4</span>.<span class="title function_">fromTranslation</span>(translation);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-控制位置、角度、缩放"><a href="#2-控制位置、角度、缩放" class="headerlink" title="2.控制位置、角度、缩放"></a>2.控制位置、角度、缩放</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 控制位置、角度、缩放</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">update3dtilesMaxtrix</span>(<span class="params">tileset, position_params</span>) &#123;</span><br><span class="line">  <span class="comment">// 旋转</span></span><br><span class="line">  <span class="keyword">var</span> mx = <span class="title class_">Cesium</span>.<span class="property">Matrix3</span>.<span class="title function_">fromRotationX</span>(</span><br><span class="line">    <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toRadians</span>(position_params.<span class="property">rx</span>)</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">var</span> my = <span class="title class_">Cesium</span>.<span class="property">Matrix3</span>.<span class="title function_">fromRotationY</span>(</span><br><span class="line">    <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toRadians</span>(position_params.<span class="property">ry</span>)</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">var</span> mz = <span class="title class_">Cesium</span>.<span class="property">Matrix3</span>.<span class="title function_">fromRotationZ</span>(</span><br><span class="line">    <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toRadians</span>(position_params.<span class="property">rz</span>)</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">var</span> rotationX = <span class="title class_">Cesium</span>.<span class="property">Matrix4</span>.<span class="title function_">fromRotationTranslation</span>(mx);</span><br><span class="line">  <span class="keyword">var</span> rotationY = <span class="title class_">Cesium</span>.<span class="property">Matrix4</span>.<span class="title function_">fromRotationTranslation</span>(my);</span><br><span class="line">  <span class="keyword">var</span> rotationZ = <span class="title class_">Cesium</span>.<span class="property">Matrix4</span>.<span class="title function_">fromRotationTranslation</span>(mz);</span><br><span class="line">  <span class="comment">// 缩放</span></span><br><span class="line">  <span class="keyword">var</span> scale = <span class="title class_">Cesium</span>.<span class="property">Matrix4</span>.<span class="title function_">fromUniformScale</span>(position_params.<span class="property">scale</span>);</span><br><span class="line">  <span class="comment">// 平移</span></span><br><span class="line">  <span class="keyword">var</span> position = <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(</span><br><span class="line">    position_params.<span class="property">tx</span>,</span><br><span class="line">    position_params.<span class="property">ty</span>,</span><br><span class="line">    position_params.<span class="property">tz</span></span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">var</span> m = <span class="title class_">Cesium</span>.<span class="property">Transforms</span>.<span class="title function_">eastNorthUpToFixedFrame</span>(position);</span><br><span class="line">  <span class="comment">// 旋转、平移、缩放矩阵相乘</span></span><br><span class="line">  <span class="title class_">Cesium</span>.<span class="property">Matrix4</span>.<span class="title function_">multiply</span>(m, scale, m);</span><br><span class="line">  <span class="title class_">Cesium</span>.<span class="property">Matrix4</span>.<span class="title function_">multiply</span>(m, rotationX, m);</span><br><span class="line">  <span class="title class_">Cesium</span>.<span class="property">Matrix4</span>.<span class="title function_">multiply</span>(m, rotationY, m);</span><br><span class="line">  <span class="title class_">Cesium</span>.<span class="property">Matrix4</span>.<span class="title function_">multiply</span>(m, rotationZ, m);</span><br><span class="line">  <span class="comment">// 赋值给tileset</span></span><br><span class="line">  tileset.<span class="property">_root</span>.<span class="property">transform</span> = m;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/3-2.png" alt="在这里插入图片描述"></p><h1 id="三、geotiff"><a href="#三、geotiff" class="headerlink" title="三、geotiff"></a>三、geotiff</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> viewer = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Viewer</span>(<span class="string">&quot;cesiumcontainer&quot;</span>, &#123;</span><br><span class="line">    <span class="attr">terrainProvider</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">CesiumTerrainProvider</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&quot;./DigitalTerrainModelDTM_GEOTIFF&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">viewer.<span class="property">camera</span>.<span class="title function_">setView</span>(&#123;</span><br><span class="line">    <span class="attr">destination</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(<span class="number">113.824174404144</span>, <span class="number">22.1379446983337</span>, <span class="number">1000</span>),</span><br><span class="line">    <span class="attr">duration</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">complete</span>: <span class="function">() =&gt;</span> &#123;&#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/3-3.png" alt="在这里插入图片描述"></p><h1 id="四、SuperMap"><a href="#四、SuperMap" class="headerlink" title="四、SuperMap"></a>四、SuperMap</h1><p><a href="http://support.supermap.com.cn/DownloadCenter/DownloadPage.aspx?id=2336">SuperMap的安装包</a></p><p><a href="http://support.supermap.com.cn/DataWarehouse/WebDocHelp/iServer/webgl/examples/webgl/examples.html#layer">SuperMap的Demo</a></p><p><a href="http://support.supermap.com.cn/DataWarehouse/WebDocHelp/iServer/webgl/web/apis/3dwebgl.html">SuperMap的文档</a></p><p><a href="https://www.bilibili.com/video/BV1Dh41137x5/?spm_id_from=333.1007.top_right_bar_window_custom_collection.content.click&vd_source=7db51e154f5eebccdf418a5264852559">SuperMap的教程</a></p><p><a href="http://qa.supermap.com/">SuperMap技术问答社区</a></p><hr><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>推荐一个glb转gltf、ogsb转3dtiles的工具包：<a href="https://github.com/fanvanzh/3dtiles">3dtiles</a></p>]]></content>
      
      
      <categories>
          
          <category> GIS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cesium </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cesium添加点、线、面</title>
      <link href="/2023/06/30/Cesium%E6%B7%BB%E5%8A%A0%E7%82%B9%E3%80%81%E7%BA%BF%E3%80%81%E9%9D%A2/"/>
      <url>/2023/06/30/Cesium%E6%B7%BB%E5%8A%A0%E7%82%B9%E3%80%81%E7%BA%BF%E3%80%81%E9%9D%A2/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>使用 entity 和 primitive 两种方式添加点、线、面，并通过点击事件修改颜色<br>示例使用的数据：<a href="https://github.com/752841728/hexo-picture/blob/main/map/map.js">map.js</a></p><hr><h1 id="一、配置"><a href="#一、配置" class="headerlink" title="一、配置"></a>一、配置</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100vw; height: 100vh&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">Cesium</span> <span class="keyword">from</span> <span class="string">&quot;cesium&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="string">&quot;cesium/Build/Cesium/Widgets/widgets.css&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> mapData <span class="keyword">from</span> <span class="string">&quot;@/assets/map.js&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&quot;cesium&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">viewer</span>: <span class="literal">null</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">entity_point_list</span>: &#123;&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">entity_line_list</span>: &#123;&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">entity_polygon</span>: <span class="literal">null</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">primitive_point_list</span>: &#123;&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">primitive_line_list</span>: &#123;&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">primitive_polygon</span>: <span class="literal">null</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">primitive_polygonOutline</span>: <span class="literal">null</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">initMap</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title class_">Cesium</span>.<span class="property">Ion</span>.<span class="property">defaultAccessToken</span> =</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2ZTgxOGNhZC03NThmLTQ0NzMtOTNlYS1kNmM3YzlmZDU3NTMiLCJpZCI6MTI1NTY3LCJpYXQiOjE2NzY5MDI0MzJ9.ulIEz3NCh2cMEBiHrqIuv9I6icn5KTMMnBdy2wassoM&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">viewer</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Viewer</span>(<span class="string">&quot;map&quot;</span>, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 配置项</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 定位</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">setView</span>(<span class="params">x, y, z</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">if</span> (x <span class="keyword">instanceof</span> <span class="title class_">Array</span> || y <span class="keyword">instanceof</span> <span class="title class_">Array</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 如果x和y是数组，根据x和y计算出定位的矩形范围</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">this</span>.<span class="property">viewer</span>.<span class="property">camera</span>.<span class="title function_">setView</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">destination</span>: <span class="title class_">Cesium</span>.<span class="property">Rectangle</span>.<span class="title function_">fromDegrees</span>(...<span class="title function_">handleData</span>(x, y)),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">duration</span>: <span class="number">0</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">complete</span>: <span class="function">() =&gt;</span> &#123;&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125; <span class="keyword">else</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">this</span>.<span class="property">viewer</span>.<span class="property">camera</span>.<span class="title function_">setView</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">destination</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(x, y, z),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">duration</span>: <span class="number">0</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">complete</span>: <span class="function">() =&gt;</span> &#123;&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">function</span> <span class="title function_">handleData</span>(<span class="params">x_arr, y_arr</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> xmax = <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> xmin = <span class="number">180</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> ymax = <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> ymin = <span class="number">90</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        x_arr.<span class="title function_">forEach</span>(<span class="function">(<span class="params">x</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          xmax = <span class="title class_">Math</span>.<span class="title function_">max</span>(xmax, x);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          xmin = <span class="title class_">Math</span>.<span class="title function_">min</span>(xmin, x);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        y_arr.<span class="title function_">forEach</span>(<span class="function">(<span class="params">y</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          ymax = <span class="title class_">Math</span>.<span class="title function_">max</span>(ymax, y);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          ymin = <span class="title class_">Math</span>.<span class="title function_">min</span>(ymin, y);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> shift_x = (xmax - xmin) / <span class="number">20</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> shift_y = (ymax - ymin) / <span class="number">20</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> [xmin - shift_x, ymin - shift_y, xmax + shift_x, ymax + shift_y];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">this</span>.<span class="title function_">initMap</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">this</span>.<span class="title function_">setView</span>(mapData.<span class="property">junction_x</span>, mapData.<span class="property">junction_y</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h1 id="二、entity"><a href="#二、entity" class="headerlink" title="二、entity"></a>二、entity</h1><h2 id="1-点"><a href="#1-点" class="headerlink" title="1.点"></a>1.点</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// entity加载点</span></span><br><span class="line"><span class="title function_">add_entity_point</span>(<span class="params"></span>) &#123;</span><br><span class="line">  mapData.<span class="property">junction_id</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">entity_point_list</span>[item] = <span class="variable language_">this</span>.<span class="property">viewer</span>.<span class="property">entities</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">      <span class="attr">position</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(</span><br><span class="line">        mapData.<span class="property">junction_x</span>[index],</span><br><span class="line">        mapData.<span class="property">junction_y</span>[index]</span><br><span class="line">      ),</span><br><span class="line">      <span class="attr">point</span>: &#123;</span><br><span class="line">        <span class="attr">pixelSize</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">color</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Color</span>(<span class="number">20</span> / <span class="number">255</span>, <span class="number">204</span> / <span class="number">255</span>, <span class="number">137</span> / <span class="number">255</span>, <span class="number">1</span>),</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;point&quot;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="2-线"><a href="#2-线" class="headerlink" title="2.线"></a>2.线</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// entity添加线</span></span><br><span class="line"><span class="title function_">add_entity_line</span>(<span class="params"></span>) &#123;</span><br><span class="line">  mapData.<span class="property">pipe_id</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">entity_line_list</span>[item] = <span class="variable language_">this</span>.<span class="property">viewer</span>.<span class="property">entities</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">      <span class="attr">polyline</span>: &#123;</span><br><span class="line">        <span class="attr">positions</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegreesArray</span>(</span><br><span class="line">          <span class="title function_">handleData</span>(mapData.<span class="property">pipe_vertices</span>[index])</span><br><span class="line">        ),</span><br><span class="line">        <span class="attr">width</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">material</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Color</span>(<span class="number">0</span> / <span class="number">255</span>, <span class="number">185</span> / <span class="number">255</span>, <span class="number">255</span> / <span class="number">255</span>, <span class="number">1</span>),</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;line&quot;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleData</span>(<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> arr = [];</span><br><span class="line">    data.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">      arr.<span class="title function_">push</span>(item[<span class="number">0</span>], item[<span class="number">1</span>]);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="3-面"><a href="#3-面" class="headerlink" title="3.面"></a>3.面</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// entity添加面</span></span><br><span class="line"><span class="title function_">add_entity_polygon</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">entity_polygon</span> = <span class="variable language_">this</span>.<span class="property">viewer</span>.<span class="property">entities</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">    <span class="attr">polygon</span>: &#123;</span><br><span class="line">      <span class="attr">hierarchy</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegreesArray</span>(</span><br><span class="line">        <span class="title function_">handleData</span>(mapData.<span class="property">polygon_vertices</span>)</span><br><span class="line">      ),</span><br><span class="line">      <span class="attr">material</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Color</span>(<span class="number">0</span> / <span class="number">255</span>, <span class="number">185</span> / <span class="number">255</span>, <span class="number">255</span> / <span class="number">255</span>, <span class="number">1</span>),</span><br><span class="line">      <span class="attr">height</span>: <span class="number">1000</span>, <span class="comment">// 一定要设置高度，否则outline不生效</span></span><br><span class="line">      <span class="attr">outline</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">outlineColor</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Color</span>(<span class="number">255</span> / <span class="number">255</span>, <span class="number">255</span> / <span class="number">255</span>, <span class="number">255</span> / <span class="number">255</span>, <span class="number">1</span>),</span><br><span class="line">      <span class="attr">outlineWidth</span>: <span class="number">2</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;polygon&quot;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleData</span>(<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> arr = [];</span><br><span class="line">    data.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">      arr.<span class="title function_">push</span>(<span class="title class_">Number</span>(item.<span class="property">x</span>), <span class="title class_">Number</span>(item.<span class="property">y</span>));</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="4-点击变色"><a href="#4-点击变色" class="headerlink" title="4.点击变色"></a>4.点击变色</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加点击事件</span></span><br><span class="line"><span class="title function_">addHandler</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> handler = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">ScreenSpaceEventHandler</span>(</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">viewer</span>.<span class="property">scene</span>.<span class="property">canvas</span></span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  handler.<span class="title function_">setInputAction</span>(<span class="function">(<span class="params">movement</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> pick = <span class="variable language_">this</span>.<span class="property">viewer</span>.<span class="property">scene</span>.<span class="title function_">pick</span>(movement.<span class="property">position</span>);</span><br><span class="line">    <span class="keyword">if</span> (!pick) <span class="keyword">return</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;pick:&quot;</span>, pick);</span><br><span class="line">    <span class="comment">// entity</span></span><br><span class="line">    <span class="keyword">if</span> (pick.<span class="property">id</span>.<span class="property">name</span> == <span class="string">&quot;point&quot;</span>) &#123;</span><br><span class="line">      pick.<span class="property">id</span>.<span class="property">point</span>.<span class="property">color</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Color</span>(</span><br><span class="line">        <span class="number">255</span> / <span class="number">255</span>,</span><br><span class="line">        <span class="number">0</span> / <span class="number">255</span>,</span><br><span class="line">        <span class="number">0</span> / <span class="number">255</span>,</span><br><span class="line">        <span class="number">1</span></span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (pick.<span class="property">id</span>.<span class="property">name</span> == <span class="string">&quot;line&quot;</span>) &#123;</span><br><span class="line">      pick.<span class="property">id</span>.<span class="property">polyline</span>.<span class="property">material</span>.<span class="property">color</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Color</span>(</span><br><span class="line">        <span class="number">255</span> / <span class="number">255</span>,</span><br><span class="line">        <span class="number">0</span> / <span class="number">255</span>,</span><br><span class="line">        <span class="number">0</span> / <span class="number">255</span>,</span><br><span class="line">        <span class="number">1</span></span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (pick.<span class="property">id</span>.<span class="property">name</span> == <span class="string">&quot;polygon&quot;</span>) &#123;</span><br><span class="line">      pick.<span class="property">id</span>.<span class="property">polygon</span>.<span class="property">material</span>.<span class="property">color</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Color</span>(</span><br><span class="line">        <span class="number">255</span> / <span class="number">255</span>,</span><br><span class="line">        <span class="number">0</span> / <span class="number">255</span>,</span><br><span class="line">        <span class="number">0</span> / <span class="number">255</span>,</span><br><span class="line">        <span class="number">1</span></span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="title class_">Cesium</span>.<span class="property">ScreenSpaceEventType</span>.<span class="property">LEFT_CLICK</span>);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h1 id="三、primitive"><a href="#三、primitive" class="headerlink" title="三、primitive"></a>三、primitive</h1><h2 id="1-点-1"><a href="#1-点-1" class="headerlink" title="1.点"></a>1.点</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// primitive添加点</span></span><br><span class="line"><span class="title function_">add_primitive_point</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> data = mapData;</span><br><span class="line">  <span class="keyword">const</span> pointGeometry = [];</span><br><span class="line">  <span class="keyword">const</span> length = data.<span class="property">junction_id</span>.<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt;= length - <span class="number">1</span>; index++) &#123;</span><br><span class="line">    pointGeometry.<span class="title function_">push</span>(</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">GeometryInstance</span>(&#123;</span><br><span class="line">        <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">CircleGeometry</span>(&#123;</span><br><span class="line">          <span class="attr">center</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(</span><br><span class="line">            data.<span class="property">junction_x</span>[index],</span><br><span class="line">            data.<span class="property">junction_y</span>[index]</span><br><span class="line">          ),</span><br><span class="line">          <span class="attr">radius</span>: <span class="number">5</span>,</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="attr">id</span>: &#123; <span class="attr">id</span>: data.<span class="property">junction_id</span>[index], <span class="attr">name</span>: <span class="string">&quot;point&quot;</span> &#125;,</span><br><span class="line">        <span class="attr">attributes</span>: &#123;</span><br><span class="line">          <span class="attr">color</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">ColorGeometryInstanceAttribute</span>(</span><br><span class="line">            <span class="number">20</span> / <span class="number">255</span>,</span><br><span class="line">            <span class="number">204</span> / <span class="number">255</span>,</span><br><span class="line">            <span class="number">137</span> / <span class="number">255</span>,</span><br><span class="line">            <span class="number">1</span></span><br><span class="line">          ),</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">primitive_point_list</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Primitive</span>(&#123;</span><br><span class="line">    <span class="attr">geometryInstances</span>: pointGeometry,</span><br><span class="line">    <span class="attr">appearance</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PerInstanceColorAppearance</span>(&#123;</span><br><span class="line">      <span class="attr">flat</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">viewer</span>.<span class="property">scene</span>.<span class="property">primitives</span>.<span class="title function_">add</span>(<span class="variable language_">this</span>.<span class="property">primitive_point_list</span>);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="2-线-1"><a href="#2-线-1" class="headerlink" title="2.线"></a>2.线</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// primitive添加线</span></span><br><span class="line"><span class="title function_">add_primitive_line</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> data = mapData;</span><br><span class="line">  <span class="keyword">const</span> lineGeometry = [];</span><br><span class="line">  <span class="keyword">const</span> length = data.<span class="property">pipe_id</span>.<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt;= length - <span class="number">1</span>; index++) &#123;</span><br><span class="line">    lineGeometry.<span class="title function_">push</span>(</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">GeometryInstance</span>(&#123;</span><br><span class="line">        <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PolylineGeometry</span>(&#123;</span><br><span class="line">          <span class="attr">positions</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegreesArray</span>(</span><br><span class="line">            <span class="title function_">handleData</span>(data.<span class="property">pipe_vertices</span>[index])</span><br><span class="line">          ),</span><br><span class="line">          <span class="attr">width</span>: <span class="number">2</span>,</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="attr">id</span>: &#123; <span class="attr">id</span>: data.<span class="property">pipe_id</span>[index], <span class="attr">name</span>: <span class="string">&quot;line&quot;</span> &#125;,</span><br><span class="line">        <span class="attr">attributes</span>: &#123;</span><br><span class="line">          <span class="attr">color</span>: <span class="title class_">Cesium</span>.<span class="property">ColorGeometryInstanceAttribute</span>.<span class="title function_">fromColor</span>(</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Color</span>(<span class="number">0</span> / <span class="number">255</span>, <span class="number">185</span> / <span class="number">255</span>, <span class="number">255</span> / <span class="number">255</span>, <span class="number">1</span>)</span><br><span class="line">          ),</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">primitive_line_list</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Primitive</span>(&#123;</span><br><span class="line">    <span class="attr">geometryInstances</span>: lineGeometry,</span><br><span class="line">    <span class="attr">appearance</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PolylineColorAppearance</span>(),</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">viewer</span>.<span class="property">scene</span>.<span class="property">primitives</span>.<span class="title function_">add</span>(<span class="variable language_">this</span>.<span class="property">primitive_line_list</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleData</span>(<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> arr = [];</span><br><span class="line">    data.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">      arr.<span class="title function_">push</span>(item[<span class="number">0</span>], item[<span class="number">1</span>]);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="3-面-1"><a href="#3-面-1" class="headerlink" title="3.面"></a>3.面</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// primitive添加面</span></span><br><span class="line"><span class="title function_">add_primitive_polygon</span>(<span class="params"></span></span><br><span class="line"><span class="params">  color = <span class="keyword">new</span> Cesium.Color(<span class="number">0</span> / <span class="number">255</span>, <span class="number">185</span> / <span class="number">255</span>, <span class="number">255</span> / <span class="number">255</span>, <span class="number">1</span>)</span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 多边形</span></span><br><span class="line">  <span class="keyword">let</span> polygonGeometry = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">GeometryInstance</span>(&#123;</span><br><span class="line">    <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PolygonGeometry</span>(&#123;</span><br><span class="line">      <span class="attr">height</span>: <span class="number">1000</span>, <span class="comment">// 高度在这里设置</span></span><br><span class="line">      <span class="attr">polygonHierarchy</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PolygonHierarchy</span>(</span><br><span class="line">        <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegreesArray</span>(</span><br><span class="line">          <span class="title function_">handleData</span>(mapData.<span class="property">polygon_vertices</span>)</span><br><span class="line">        )</span><br><span class="line">      ),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="attr">id</span>: &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;polygon&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">primitive_polygon</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Primitive</span>(&#123;</span><br><span class="line">    <span class="attr">asynchronous</span>: <span class="literal">false</span>, <span class="comment">// 如果通过删除再添加实现变色，添加此属性不会出现卡顿</span></span><br><span class="line">    <span class="attr">geometryInstances</span>: polygonGeometry,</span><br><span class="line">    <span class="attr">appearance</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">EllipsoidSurfaceAppearance</span>(&#123;</span><br><span class="line">      <span class="attr">material</span>: <span class="title class_">Cesium</span>.<span class="property">Material</span>.<span class="title function_">fromType</span>(<span class="string">&quot;Color&quot;</span>, &#123;</span><br><span class="line">        <span class="attr">color</span>: color,</span><br><span class="line">      &#125;),</span><br><span class="line">    &#125;),</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">viewer</span>.<span class="property">scene</span>.<span class="property">primitives</span>.<span class="title function_">add</span>(<span class="variable language_">this</span>.<span class="property">primitive_polygon</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 多边形边框</span></span><br><span class="line">  <span class="keyword">var</span> polygonOutlineGeometry = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">GeometryInstance</span>(&#123;</span><br><span class="line">    <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PolylineGeometry</span>(&#123;</span><br><span class="line">      <span class="attr">positions</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegreesArrayHeights</span>(</span><br><span class="line">        <span class="title function_">handleData</span>(mapData.<span class="property">polygon_vertices</span>, <span class="number">1000</span>)</span><br><span class="line">      ),</span><br><span class="line">      <span class="attr">width</span>: <span class="number">2</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="attr">id</span>: &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;polygon&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">primitive_polygonOutline</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Primitive</span>(&#123;</span><br><span class="line">    <span class="attr">asynchronous</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">geometryInstances</span>: polygonOutlineGeometry,</span><br><span class="line">    <span class="attr">appearance</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PolylineMaterialAppearance</span>(&#123;</span><br><span class="line">      <span class="attr">material</span>: <span class="title class_">Cesium</span>.<span class="property">Material</span>.<span class="title function_">fromType</span>(<span class="string">&quot;Color&quot;</span>, &#123;</span><br><span class="line">        <span class="attr">color</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Color</span>(<span class="number">255</span> / <span class="number">255</span>, <span class="number">255</span> / <span class="number">255</span>, <span class="number">255</span> / <span class="number">255</span>, <span class="number">1</span>),</span><br><span class="line">      &#125;),</span><br><span class="line">    &#125;),</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">viewer</span>.<span class="property">scene</span>.<span class="property">primitives</span>.<span class="title function_">add</span>(<span class="variable language_">this</span>.<span class="property">primitive_polygonOutline</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleData</span>(<span class="params">data, height</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> arr = [];</span><br><span class="line">    data.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">      arr.<span class="title function_">push</span>(<span class="title class_">Number</span>(item.<span class="property">x</span>), <span class="title class_">Number</span>(item.<span class="property">y</span>));</span><br><span class="line">      <span class="keyword">if</span> (height) arr.<span class="title function_">push</span>(height);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="4-点击变色-1"><a href="#4-点击变色-1" class="headerlink" title="4.点击变色"></a>4.点击变色</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加点击事件</span></span><br><span class="line"><span class="title function_">addHandler</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> handler = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">ScreenSpaceEventHandler</span>(</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">viewer</span>.<span class="property">scene</span>.<span class="property">canvas</span></span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  handler.<span class="title function_">setInputAction</span>(<span class="function">(<span class="params">movement</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> pick = <span class="variable language_">this</span>.<span class="property">viewer</span>.<span class="property">scene</span>.<span class="title function_">pick</span>(movement.<span class="property">position</span>);</span><br><span class="line">    <span class="keyword">if</span> (!pick) <span class="keyword">return</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;pick:&quot;</span>, pick);</span><br><span class="line">    <span class="comment">// primitive</span></span><br><span class="line">    <span class="keyword">if</span> (pick.<span class="property">id</span>.<span class="property">name</span> == <span class="string">&quot;point&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> attributes = pick.<span class="property">primitive</span>.<span class="title function_">getGeometryInstanceAttributes</span>(</span><br><span class="line">        pick.<span class="property">id</span></span><br><span class="line">      );</span><br><span class="line">      attributes.<span class="property">color</span> = <span class="title class_">Cesium</span>.<span class="property">ColorGeometryInstanceAttribute</span>.<span class="title function_">toValue</span>(</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Color</span>(<span class="number">255</span> / <span class="number">255</span>, <span class="number">0</span> / <span class="number">255</span>, <span class="number">0</span> / <span class="number">255</span>, <span class="number">1</span>)</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (pick.<span class="property">id</span>.<span class="property">name</span> == <span class="string">&quot;line&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> attributes = pick.<span class="property">primitive</span>.<span class="title function_">getGeometryInstanceAttributes</span>(</span><br><span class="line">        pick.<span class="property">id</span></span><br><span class="line">      );</span><br><span class="line">      attributes.<span class="property">color</span> = <span class="title class_">Cesium</span>.<span class="property">ColorGeometryInstanceAttribute</span>.<span class="title function_">toValue</span>(</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Color</span>(<span class="number">255</span> / <span class="number">255</span>, <span class="number">0</span> / <span class="number">255</span>, <span class="number">0</span> / <span class="number">255</span>, <span class="number">1</span>)</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (pick.<span class="property">id</span>.<span class="property">name</span> == <span class="string">&quot;polygon&quot;</span>) &#123;</span><br><span class="line">      pick.<span class="property">primitive</span>.<span class="property">appearance</span>.<span class="property">material</span>.<span class="property">uniforms</span>.<span class="property">color</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Color</span>(</span><br><span class="line">        <span class="number">255</span> / <span class="number">255</span>,</span><br><span class="line">        <span class="number">0</span> / <span class="number">255</span>,</span><br><span class="line">        <span class="number">0</span> / <span class="number">255</span>,</span><br><span class="line">        <span class="number">1</span></span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="title class_">Cesium</span>.<span class="property">ScreenSpaceEventType</span>.<span class="property">LEFT_CLICK</span>);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h1 id="四、效果图"><a href="#四、效果图" class="headerlink" title="四、效果图"></a>四、效果图</h1><p><img src="https://raw.githubusercontent.com/752841728/hexo-picture/main/img/1.png" alt="add_point_line_polygon.png"></p><hr><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>因为 entity 是基于 primitive 封装的，所以 primitive 性能比 entity 好太多了，但是对于 cesium 和 webgl 的熟练度较高。数据量小的话，使用 entity 可以快速上手。数据量大的话，推荐使用 primitive 提高性能。<br><a href="https://blog.csdn.net/zy123698745/article/details/102813129?spm=1001.2014.3001.5506">Cesium（Geometry）：各种GeometryInstance的添加方法</a></p>]]></content>
      
      
      <categories>
          
          <category> GIS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cesium </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue集成Cesium</title>
      <link href="/2023/06/20/Vue%E9%9B%86%E6%88%90Cesium/"/>
      <url>/2023/06/20/Vue%E9%9B%86%E6%88%90Cesium/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>cesium是非常强大的地图工具，在vue集成cesium的过程中，或多或少会遇到问题，这里稍做整理</p><hr><h1 id="一、cesium使用示例"><a href="#一、cesium使用示例" class="headerlink" title="一、cesium使用示例"></a>一、cesium使用示例</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100vw; height: 100vh&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">Cesium</span> <span class="keyword">from</span> <span class="string">&quot;cesium&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="string">&quot;cesium/Build/Cesium/Widgets/widgets.css&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&quot;cesium&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">viewer</span>: <span class="literal">null</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">initMap</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title class_">Cesium</span>.<span class="property">Ion</span>.<span class="property">defaultAccessToken</span> =</span></span><br><span class="line"><span class="language-javascript">        <span class="string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2ZTgxOGNhZC03NThmLTQ0NzMtOTNlYS1kNmM3YzlmZDU3NTMiLCJpZCI6MTI1NTY3LCJpYXQiOjE2NzY5MDI0MzJ9.ulIEz3NCh2cMEBiHrqIuv9I6icn5KTMMnBdy2wassoM&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">viewer</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Viewer</span>(<span class="string">&quot;map&quot;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 配置项</span></span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">this</span>.<span class="title function_">initMap</span>();</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="二、vue-cli4集成cesium"><a href="#二、vue-cli4集成cesium" class="headerlink" title="二、vue-cli4集成cesium"></a>二、vue-cli4集成cesium</h1><h2 id="1-创建项目"><a href="#1-创建项目" class="headerlink" title="1.创建项目"></a>1.创建项目</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create vue<span class="literal">-cli-4-cesium</span></span><br></pre></td></tr></table></figure><h2 id="2-安装依赖"><a href="#2-安装依赖" class="headerlink" title="2.安装依赖"></a>2.安装依赖</h2><p>因为<a href="mailto:&#x63;&#x65;&#x73;&#105;&#x75;&#109;&#x40;&#49;&#46;&#x31;&#x30;&#x36;&#x2e;&#x31;">&#x63;&#x65;&#x73;&#105;&#x75;&#109;&#x40;&#49;&#46;&#x31;&#x30;&#x36;&#x2e;&#x31;</a>使用了ES11的语法，所以需要安装babel-loader</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install cesium <span class="literal">--save-dev</span></span><br><span class="line">npm install @<span class="built_in">open-wc</span>/webpack<span class="literal">-import-meta-loader</span> <span class="literal">-D</span></span><br><span class="line">npm install @babel/core @babel/p<span class="built_in">reset-env</span> babel<span class="literal">-loader</span> <span class="literal">--save-dev</span></span><br></pre></td></tr></table></figure><p>如果遇到babel-loader因为版本问题无法安装的话，可以尝试加上–legacy-peer-deps命令</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @babel/core @babel/p<span class="built_in">reset-env</span> babel<span class="literal">-loader</span> <span class="literal">--save-dev</span> <span class="literal">--legacy-peer-deps</span></span><br></pre></td></tr></table></figure><h2 id="3-配置vue-config-js"><a href="#3-配置vue-config-js" class="headerlink" title="3.配置vue.config.js"></a>3.配置vue.config.js</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&quot;webpack&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CopyWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;copy-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">resolve</span>(<span class="params">dir</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> path.<span class="title function_">join</span>(__dirname, dir);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">configureWebpack</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;vue-cesium&quot;</span>,</span><br><span class="line">    <span class="attr">resolve</span>: &#123;</span><br><span class="line">      <span class="attr">alias</span>: &#123;</span><br><span class="line">        <span class="string">&quot;@&quot;</span>: <span class="title function_">resolve</span>(<span class="string">&quot;src&quot;</span>),</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">CopyWebpackPlugin</span>([</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">from</span>: <span class="string">&quot;node_modules/cesium/Build/Cesium/Workers&quot;</span>,</span><br><span class="line">          <span class="attr">to</span>: <span class="string">&quot;cesium/Workers&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">from</span>: <span class="string">&quot;node_modules/cesium/Build/Cesium/ThirdParty&quot;</span>,</span><br><span class="line">          <span class="attr">to</span>: <span class="string">&quot;cesium/ThirdParty&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">from</span>: <span class="string">&quot;node_modules/cesium/Build/Cesium/Assets&quot;</span>,</span><br><span class="line">          <span class="attr">to</span>: <span class="string">&quot;cesium/Assets&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">from</span>: <span class="string">&quot;node_modules/cesium/Build/Cesium/Widgets&quot;</span>,</span><br><span class="line">          <span class="attr">to</span>: <span class="string">&quot;cesium/Widgets&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      ]),</span><br><span class="line">      <span class="keyword">new</span> webpack.<span class="title class_">DefinePlugin</span>(&#123;</span><br><span class="line">        <span class="attr">CESIUM_BASE_URL</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="string">&quot;./cesium&quot;</span>),</span><br><span class="line">      &#125;),</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">      <span class="attr">rules</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">test</span>: <span class="regexp">/.js$/</span>,</span><br><span class="line">          <span class="attr">include</span>: [<span class="title function_">resolve</span>(<span class="string">&quot;node_modules/cesium/Source&quot;</span>)],</span><br><span class="line">          <span class="attr">use</span>: &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="built_in">require</span>.<span class="title function_">resolve</span>(<span class="string">&quot;@open-wc/webpack-import-meta-loader&quot;</span>),</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">test</span>: <span class="regexp">/.js$/</span>,</span><br><span class="line">          <span class="attr">include</span>: [<span class="title function_">resolve</span>(<span class="string">&quot;node_modules/@cesium/engine/Source&quot;</span>)],</span><br><span class="line">          <span class="attr">use</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">unknownContextCritical</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="二、vue-cli5集成cesium"><a href="#二、vue-cli5集成cesium" class="headerlink" title="二、vue-cli5集成cesium"></a>二、vue-cli5集成cesium</h1><h2 id="1-创建项目-1"><a href="#1-创建项目-1" class="headerlink" title="1.创建项目"></a>1.创建项目</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create vue<span class="literal">-cli-5-cesium</span></span><br></pre></td></tr></table></figure><h2 id="2-安装依赖-1"><a href="#2-安装依赖-1" class="headerlink" title="2.安装依赖"></a>2.安装依赖</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install cesium <span class="literal">--save-dev</span></span><br><span class="line">npm install <span class="built_in">copy-webpack</span><span class="literal">-plugin</span> node<span class="literal">-polyfill-webpack-plugin</span> @<span class="built_in">open-wc</span>/webpack<span class="literal">-import-meta-loader</span> <span class="literal">-D</span></span><br></pre></td></tr></table></figure><h2 id="3-配置vue-config-js-1"><a href="#3-配置vue-config-js-1" class="headerlink" title="3.配置vue.config.js"></a>3.配置vue.config.js</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; defineConfig &#125; = <span class="built_in">require</span>(<span class="string">&quot;@vue/cli-service&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&quot;webpack&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CopyWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;copy-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">NodePolyfillPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;node-polyfill-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">resolve</span>(<span class="params">dir</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> path.<span class="title function_">join</span>(__dirname, dir);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">transpileDependencies</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">lintOnSave</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">configureWebpack</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;vue-cesium&quot;</span>,</span><br><span class="line">    <span class="attr">resolve</span>: &#123;</span><br><span class="line">      <span class="attr">alias</span>: &#123;</span><br><span class="line">        <span class="string">&quot;@&quot;</span>: <span class="title function_">resolve</span>(<span class="string">&quot;src&quot;</span>),</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">NodePolyfillPlugin</span>(),</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">CopyWebpackPlugin</span>(&#123;</span><br><span class="line">        <span class="attr">patterns</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">from</span>: <span class="string">&quot;node_modules/cesium/Build/Cesium/Workers&quot;</span>,</span><br><span class="line">            <span class="attr">to</span>: <span class="string">&quot;cesium/Workers&quot;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">from</span>: <span class="string">&quot;node_modules/cesium/Build/Cesium/ThirdParty&quot;</span>,</span><br><span class="line">            <span class="attr">to</span>: <span class="string">&quot;cesium/ThirdParty&quot;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">from</span>: <span class="string">&quot;node_modules/cesium/Build/Cesium/Assets&quot;</span>,</span><br><span class="line">            <span class="attr">to</span>: <span class="string">&quot;cesium/Assets&quot;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">from</span>: <span class="string">&quot;node_modules/cesium/Build/Cesium/Widgets&quot;</span>,</span><br><span class="line">            <span class="attr">to</span>: <span class="string">&quot;cesium/Widgets&quot;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="keyword">new</span> webpack.<span class="title class_">DefinePlugin</span>(&#123;</span><br><span class="line">        <span class="attr">CESIUM_BASE_URL</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="string">&quot;./cesium&quot;</span>),</span><br><span class="line">      &#125;),</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">      <span class="attr">rules</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">test</span>: <span class="regexp">/.js$/</span>,</span><br><span class="line">          <span class="attr">include</span>: <span class="regexp">/(cesium)/</span>,</span><br><span class="line">          <span class="attr">use</span>: &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&quot;@open-wc/webpack-import-meta-loader&quot;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="三、vite集成cesium"><a href="#三、vite集成cesium" class="headerlink" title="三、vite集成cesium"></a>三、vite集成cesium</h1><h2 id="1-创建项目-2"><a href="#1-创建项目-2" class="headerlink" title="1.创建项目"></a>1.创建项目</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm create vite@latest</span><br></pre></td></tr></table></figure><h2 id="2-安装依赖-2"><a href="#2-安装依赖-2" class="headerlink" title="2.安装依赖"></a>2.安装依赖</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install cesium <span class="literal">--save-dev</span></span><br><span class="line">npm install cesium vite<span class="literal">-plugin-cesium</span> vite <span class="literal">-D</span></span><br></pre></td></tr></table></figure><h2 id="3-配置vite-config-js"><a href="#3-配置vite-config-js" class="headerlink" title="3.配置vite.config.js"></a>3.配置vite.config.js</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&quot;vite&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&quot;@vitejs/plugin-vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> cesium <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-cesium&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">vue</span>(), <span class="title function_">cesium</span>()],</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><hr><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p><a href="https://gitee.com/funny_boy/vue-cesium">源码参考</a><br>因为vite使用了vite-plugin-cesium插件，所以vite集成cesium变得非常简单。其实vue-cli也有vue-cli-plugin-cesium插件，可惜已经很久没有维护，高版本的vue-cli已经无法使用。</p>]]></content>
      
      
      <categories>
          
          <category> GIS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cesium </tag>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>电脑配置清单</title>
      <link href="/2023/06/05/%E7%94%B5%E8%84%91%E9%85%8D%E7%BD%AE%E6%B8%85%E5%8D%95/"/>
      <url>/2023/06/05/%E7%94%B5%E8%84%91%E9%85%8D%E7%BD%AE%E6%B8%85%E5%8D%95/</url>
      
        <content type="html"><![CDATA[<h1 id="一、电脑配置"><a href="#一、电脑配置" class="headerlink" title="一、电脑配置"></a>一、电脑配置</h1><table><thead><tr><th>配置</th><th>名称</th><th>价格</th></tr></thead><tbody><tr><td>显卡</td><td>七彩虹（Colorful）战斧 GeForce RTX 3060 Ti DUO G6X 电竞光追游戏设计电脑显卡</td><td>2578.25</td></tr><tr><td>CPU</td><td>AMD 锐龙5 5500 处理器(r5)7nm 6核12线程 加速频率至高4.2Ghz 65W AM4接口 盒装CPU</td><td>548.98</td></tr><tr><td>主板</td><td>铭瑄 (MAXSUN) MS-挑战者B450M 主板支持5500&#x2F;5600G&#x2F;5700X(AMD B450&#x2F;Socket AM4)</td><td>359.00</td></tr><tr><td>固态硬盘</td><td>金士顿(Kingston) 1TB SSD固态硬盘 M.2接口(NVMe协议 PCIe 4.0×4)兼容PCIe3.0 NV2系列 读速高达3500MB&#x2F;s</td><td>259.00</td></tr><tr><td>内存条</td><td>金百达（KINGBANK）16GB(8GBX2)套装 DDR4 3200 台式机内存条银爵系列 C16</td><td>195.00</td></tr><tr><td>电源</td><td>爱国者（aigo）额定600W 黑暗骑士750DK 台式机电脑主机电源（主动式PFC&#x2F;宽幅温控&#x2F;长线材&#x2F;支持背线）</td><td>155.99</td></tr><tr><td>散热器</td><td>利民（Thermalright）AX120 R SE CPU风冷散热器AGHP逆重力热管支持LGA1700&#x2F;AM5 4热管S-FDB12CM风扇附带硅脂</td><td>60.27</td></tr><tr><td>机箱</td><td>爱国者（aigo）额定600W 黑暗骑士750DK 台式机电脑主机电源（主动式PFC&#x2F;宽幅温控&#x2F;长线材&#x2F;支持背线）</td><td>92.00</td></tr><tr><td>机箱风扇 × 4</td><td>利民（Thermalright）TL-C12CW 白色12cm入门级风压扇 经典磁稳S-FDB轴承 4PIN串接PWM接头 1550转速</td><td>79.41</td></tr><tr><td>显示器</td><td>HKC 27英寸2K显示器 三面微边 广视角 75Hz刷新率 低蓝光不闪屏 可壁挂 设计办公液晶台式电脑屏幕 T2752Q</td><td>669.00</td></tr><tr><td>合计</td><td></td><td>4996.90</td></tr></tbody></table><h1 id="二、电脑外设"><a href="#二、电脑外设" class="headerlink" title="二、电脑外设"></a>二、电脑外设</h1><table><thead><tr><th>外设</th><th>名称</th><th>价格</th></tr></thead><tbody><tr><td>鼠标</td><td>雷蛇(Razer)巴塞利斯蛇V3有线鼠标 人体工学 电竞游戏 右手通用型 RGB幻彩灯效 吃鸡&#x2F;LOL&#x2F;CS GO游戏鼠标 黑色</td><td>198.80</td></tr><tr><td>键盘</td><td>GANSS 3087T&#x2F;3104T机械键盘高斯三模无线键盘蓝牙2.4G有线热插拔客制化办公游戏键盘 3104T白色【RGB】三模版 全键热插拔 KTT风信子轴</td><td>239.00</td></tr><tr><td>音箱</td><td>飞利浦SPA311 音响笔记本台式电脑家用多媒体游戏线控音箱</td><td>98.99</td></tr><tr><td>耳机</td><td>ROG降临2标准版 入耳式游戏耳机3.5mm 游戏手机配件 电脑环绕7.1音效 内置麦克风 有线耳机 3.5mm</td><td>219.00</td></tr><tr><td>鼠标垫</td><td>CAPERE (铠雷)防水尼龙鼠标垫 硫化硅胶垫 顺滑坚韧耐磨竞技游戏垫 CORDURA 电脑滑鼠垫 防水垫【中号黑色2代】</td><td>19.00</td></tr><tr><td>耳机麦克风二合一转接线</td><td>绿联（UGREEN）耳机麦克风二合一转接线 电脑耳机转换线 3.5mm手机音频线一分二台式机耳机耳麦转接头20898</td><td>27.90</td></tr><tr><td>网线</td><td>山泽网线千兆家用超六6类路由器高速电脑宽带连接线万兆扁5五10米</td><td>7.74</td></tr><tr><td>合计</td><td></td><td>810.43</td></tr></tbody></table><h1 id="三、618消费"><a href="#三、618消费" class="headerlink" title="三、618消费"></a>三、618消费</h1><table><thead><tr><th>名称</th><th>价格</th></tr></thead><tbody><tr><td>配置</td><td>4996.90</td></tr><tr><td>外设</td><td>810.43</td></tr><tr><td>合计</td><td>5807.33</td></tr></tbody></table>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Git常用命令</title>
      <link href="/2023/05/25/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
      <url>/2023/05/25/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>假设：<br>项目分支是dev、master<br>项目地址是<a href="https://github.com/752841728/752841728.github.io.git">https://github.com/752841728/752841728.github.io.git</a></p><hr><h1 id="一、克隆项目"><a href="#一、克隆项目" class="headerlink" title="一、克隆项目"></a>一、克隆项目</h1><h2 id="1-无本地仓库，有远程仓库"><a href="#1-无本地仓库，有远程仓库" class="headerlink" title="1.无本地仓库，有远程仓库"></a>1.无本地仓库，有远程仓库</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/<span class="number">752841728</span>/<span class="number">752841728</span>.github.io.git</span><br></pre></td></tr></table></figure><h2 id="2-有本地仓库，有远程仓库"><a href="#2-有本地仓库，有远程仓库" class="headerlink" title="2.有本地仓库，有远程仓库"></a>2.有本地仓库，有远程仓库</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git remote <span class="built_in">rm</span> origin</span><br><span class="line">git remote add origin https://github.com/<span class="number">752841728</span>/<span class="number">752841728</span>.github.io.git</span><br></pre></td></tr></table></figure><h1 id="二、拉取提交"><a href="#二、拉取提交" class="headerlink" title="二、拉取提交"></a>二、拉取提交</h1><h2 id="1-拉取"><a href="#1-拉取" class="headerlink" title="1.拉取"></a>1.拉取</h2><p>本地dev拉取远程dev：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull origin dev</span><br></pre></td></tr></table></figure><h2 id="2-提交"><a href="#2-提交" class="headerlink" title="2.提交"></a>2.提交</h2><p>本地dev提交远程dev：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit <span class="literal">-m</span> <span class="string">&quot;fix: 修复BUG&quot;</span></span><br><span class="line">git push origin dev</span><br></pre></td></tr></table></figure><h2 id="3-关联分支"><a href="#3-关联分支" class="headerlink" title="3.关联分支"></a>3.关联分支</h2><p>本地dev关联远程dev：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch <span class="literal">--set-upstream-to</span>=origin/dev dev</span><br></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push <span class="literal">-u</span> origin dev // 通过提交本地dev关联远程dev</span><br></pre></td></tr></table></figure><p>关联分支后的命令可以简写：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git pull</span><br><span class="line">git push</span><br></pre></td></tr></table></figure><h1 id="三、分支"><a href="#三、分支" class="headerlink" title="三、分支"></a>三、分支</h1><p>查看本地已有分支：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch</span><br></pre></td></tr></table></figure><p>创建本地master分支：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch master</span><br></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout <span class="literal">-b</span> master // 创建新分支并切换到新分支</span><br></pre></td></tr></table></figure><p>修改本地当前分支名称：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch <span class="literal">-M</span> main</span><br></pre></td></tr></table></figure><p>删除本地master分支：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch <span class="literal">-D</span> master</span><br></pre></td></tr></table></figure><p>本地dev合并本地master：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git checkout master // 切换到本地master分支</span><br><span class="line">git merge <span class="literal">--no-ff</span> dev // 将本地dev分支合并到本地master分支</span><br><span class="line">git cherry<span class="literal">-pick</span> commit1ID commit2ID // 只合并本地dev分支commit1和commit2的提交到本地master分支</span><br></pre></td></tr></table></figure><h1 id="三、回滚"><a href="#三、回滚" class="headerlink" title="三、回滚"></a>三、回滚</h1><h2 id="1-撤销某个提交并生成新的提交"><a href="#1-撤销某个提交并生成新的提交" class="headerlink" title="1.撤销某个提交并生成新的提交"></a>1.撤销某个提交并生成新的提交</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git revert <span class="literal">-n</span> commitID // commit的提交后面的提交记录会保留</span><br><span class="line">git commit <span class="literal">-m</span> <span class="string">&quot;feat: 撤销commitID的提交&quot;</span></span><br><span class="line">git pull</span><br><span class="line">git push</span><br></pre></td></tr></table></figure><h2 id="2-回滚到某个提交"><a href="#2-回滚到某个提交" class="headerlink" title="2.回滚到某个提交"></a>2.回滚到某个提交</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git reset <span class="literal">--hard</span> commitID // commit的提交后面的提交记录不会保留</span><br><span class="line">git push <span class="operator">-f</span> // 本地仓库与远程仓库不一致，需要强制提交</span><br></pre></td></tr></table></figure><h2 id="3-撤回本地commit"><a href="#3-撤回本地commit" class="headerlink" title="3.撤回本地commit"></a>3.撤回本地commit</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset <span class="literal">--soft</span> HEAD^</span><br></pre></td></tr></table></figure><hr><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>遵守Git的流程和规范，养成代码好习惯</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
