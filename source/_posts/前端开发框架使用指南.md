title: å‰ç«¯å¼€å‘æ¡†æ¶ä½¿ç”¨æŒ‡å—
author: Funny Boy
date: 2025-02-05 15:27:17
tags: ["Vue"]
categories: ["å‰ç«¯"]

---

# ç¬¬ä¸€éƒ¨åˆ†:æ¡†æ¶ä»£ç è·å–
## ä»‹ç»
### ç®€ä»‹
[Ebs Vue3 Template](https://gitee.com/funny_boy/ebs_vue3_template) ä¸€æ¬¾åŸºäº Vue3.3ã€TypeScriptã€Vite5ã€Piniaã€Element-Plusçš„å‰ç«¯æ¨¡æ¿æ¡†æ¶ï¼Œä½¿ç”¨ç›®å‰æœ€æ–°æŠ€æœ¯æ ˆå¼€å‘ã€‚é¡¹ç›®æä¾›äº†ç™»å½•é¡µé¢ï¼Œé”™è¯¯é¡µé¢ï¼Œå·¦å³å¸ƒå±€ç»„ä»¶ï¼Œé€‰äººç»„ä»¶ç­‰åœ¨ä¸€å®šç¨‹åº¦ä¸ŠèŠ‚çœæ‚¨çš„å¼€å‘æ•ˆç‡ã€‚å¦å¤–æœ¬é¡¹ç›®è¿˜å°è£…äº†ä¸€äº›å¸¸ç”¨ç»„ä»¶ã€hooksã€æŒ‡ä»¤ã€åŠ¨æ€è·¯ç”±ã€æŒ‰é’®çº§åˆ«æƒé™æ§åˆ¶ç­‰åŠŸèƒ½ã€‚

### éœ€è¦æŒæ¡çš„åŸºç¡€çŸ¥è¯†
+ æœ¬é¡¹ç›®åŸºäº Vue3.3ã€Vite5ã€TSã€Piniaã€Element-Plusï¼ŒVxe Table å¼€å‘ï¼Œå¹¶å…¨éƒ¨é‡‡ç”¨äº†çš„å•æ–‡ä»¶ç»„ä»¶ `ï¼œscript setupï¼` å†™æ³•ã€‚
+ å»ºè®®æ‚¨åœ¨å¼€å‘å‰å…ˆå­¦ä¹ ä»¥ä¸‹å†…å®¹ï¼Œæå‰äº†è§£å’Œå­¦ä¹ è¿™äº›çŸ¥è¯†ï¼Œä¼šå¯¹é¡¹ç›®ç†è§£éå¸¸æœ‰å¸®åŠ©ï¼š
    - [Vue3 æ–‡æ¡£](https://cn.vuejs.org/guide/introduction.html)
    - [Vue-Router æ–‡æ¡£](https://router.vuejs.org/zh/guide/)
    - [Vite æ–‡æ¡£](https://cn.vitejs.dev/guide/)
    - [TypeScript æ–‡æ¡£](https://www.typescriptlang.org/zh/docs/)
    - [Pinia æ–‡æ¡£](https://pinia.web3doc.top/introduction.html)
    - [Element-Plus æ–‡æ¡£](https://element-plus.org/zh-CN/component/button.html)
    - [Vxe Table æ–‡æ¡£](https://vxetable.cn/v4/#/component/table/base/basic)
    - [koron-uiæ–‡æ¡£](http://10.11.228.190:8889/)
    - [ES6 æ•™ç¨‹](https://es6.ruanyifeng.com/)
    - [tailwindcssæ–‡æ¡£](https://www.tailwindcss.cn/docs/installation)

### å…³äºç‰ˆæœ¬æ›´æ–°
+ æœ¬é¡¹ç›®åæœŸå°†ä¼šç»å†ä¸æ–­çš„æ›´æ–°è¿­ä»£ï¼ŒåæœŸå°½é‡ä¸è¿›è¡Œç ´åæ€§æ›´æ–°ã€‚å¯¹äºå¤§å¤šæ•°å‰ç«¯é¡¹ç›®æ¡†æ¶ï¼Œå®ƒä»¬æ— æ³•åƒ npm åŒ…é‚£æ ·å¹³æ»‘çš„å‡çº§ç‰ˆæœ¬ï¼Œå› æ­¤æˆ‘ä»¬ä¸ºæ­¤ç»™å‡ºä¸€äº›å‡çº§çš„å»ºè®®ã€‚
+ åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œåº”å°½é‡é¿å…ä¿®æ”¹æ ¸å¿ƒéƒ¨åˆ†ã€‚å¦‚æœä¸šåŠ¡éœ€è¦å¯¹æ¡†æ¶æ ¸å¿ƒå†…å®¹è¿›è¡Œä¿®æ”¹ï¼Œè¯·è®°å½•ä¸‹ä¿®æ”¹å†…å®¹ï¼Œä»¥å…åœ¨ä¹‹åçš„å‡çº§è¿‡ç¨‹ä¸­è¢«è¦†ç›–æ‰ã€‚

### æµè§ˆå™¨æ”¯æŒ
+ æœ¬åœ°å¼€å‘æ¨èä½¿ç”¨ Chrome æœ€æ–°ç‰ˆæµè§ˆå™¨ [Download](https://www.google.com/intl/zh-CN/chrome/)ã€‚
+ ç”Ÿäº§ç¯å¢ƒæ”¯æŒç°ä»£æµè§ˆå™¨ï¼Œä¸åœ¨æ”¯æŒ IE æµè§ˆå™¨ï¼Œæ›´å¤šæµè§ˆå™¨å¯ä»¥æŸ¥çœ‹ [Can I Use Es Module](https://caniuse.com/?search=ESModule)ã€‚

| ![](https://raw.githubusercontent.com/alrra/browser-logos/master/src/archive/internet-explorer_9-11/internet-explorer_9-11_48x48.png)IE | ![](https://raw.githubusercontent.com/alrra/browser-logos/master/src/edge/edge_48x48.png)Edge | ![](https://raw.githubusercontent.com/alrra/browser-logos/master/src/firefox/firefox_48x48.png)Firefox | ![](https://raw.githubusercontent.com/alrra/browser-logos/master/src/chrome/chrome_48x48.png)Chrome | ![](https://raw.githubusercontent.com/alrra/browser-logos/master/src/safari/safari_48x48.png)Safari |
| :---: | :---: | :---: | :---: | :---: |
| not support | last 2 versions | last 2 versions | last 2 versions | last 2 versions |


## å¿«é€Ÿä¸Šæ‰‹ï¼ˆé‡ç‚¹ï¼‰
æœ¬ç« èŠ‚ä¼šå¸®åŠ©ä½ ä»å¤´å¯åŠ¨ã€æ­å»ºæ­¤é¡¹ç›®

### ç¯å¢ƒå‡†å¤‡
æœ¬åœ°ç¯å¢ƒéœ€è¦å®‰è£… [Node.js 20.x+](https://nodejs.org/en/)ã€[Git](https://git-scm.com/)

:::warning
Node.js ç‰ˆæœ¬æ¨èå®‰è£… **20+** ä»¥ä¸Šï¼Œç‰ˆæœ¬è¿‡ä½ä¾èµ–åŒ…å¯èƒ½å®‰è£…å¤±è´¥ã€‚

é»˜è®¤ä½¿ç”¨ npm ä½œä¸ºå®‰è£…ä¾èµ–åŒ…å·¥å…·ï¼Œä½¿ç”¨ yarnã€npm æ²¡æœ‰ lock å¯èƒ½ä¼šå®‰è£…åˆ°æœ€æ–°ç‰ˆä¾èµ–ã€‚

:::

### å·¥å…·é…ç½®
æœ¬é¡¹ç›®æ¨èä½¿ç”¨ VSCode è¿›è¡Œå¼€å‘ï¼Œé¡¹ç›®é‡Œé¢å·²å†…ç½® VSCode é…ç½®ï¼ŒåŒ…å«æ¨èçš„æ’ä»¶å’Œè®¾ç½®ã€‚

> ğŸŒˆ æ¨èå®‰è£…ä»¥ä¸‹æ’ä»¶ï¼š
>

+ [Vue Language Features (Volar)](https://marketplace.visualstudio.com/items?itemName=Vue.volar) ==> Vue3 å®˜æ–¹æ’ä»¶
+ [TypeScript Vue Plugin (Volar)](https://marketplace.visualstudio.com/items?itemName=Vue.vscode-typescript-vue-plugin) ==> Vue3 å®˜æ–¹æ’ä»¶ï¼ˆTypeScriptï¼‰
+ [Vue 3 Snippets](https://marketplace.visualstudio.com/items?itemName=hollowtree.vue-snippets) ==> Vue3 ä»£ç æç¤º
+ [ESLint](https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint) ==> ä»£ç æ£€æŸ¥
+ [Stylelint](https://marketplace.visualstudio.com/items?itemName=stylelint.vscode-stylelint) ==> CSS ä»£ç æ£€æŸ¥ && æ ¼å¼åŒ–
+ [Prettier - Code formatter](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode) ==> ä»£ç æ ¼å¼åŒ–
+ [EditorConfig for VS Code](https://marketplace.visualstudio.com/items?itemName=EditorConfig.EditorConfig) ==> ç»Ÿä¸€ä¸åŒç¼–è¾‘å™¨çš„ç¼–ç é£æ ¼
+ [Sass](https://marketplace.visualstudio.com/items?itemName=Syler.sass-indented) ==> Sass æ ·å¼ç¼–å†™
+ [DotENV](https://marketplace.visualstudio.com/items?itemName=mikestead.dotenv) ==> é«˜äº® .env æ–‡ä»¶
+ [Git Graph](https://marketplace.visualstudio.com/items?itemName=mhutchie.git-graph) ==> <font style="color:rgb(51, 51, 51);">æä¾›ä¸€ä¸ªç›´è§‚ã€é«˜æ•ˆçš„Gitä»“åº“å›¾å½¢åŒ–è§†å›¾</font>
+ [i18n Ally](https://marketplace.visualstudio.com/items?itemName=Lokalise.i18n-ally)==> <font style="color:rgb(51, 51, 51);">åœ¨å›½é™…åŒ–é¡¹ç›®ä¸­ï¼Œi18n Allyå¯ä»¥å¸®åŠ©å¼€å‘è€…åœ¨ç¼–è¾‘å™¨ä¸­æ ¹æ®é¡¹ç›®ä¸­çš„æ–‡ä»¶æ¥ç¿»è¯‘å­—æ®µï¼Œè§£å†³ä¸­è‹±æ–‡ç¿»è¯‘å¯¹ç…§é€ æˆçš„ä¸ä¾¿â€Œ</font>

#### .vscode > extensions.json
```json
{
  "recommendations": ["Vue.volar", "dbaeumer.vscode-eslint", "esbenp.prettier-vscode"]
}
```

#### .vscode > settings.json
```json
{
  "editor.codeActionsOnSave": {
    "source.fixAll": "explicit"
  },
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "i18n-ally.localesPaths": ["src/languages/modules"],
  "i18n-ally.enabledParsers": ["ts"],
  "i18n-ally.displayLanguage": "zh-hans",
  "i18n-ally.keystyle": "nested"
}
```

:::warning
+ å¼€å‘ Vue3 é¡¹ç›®è¯·å¼€å¯ Volar æ’ä»¶ã€ç¦ç”¨ Vetur æ’ä»¶ã€‚
+ è¯·é…ç½®é¡¹ç›®é»˜è®¤æ ¼å¼åŒ–ç¨‹åºä¸º Prettierã€‚

:::

### ä»£ç æ‹‰å–
#### ä» GitLab æ‹‰å–ä»£ç ï¼š
```bash

git clone http://10.11.3.132:8082/platform/ebs_vue3_template.git
```

### å®‰è£…ä½¿ç”¨æ­¥éª¤
#### å®‰è£…ä¾èµ–ï¼š
```bash
# ä½¿ç”¨ npm
npm install
```

#### è¿è¡Œé¡¹ç›®ï¼š
```bash
# è¿è¡Œé¡¹ç›®
npm dev
```

#### æ‰“åŒ…é¡¹ç›®ï¼š
```bash
# ç”Ÿäº§ç¯å¢ƒ
npm run build
```

#### æ ¡éªŒã€æ ¼å¼åŒ–ä»£ç ï¼š
```bash
# eslint æ£€æµ‹ä»£ç 
npm run lint:script

# prettier æ ¼å¼åŒ–ä»£ç 
npm run format

# stylelint æ ¼å¼åŒ–æ ·å¼
npm run lint:style
```

#### æäº¤ä»£ç ï¼š
```bash
# æäº¤ä»£ç ï¼ˆæäº¤å‰ä¼šè‡ªåŠ¨æ‰§è¡Œ lint:lint-staged å‘½ä»¤ï¼‰
npm run commit
```

### npm script è¯¦è§£
```json
{
  "scripts": {
    // æœ¬åœ°è¿è¡Œ(devç¯å¢ƒ)
    "dev": "vite",
    // æ„å»ºæ‰“åŒ…(proç¯å¢ƒ)
    "build": "vue-tsc && vite build --mode production",
    // é¢„è§ˆ
    "preview": "vite preview",
    // æ£€æŸ¥é¡¹ç›® ts ç±»å‹
    "type:check": "vue-tsc --noEmit --skipLibCheck",
    // æ‰§è¡Œ eslint æ ¡éªŒ
    "lint:script": "eslint . --ext .vue,.js,.jsx,.cjs,.mjs,.ts,.tsx,.cts,.mts --fix --ignore-path .gitignore",
    // æ‰§è¡Œ prettier æ ¼å¼åŒ–
    "format": "prettier --write src/",
    // æ‰§è¡Œ stylelint æ ¼å¼åŒ–
    "lint:style": "stylelint src/**/*.{html,vue,css,less,scss,sass} --fix",
    // æ‰§è¡Œ lint-staged.config.js æ–‡ä»¶ä¸‹çš„å‘½ä»¤
    "lint:lint-staged": "lint-staged",
    // åˆå§‹åŒ– husky é…ç½®
    "prepare": "husky install",
    // æäº¤ä»£ç (å¯è‡ªå®šä¹‰é…ç½®æ‰§è¡Œå‘½ä»¤)
    "commit": "git pull && git add -A && git-cz && git push"
  }
}
```

## ç›®å½•ç»“æ„
### EbsVue3Templateç›®å½•è¯´æ˜ ğŸ“š
```plain
ebs_vue3_template
â”œâ”€ .husky                 # husky é…ç½®æ–‡ä»¶
â”œâ”€ .vscode                # VSCode æ¨èé…ç½®
â”œâ”€ public                 # é™æ€èµ„æºæ–‡ä»¶ï¼ˆè¯¥æ–‡ä»¶å¤¹ä¸ä¼šè¢«æ‰“åŒ…ï¼‰
â”œâ”€ src
â”‚  â”œâ”€ api                 # API æ¥å£ç®¡ç†
â”‚  â”œâ”€ assets              # é™æ€èµ„æºæ–‡ä»¶
â”‚  â”œâ”€ components          # å…¨å±€ç»„ä»¶
â”‚  â”œâ”€ config              # å…¨å±€é…ç½®é¡¹
â”‚  â”œâ”€ directives          # å…¨å±€æŒ‡ä»¤æ–‡ä»¶
â”‚  â”œâ”€ hooks               # å¸¸ç”¨ Hooks å°è£…
â”‚  â”œâ”€ languages           # è¯­è¨€å›½é™…åŒ– i18n
â”‚  â”œâ”€ layouts             # æ¡†æ¶å¸ƒå±€æ¨¡å—
â”‚  â”œâ”€ routers             # è·¯ç”±ç®¡ç†
â”‚  â”œâ”€ stores              # pinia store
â”‚  â”œâ”€ styles              # å…¨å±€æ ·å¼æ–‡ä»¶
â”‚  â”œâ”€ typings             # å…¨å±€ ts å£°æ˜
â”‚  â”œâ”€ utils               # å¸¸ç”¨å·¥å…·åº“
â”‚  â”œâ”€ views               # é¡¹ç›®æ‰€æœ‰é¡µé¢
â”‚  â”œâ”€ App.vue             # é¡¹ç›®ä¸»ç»„ä»¶
â”‚  â””â”€ main.ts             # é¡¹ç›®å…¥å£æ–‡ä»¶
â”œâ”€ .commitlintrc.cjs      # git æäº¤è§„èŒƒé…ç½®
â”œâ”€ .editorconfig          # ç»Ÿä¸€ä¸åŒç¼–è¾‘å™¨çš„ç¼–ç é£æ ¼
â”œâ”€ .env                   # vite å¸¸ç”¨é…ç½®
â”œâ”€ .env.development       # å¼€å‘ç¯å¢ƒé…ç½®
â”œâ”€ .env.production        # ç”Ÿäº§ç¯å¢ƒé…ç½®
â”œâ”€ .env.test              # æµ‹è¯•ç¯å¢ƒé…ç½®
â”œâ”€ .eslintignore          # å¿½ç•¥ Eslint æ ¡éªŒ
â”œâ”€ .eslintrc.cjs          # Eslint æ ¡éªŒé…ç½®æ–‡ä»¶
â”œâ”€ .gitignore             # å¿½ç•¥ git æäº¤
â”œâ”€ .prettierignore        # å¿½ç•¥ Prettier æ ¼å¼åŒ–
â”œâ”€ .prettierrc.cjs        # Prettier æ ¼å¼åŒ–é…ç½®
â”œâ”€ .stylelintignore       # å¿½ç•¥ stylelint æ ¼å¼åŒ–
â”œâ”€ .stylelintrc.cjs       # stylelint æ ·å¼æ ¼å¼åŒ–é…ç½®
â”œâ”€ Dockerfile                                  
â”œâ”€ env.d.ts								# æŒ‡å®š ts è¯†åˆ« vue
â”œâ”€ index.html             # å…¥å£ html
â”œâ”€ lint-staged.config.cjs # lint-staged é…ç½®æ–‡ä»¶
â”œâ”€ package-lock.json      # ä¾èµ–åŒ…åŒ…ç‰ˆæœ¬é”
â”œâ”€ package.json           # ä¾èµ–åŒ…ç®¡ç†
â”œâ”€ postcss.config.js      # postcss é…ç½®
â”œâ”€ README.md              # README ä»‹ç»
â”œâ”€ tailwind.config.js     # tailwind é…ç½®                     
â”œâ”€ tsconfig.app.json                          
â”œâ”€ tsconfig.json          # typescript å…¨å±€é…ç½®                     
â”œâ”€ tsconfig.node.json     
â””â”€ vite.config.ts         # vite å…¨å±€é…ç½®æ–‡ä»¶                   
```



### srcç›®å½•è¯´æ˜
```plain
src                                  æºç ç›®å½•                                    
â”œâ”€ api                               æ‰€æœ‰apiæ¥å£                                 
â”‚  â”œâ”€ config                         è¯·æ±‚é…ç½®ä¿¡æ¯   
â”‚  â”‚  â”œâ”€ http-enum.ts                è¯·æ±‚ç›¸å…³çš„æšä¸¾ç±»å‹ 
â”‚  â”‚  â””â”€ service-port.ts             åç«¯å¾®æœåŠ¡æ¨¡å—å‰ç¼€  
â”‚  â”œâ”€ helper                         è¯·æ±‚è¾…åŠ©å·¥å…·  
â”‚  â”‚  â”œâ”€ axios-cancel.ts             æ‹¦æˆªé‡å¤è¯·æ±‚ 
â”‚  â”‚  â”œâ”€ check-status.ts             å¯¹å„ä¸ªhttpé”™è¯¯ç åšçš„ç›¸å…³çš„åé¦ˆ  
â”‚  â”‚  â””â”€ service-loading.ts          å…¨å±€è¯·æ±‚loadingé…ç½®
â”‚  â”œâ”€ interface                        
â”‚  â”‚  â””â”€ index.ts                      
â”‚  â”œâ”€ modules                        å„ä¸ªæ¨¡å—è¯·æ±‚æ¥å£  
â”‚  â”‚  â””â”€ common                      å…¬å…±è¯·æ±‚æ¥å£  
â”‚  â”‚     â”œâ”€ application.ts           åº”ç”¨åˆ—è¡¨  
â”‚  â”‚     â”œâ”€ dict.ts                  æ•°æ®å­—å…¸  
â”‚  â”‚     â”œâ”€ language-item.ts         è¯­è¨€è¯æ¡  
â”‚  â”‚     â”œâ”€ language.ts              è¯­è¨€åˆ—è¡¨  
â”‚  â”‚     â”œâ”€ login.ts                 ç™»å½•  
â”‚  â”‚     â”œâ”€ message-list.ts          æ¶ˆæ¯åˆ—è¡¨  
â”‚  â”‚     â””â”€ user.ts                  ç”¨æˆ·  
â”‚  â””â”€ index.ts                       è¯·æ±‚å°è£…ï¼šè¯·æ±‚æ‹¦æˆªï¼Œå“åº”æ‹¦æˆª  
â”œâ”€ assets                            é™æ€èµ„æºï¼Œimages, icons,
â”‚  â”œâ”€ iconfonts                         
â”‚  â”‚  â”œâ”€ common                      åŸºç¡€å›¾æ ‡            
â”‚  â”‚  â””â”€ menu                        èœå•å›¾æ ‡            
â”‚  â”œâ”€ images 
â”‚  â””â”€ json                           é™æ€æ¨¡æ‹Ÿæ•°æ®
â”‚     â””â”€ auth-info.json              æœ¬åœ°æƒé™èœå•æ•°æ®
â”œâ”€ components                        å…¬å…±ç»„ä»¶   
â”‚  â”œâ”€ Error                          é”™è¯¯é¡µé¢ç»„ä»¶   
â”‚  â”‚  â””â”€ index.vue                     
â”‚  â”œâ”€ IncludeChildren                åŒ…å«ä¸‹çº§ç»„ä»¶   
â”‚  â”‚  â””â”€ index.vue                     
â”‚  â”œâ”€ Slider                         æ»‘åŠ¨å›¾ç‰‡éªŒè¯ç»„ä»¶    
â”‚  â”‚  â”œâ”€ utils                         
â”‚  â”‚  â”‚  â”œâ”€ ase.js                     
â”‚  â”‚  â”‚  â””â”€ util.js                    
â”‚  â”‚  â””â”€ index.vue                     
â”‚  â”œâ”€ TwoColPage                     å·¦å³å¸ƒå±€ç»„ä»¶     
â”‚  â”‚  â””â”€ index.vue                     
â”‚  â”œâ”€ UserSelect                     é€‰äººç»„ä»¶      
â”‚  â”‚  â””â”€ index.vue                     
â”‚  â””â”€ index.ts                         
â”œâ”€ config                            å…¨å±€é…ç½®   
â”‚  â”œâ”€ index.ts                         
â”‚  â””â”€ nprogress.ts                     
â”œâ”€ directives                       å…¨å±€æŒ‡ä»¤   
â”‚  â”œâ”€ modules                          
â”‚  â”‚  â””â”€ auth.ts                       
â”‚  â””â”€ index.ts                         
â”œâ”€ hooks                           å…¨å±€hook    
â”‚  â”œâ”€ interface                        
â”‚  â”‚  â””â”€ index.ts                      
â”‚  â”œâ”€ useMessage.ts                å„ç§æ¶ˆæ¯æç¤ºhook    
â”‚  â”œâ”€ useNProgress.ts              é¡µé¢åŠ è½½è¿›åº¦æ¡    
â”‚  â”œâ”€ usePageLoading.ts            é¡µé¢loading    
â”‚  â”œâ”€ useTheme.ts                  ä¸»é¢˜è®¾ç½®    
â”‚  â””â”€ useTitle.ts                  ç³»ç»Ÿæ ‡é¢˜    
â”œâ”€ languages                       å¤šè¯­è¨€é…ç½®    
â”‚  â”œâ”€ modules                      è¯­è¨€åŒ…    
â”‚  â”‚  â”œâ”€ en-us.ts                  è‹±æ–‡    
â”‚  â”‚  â”œâ”€ zh-hans.ts                ç®€ä½“ä¸­æ–‡    
â”‚  â”‚  â””â”€ zh-hant.ts                ç¹ä½“ä¸­æ–‡    
â”‚  â””â”€ index.ts                         
â”œâ”€ layouts                         å¸ƒå±€    
â”‚  â”œâ”€ components                   å¸ƒå±€ç›¸å…³çš„ç»„ä»¶    
â”‚  â”‚  â”œâ”€ Footer                    é¡µè„š    
â”‚  â”‚  â”‚  â”œâ”€ index.scss                 
â”‚  â”‚  â”‚  â””â”€ index.vue                  
â”‚  â”‚  â”œâ”€ Header                    å¤´éƒ¨å¯¼èˆª    
â”‚  â”‚  â”‚  â”œâ”€ components                 
â”‚  â”‚  â”‚  â”‚  â”œâ”€ AssemblySize.vue    ç³»ç»Ÿå°ºå¯¸è®¾ç½®    
â”‚  â”‚  â”‚  â”‚  â”œâ”€ CollapseIcon.vue    å·¦ä¾§å¯¼èˆªç¼©æ”¾   
â”‚  â”‚  â”‚  â”‚  â”œâ”€ Fullscreen.vue      ç³»ç»Ÿå…¨å±åˆ‡æ¢   
â”‚  â”‚  â”‚  â”‚  â”œâ”€ Language.vue        ç³»ç»Ÿè¯­è¨€è®¾ç½®    
â”‚  â”‚  â”‚  â”‚  â”œâ”€ Message.vue         å¯¼èˆªé¡¶éƒ¨æ¶ˆæ¯æç¤º    
â”‚  â”‚  â”‚  â”‚  â”œâ”€ PasswordDialog.vue  ä¿®æ”¹å¯†ç     
â”‚  â”‚  â”‚  â”‚  â”œâ”€ Setting.vue         è®¾ç½®å¼¹çª—    
â”‚  â”‚  â”‚  â”‚  â””â”€ Title.vue           ç³»ç»Ÿæ ‡é¢˜    
â”‚  â”‚  â”‚  â””â”€ ToolBarRight.vue           
â”‚  â”‚  â”œâ”€ InnerLink                  å†…åµŒå¤–é“¾   
â”‚  â”‚  â”‚  â””â”€ index.vue                  
â”‚  â”‚  â”œâ”€ Main                       é¡µé¢ä¸»è¦éƒ¨åˆ†   
â”‚  â”‚  â”‚  â”œâ”€ components                 
â”‚  â”‚  â”‚  â”‚  â””â”€ Maximize.vue            
â”‚  â”‚  â”‚  â”œâ”€ index.scss                 
â”‚  â”‚  â”‚  â””â”€ index.vue                  
â”‚  â”‚  â”œâ”€ Menu                       èœå•  
â”‚  â”‚  â”‚  â””â”€ SubMenu.vue                
â”‚  â”‚  â”œâ”€ NotificationContainer         
â”‚  â”‚  â”‚  â””â”€ index.vue                  
â”‚  â”‚  â””â”€ Tabs                      é¡µç­¾ç»„ä»¶    
â”‚  â”‚     â”œâ”€ components                 
â”‚  â”‚     â”‚  â””â”€ MoreButton.vue          
â”‚  â”‚     â”œâ”€ index.scss                 
â”‚  â”‚     â””â”€ index.vue                  
â”‚  â”œâ”€ LayoutClassic                    
â”‚  â”‚  â””â”€ index.vue                     
â”‚  â””â”€ index.vue                        
â”œâ”€ router                          è·¯ç”±ï¼Œç»Ÿä¸€ç®¡ç†    
â”‚  â”œâ”€ modules                          
â”‚  â”‚  â”œâ”€ dynamic-router.ts         åŠ¨æ€è·¯ç”±    
â”‚  â”‚  â””â”€ static-router.ts          é™æ€è·¯ç”±    
â”‚  â””â”€ index.ts                     è·¯ç”±æ‹¦æˆªï¼Œç™»å½•æ ¡éªŒï¼Œèœå•æƒé™æ ¡éªŒ    
â”œâ”€ stores                          å…¨å±€çŠ¶æ€ç®¡ç†    
â”‚  â”œâ”€ helper                       è¾…åŠ©å‡½æ•°    
â”‚  â”‚  â””â”€ persist.ts                æŒä¹…ç¼“å­˜å°è£…    
â”‚  â”œâ”€ interface                    å„ä¸ªçŠ¶æ€çš„tsç±»å‹    
â”‚  â”‚  â””â”€ index.ts                      
â”‚  â”œâ”€ modules                          
â”‚  â”‚  â”œâ”€ applications.ts           åº”ç”¨åˆ—è¡¨    
â”‚  â”‚  â”œâ”€ auth.ts                   åº”ç”¨code,æƒé™èœå•ï¼Œæƒé™æŒ‰é’®    
â”‚  â”‚  â”œâ”€ global.ts                 å…¨å±€ç³»ç»Ÿé…ç½®ï¼šè¯­è¨€ï¼Œä¸»é¢˜ï¼Œå¤§å°ç­‰    
â”‚  â”‚  â”œâ”€ keep-alive.ts             éœ€è¦ç¼“å­˜çš„é¡µé¢    
â”‚  â”‚  â”œâ”€ language.ts               å½“å‰åº”ç”¨çš„è¯­è¨€åˆ—è¡¨å’Œè¯­è¨€åŒ…    
â”‚  â”‚  â”œâ”€ tabs.ts                   é¡µç­¾    
â”‚  â”‚  â”œâ”€ user.ts                   ç”¨æˆ·    
â”‚  â”‚  â””â”€ websocketStore.ts         æ¶ˆæ¯æ¨é€    
â”‚  â””â”€ index.ts                         
â”œâ”€ styles                          å…¨å±€æ ·å¼    
â”‚  â”œâ”€ koron                        koron-uiç»„ä»¶åº“æ ·å¼è¦†ç›–    
â”‚  â”‚  â””â”€ var.scss                      
â”‚  â”œâ”€ tailwind                     tailwind æ¡†æ¶æ ·å¼å¼•ç”¨    
â”‚  â”‚  â”œâ”€ base.scss                     
â”‚  â”‚  â”œâ”€ components.scss               
â”‚  â”‚  â””â”€ utilities.scss                
â”‚  â”œâ”€ theme                        ç³»ç»Ÿä¸»é¢˜ç›¸å…³æ ·å¼å˜é‡çš„è®¾ç½®    
â”‚  â”‚  â”œâ”€ aside.ts                      
â”‚  â”‚  â”œâ”€ header.ts                     
â”‚  â”‚  â”œâ”€ menu.ts                       
â”‚  â”‚  â””â”€ primary-type.ts               
â”‚  â”œâ”€ common.scss                  å…¨å±€æ ·å¼    
â”‚  â””â”€ index.scss                       
â”œâ”€ typings                         å…¨å±€tsç±»å‹å£°æ˜    
â”‚  â”œâ”€ global.d.ts                      
â”‚  â”œâ”€ router.d.ts                      
â”‚  â”œâ”€ utils.d.ts                       
â”‚  â””â”€ window.d.ts                      
â”œâ”€ utils                           å·¥å…·å‡½æ•°    
â”‚  â”œâ”€ is                           å„æ•°æ®ç±»å‹çš„åˆ¤æ–­    
â”‚  â”‚  â””â”€ index.ts                      
â”‚  â”œâ”€ color.ts                     é¢œè‰²æ··åˆç­‰ç›¸å…³å‡½æ•°    
â”‚  â”œâ”€ dictionary.ts                æ•°æ®å­—å…¸    
â”‚  â”œâ”€ index.ts                         
â”‚  â”œâ”€ key-map.ts                       
â”‚  â”œâ”€ router-helper.ts            æ ¹æ®åŸå§‹æ•°æ®è¿›è¡Œè·¯ç”±ç”Ÿæˆç­‰ç›¸å…³å‡½æ•°     
â”‚  â””â”€ websocket.ts                     
â”œâ”€ views                          è§†å›¾ç›®å½•                         
â”‚  â”œâ”€ home                        é¦–é¡µ     
â”‚  â”‚  â””â”€ index.vue                     
â”‚  â””â”€ login                       ç™»å½•é¡µ     
â”‚     â”œâ”€ components                    
â”‚     â”‚  â”œâ”€ PasswordLogin.vue     å¯†ç ç™»å½•     
â”‚     â”‚  â”œâ”€ PhoneLogin.vue        æ‰‹æœºéªŒè¯ç ç™»å½•     
â”‚     â”‚  â””â”€ ResetPassword.vue     é‡ç½®å¯†ç      
â”‚     â””â”€ index.vue                                      
â”œâ”€ App.vue                             
â””â”€ main.ts                         é¡¹ç›®å…¥å£    


```

# ç¬¬äºŒéƒ¨åˆ†:æ¡†æ¶åˆå§‹åŒ–é…ç½®
## é¡¹ç›®è§„èŒƒ
æœ¬é¡¹ç›®æ¨èä½¿ç”¨ **Visual Studio Code** å¼€å‘

### é¡¹ç›®è§„èŒƒåº”ç”¨ï¼ˆé‡è¦ï¼‰
#### é¡¹ç›®æ–‡ä»¶ã€ç»„ä»¶å‘½åè§„èŒƒ
ä¸æœ¬å…¬å¸çš„å‰ç«¯ä»£ç è§„èŒƒä¸­è§„å®šçš„å„ç›®å½•åŠæ–‡ä»¶å‘½åè§„èŒƒä¸€è‡´ï¼š

+ <font style="color:rgb(37, 41, 51);">ç›®å½•å‘½åï¼šå…¶ä¸­ componentsç›®å½•ä¸‹çš„ ç»„ä»¶æ–‡ä»¶å¤¹ç”¨å¤§å†™é©¼å³°ï¼Œå…¶ä½™é™¤ components ç»„ä»¶ç›®å½•å¤–çš„æ‰€æœ‰ç›®å½•å‡ä½¿ç”¨ kebab-case å‘½å</font>
+ <font style="color:rgb(37, 41, 51);">æ–‡ä»¶å‘½åï¼šé™¤.vueæ–‡ä»¶é¡»ç”¨å¤§é©¼å³°å‘½åæ³•ï¼ˆindex.vueé™¤å¤–ï¼‰ï¼Œå…¶ä½™æ–‡ä»¶ç”¨kebab-case å‘½åæ³•</font>

:::warning
ğŸ’¢EbsVue3Template é‡‡ç”¨ Vue å®˜æ–¹æ¨èçš„é£æ ¼æŒ‡å—ï¼Œè¯·åŠ¡å¿…æŸ¥çœ‹

:::

####  è‡ªåŠ¨æ ¼å¼åŒ–
+ æŒ‰é…ç½®è¿‡ç¨‹è¦æ±‚å®‰è£…ç›¸åº”çš„vscodeæ’ä»¶ï¼Œä»£ç ä¸­ä¼šæ ¹æ®ç›¸å…³ä»£ç è§„èŒƒé…ç½®è¿›è¡Œä»£ç é£æ ¼ï¼Œä»£ç è´¨é‡çš„é”™è¯¯æç¤ºï¼Œå¹¶å¯èƒ½ä¼šç»™äºˆä¿®æ”¹æ„è§ï¼›
+ å½“ä¿å­˜æ—¶ï¼Œä¹Ÿä¼šæŠŠä¸ç¬¦åˆä»£ç é£æ ¼çš„åœ°æ–¹è¿›è¡Œè‡ªåŠ¨æ ¼å¼åŒ–å’Œä¿®å¤ï¼›
+ æ— æ³•ä¿®å¤çš„åœ°æ–¹ä¼šä»¥ä¸‹æ³¢æµªçº¿ï¼ˆçº¢è‰²æˆ–é»„è‰²ï¼‰æç¤ºï¼Œå¼€å‘è€…å¯æ ¹æ®æç¤ºè¿›è¡Œä¿®å¤

![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1732704502941-1d7a4d3e-4295-4ae1-be2e-33ad3f039304.png)

#### æäº¤è§„èŒƒ
+ åœ¨æäº¤æ—¶è¦è¾“å…¥çš„æäº¤ä¿¡æ¯è¦æŒ‰ç…§æäº¤è§„èŒƒè¾“å…¥ï¼ˆç›¸å…³é…ç½®æ–‡ä»¶è§.commitlintrc.cjsï¼‰ï¼Œå¦åˆ™ä¼šæ— æ³•æäº¤ï¼›
+ <font style="color:rgb(37, 41, 51);">å› ä¸ºå·²åœ¨é¡¹ç›®ä¸­é›†æˆ commitizenï¼Œä½¿ç”¨äº†</font>`<font style="color:rgb(255, 80, 44);background-color:rgb(255, 245, 245);">git cz</font>`<font style="color:rgb(37, 41, 51);"> ä»£æ›¿äº†</font>`<font style="color:rgb(255, 80, 44);background-color:rgb(255, 245, 245);">git commit</font>`<font style="color:rgb(37, 41, 51);"> å»ºè®®å¤§å®¶ç”¨ </font>`<font style="color:rgb(255, 80, 44);background-color:rgb(255, 245, 245);">git cz</font>`<font style="color:rgb(37, 41, 51);"> æ¥ä»£æ›¿ </font>`<font style="color:rgb(255, 80, 44);background-color:rgb(255, 245, 245);">git commit</font>`<font style="color:rgb(37, 41, 51);"> æäº¤ä»£ç ï¼›</font>
+ <font style="color:rgb(37, 41, 51);">å·²é…ç½® package.json å‘½ä»¤commit,æ‰€ä»¥ä¹Ÿå¯ç›´æ¥è¿è¡Œpackage.jsonä¸­çš„commit å‘½ä»¤</font>`<font style="color:rgb(37, 41, 51);">npm run commit</font>`<font style="color:rgb(37, 41, 51);">å¯ä»¥ä¿è¯æäº¤ä¿¡æ¯è§„èŒƒã€‚</font>

### é¡¹ç›®è§„èŒƒé…ç½®è¿‡ç¨‹ï¼ˆå¯å¿½ç•¥ä¸çœ‹ï¼‰
æœ¬ç« èŠ‚æ˜¯ä»‹ç»é¡¹ç›®è§„èŒƒé…ç½®çš„å…¨éƒ¨è¿‡ç¨‹ï¼Œä¾¿äºä½¿ç”¨è€…çš„ç†è§£å’Œæ ¹æ®ä¸šåŠ¡éœ€æ±‚æ›´æ”¹ç›¸å…³é…ç½®

#### ä»£ç æ ¼å¼åŒ–å·¥å…·ï¼ˆPrettierï¼‰
##### 1ã€ä¸‹è½½ prettier ç›¸å…³ä¾èµ–ï¼š
```bash
npm install prettier -D
```

##### 2ã€å®‰è£… Vscode æ’ä»¶ï¼ˆPrettierï¼‰ï¼š
![](../images/Prettier.png)![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1732672764324-6950f6c8-6c39-4155-bbf3-84942a210082.png)

##### 3ã€é…ç½® Prettierï¼ˆ.prettierrc.jsonï¼‰ï¼š
```json
{
  "$schema": "https://json.schemastore.org/prettierrc",
  // æŒ‡å®šæœ€å¤§æ¢è¡Œé•¿åº¦
  "printWidth": 120,
  // ç¼©è¿›åˆ¶è¡¨ç¬¦å®½åº¦ | ç©ºæ ¼æ•°
  "tabWidth": 2,
  // ç»“å°¾ä¸ç”¨åˆ†å· (trueï¼šæœ‰ï¼Œfalseï¼šæ²¡æœ‰)
  "semi": false,
  // ä½¿ç”¨å•å¼•å· (trueï¼šå•å¼•å·ï¼Œfalseï¼šåŒå¼•å·)
  "singleQuote": true,
  // å¤šè¡Œæ—¶å°½å¯èƒ½æ‰“å°å°¾éšé€—å· å¯é€‰å€¼"<none|es5|all>"
  "trailingComma": "none",
  // æ§åˆ¶HTMLã€Vueå’ŒJSXå…ƒç´ ä¸­æ¯ä¸ªå±æ€§æ˜¯å¦å•ç‹¬å æ®ä¸€è¡Œ
  "singleAttributePerLine": true
}
```

#### ä»£ç è§„èŒƒå·¥å…·ï¼ˆESLintï¼‰
##### 1ã€æœ¬é¡¹ç›®ä½¿ç”¨åˆ°çš„ ESLint ç›¸å…³ä¾èµ–ï¼š
ç”±äºæœ¬é¡¹ç›®æ¨¡æ¿æ˜¯ä½¿ç”¨vueå®˜æ–¹çš„é¡¹ç›®è„šæ‰‹æ¶<font style="color:rgb(33, 53, 71);"> </font>[create-vue](https://github.com/vuejs/create-vue)æ­å»ºçš„ï¼Œå·²å†…ç½®äº†ç›¸å…³çš„eslinté…ç½®ï¼Œå…¶å†…ç½®çš„ç›¸å…³çš„æ’ä»¶å¦‚ä¸‹ï¼š

| ä¾èµ– | ä½œç”¨æè¿° |
| :---: | :---: |
| eslint | ESLint æ ¸å¿ƒåº“ |
| eslint-config-standard | ç¤¾åŒºæä¾›çš„æ›´å…¨é¢çš„è§„åˆ™é›† |
| eslint-plugin-vue | ä¸º Vue ä½¿ç”¨ ESlint çš„æ’ä»¶ |
| @vue/eslint-config-prettier | è§£å†³ä»£ç è§„èŒƒä¸Prettieræ ¼å¼åŒ–å·¥å…·ä¹‹é—´çš„å’Œè°å…±å­˜é—®é¢˜ |
| @vue/eslint-config-typescript | <font style="color:rgb(77, 77, 77);">ä¸“é—¨ä¸ºVue-TypeScripté¡¹ç›®è®¾è®¡çš„ESLinté…ç½®ï¼Œå®ƒç»“åˆäº†</font>[@typescript-eslint/eslint-plugin](https://typescript-eslint.io/docs/user/configuring)<font style="color:rgb(77, 77, 77);">ä¸­çš„è§„åˆ™ï¼Œå¹¶é’ˆå¯¹Vueç”Ÿæ€è¿›è¡Œäº†ä¼˜åŒ–,æ˜¯ä¸“ä¸ºVue CLIå’Œcreate-vueé¡¹ç›®å®šåˆ¶çš„ESLinté…ç½®åŒ…</font> |
| @rushstack/eslint-patch | <font style="color:rgb(51, 51, 51);">å°è¯•åŠ è½½ä¸€ä¸ªESLintçš„è¡¥ä¸ï¼Œä»¥è§£å†³ä¸ç°ä»£JavaScriptæ¨¡å—è§£æç›¸å…³çš„é—®é¢˜</font> |


ä¸Šè¿°çš„æ’ä»¶ä¹Ÿæ˜¯åŸºäºä¸‹åˆ—æ’ä»¶å®ç°çš„ï¼Œå¦‚æœæƒ³è¦æ‰‹åŠ¨æ­å»ºä¸€éå¯ä»¥å…ˆä¸‹è½½ä¸‹åˆ—æ’ä»¶

```bash
npm install eslint eslint-config-prettier eslint-plugin-prettier eslint-plugin-vue @typescript-eslint/eslint-plugin @typescript-eslint/parser -D
```

| ä¾èµ– | ä½œç”¨æè¿° |
| :---: | :---: |
| eslint | ESLint æ ¸å¿ƒåº“ |
| eslint-config-prettier | å…³æ‰æ‰€æœ‰å’Œ Prettier å†²çªçš„ ESLint çš„é…ç½® |
| eslint-plugin-prettier | å°† Prettier çš„ rules ä»¥æ’ä»¶çš„å½¢å¼åŠ å…¥åˆ° ESLint é‡Œé¢ |
| eslint-plugin-vue | ä¸º Vue ä½¿ç”¨ ESlint çš„æ’ä»¶ |
| @typescript-eslint/eslint-plugin | ESLint æ’ä»¶ï¼ŒåŒ…å«äº†å„ç±»å®šä¹‰å¥½çš„æ£€æµ‹ TypeScript ä»£ç çš„è§„èŒƒ |
| @typescript-eslint/parser | ESLint çš„è§£æå™¨ï¼Œç”¨äºè§£æ TypeScriptï¼Œä»è€Œæ£€æŸ¥å’Œè§„èŒƒ TypeScript ä»£ç  |


##### 2ã€å®‰è£… Vscode æ’ä»¶ï¼ˆESLintï¼‰ï¼š
![](../images/ESLint.png)![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1732674820633-29940747-a2d0-4649-b728-5f72478455f5.png)

##### 3ã€é…ç½® ESLintï¼ˆ.eslintrc.cjsï¼‰ï¼š
1ã€æœ¬é¡¹ç›®çš„eslintrc.cjsé…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š 

```javascript
/* eslint-env node */
require('@rushstack/eslint-patch/modern-module-resolution')

module.exports = {
  root: true,
  extends: [
    'plugin:vue/vue3-recommended',
    'eslint:recommended',
    'standard',
    '@vue/eslint-config-typescript',
    '@vue/eslint-config-prettier'
  ],
  /*
   * "off" æˆ– 0    ==>  å…³é—­è§„åˆ™
   * "warn" æˆ– 1   ==>  æ‰“å¼€çš„è§„åˆ™ä½œä¸ºè­¦å‘Šï¼ˆä¸å½±å“ä»£ç æ‰§è¡Œï¼‰
   * "error" æˆ– 2  ==>  è§„åˆ™ä½œä¸ºä¸€ä¸ªé”™è¯¯ï¼ˆä»£ç ä¸èƒ½æ‰§è¡Œï¼Œç•Œé¢æŠ¥é”™ï¼‰
   */
  rules: {
    // vue (https://eslint.vuejs.org/rules)
    'vue/multi-word-component-names': 'off' // å…³é—­â€œè¦æ±‚ç»„ä»¶åç§°æ˜¯å¤šå•è¯çš„â€è§„åˆ™
  },
  parserOptions: {
    ecmaVersion: 'latest'
  }
}
```

éœ€è¦å¿½ç•¥eslintä»£ç æ£€æŸ¥çš„æ–‡ä»¶é…ç½®.eslintignoreé…ç½®å¦‚ä¸‹ï¼š

```bash
**.d.ts
dist
node_modules
iconfont.*
```

2ã€å¦‚æœé¡¹ç›®æ˜¯åŸºäºåŸºç¡€æ’ä»¶æ‰‹åŠ¨æ­å»ºæ–¹å¼ï¼Œåˆ™eslintçš„é…ç½®å¯å‚è€ƒå¦‚ä¸‹é…ç½®ï¼š

```javascript
// @see: http://eslint.cn

module.exports = {
	root: true,
	env: {
		browser: true,
		node: true,
		es6: true,
	},
	// æŒ‡å®šå¦‚ä½•è§£æè¯­æ³•
	parser: "vue-eslint-parser",
	// ä¼˜å…ˆçº§ä½äº parse çš„è¯­æ³•è§£æé…ç½®
	parserOptions: {
		parser: "@typescript-eslint/parser",
		ecmaVersion: 2020,
		sourceType: "module",
		jsxPragma: "React",
		ecmaFeatures: {
			jsx: true,
		},
	},
	// ç»§æ‰¿æŸäº›å·²æœ‰çš„è§„åˆ™
	extends: ["plugin:vue/vue3-recommended", "plugin:@typescript-eslint/recommended", "plugin:prettier/recommended"],
	/**
	 * "off" æˆ– 0    ==>  å…³é—­è§„åˆ™
	 * "warn" æˆ– 1   ==>  æ‰“å¼€çš„è§„åˆ™ä½œä¸ºè­¦å‘Šï¼ˆä¸å½±å“ä»£ç æ‰§è¡Œï¼‰
	 * "error" æˆ– 2  ==>  è§„åˆ™ä½œä¸ºä¸€ä¸ªé”™è¯¯ï¼ˆä»£ç ä¸èƒ½æ‰§è¡Œï¼Œç•Œé¢æŠ¥é”™ï¼‰
	 */
	rules: {
		// eslint (http://eslint.cn/docs/rules)
		"vue/multi-word-component-names": "off", // è¦æ±‚ç»„ä»¶åç§°å§‹ç»ˆä¸º â€œ-â€ é“¾æ¥çš„å•è¯
	},
};
```

#### æ ·å¼è§„èŒƒå·¥å…·ï¼ˆStyleLintï¼‰
##### 1ã€ä¸‹è½½ StyleLint ç›¸å…³ä¾èµ–ï¼š
```bash
npm install stylelint stylelint-config-html stylelint-config-standard-scss stylelint-config-standard-vue stylelint-config-standard stylelint-config-recess-order postcss postcss-html stylelint-prettier -D
```

| ä¾èµ– | ä½œç”¨æè¿° |
| :---: | --- |
| stylelint | stylelint æ ¸å¿ƒåº“ |
| stylelint-config-standard | æ˜¯ä¸€ä¸ªç”¨äºStylelintçš„å…±äº«é…ç½®ï¼Œå®ƒæä¾›äº†ä¸€å¥—åŸºç¡€è§„åˆ™ï¼Œå¸®åŠ©å¼€å‘è€…éµå¾ªCSSç¼–ç çš„æœ€ä½³å®è·µã€‚è¯¥é…ç½®æ¶µç›–äº†ä»é€‰æ‹©å™¨å‘½ååˆ°å±æ€§æ’åºç­‰å¤šæ–¹é¢çš„æ£€æŸ¥ï¼Œç¡®ä¿ä½ çš„æ ·å¼ä»£ç ä¿æŒæ•´æ´å’Œä¸€è‡´ |
| stylelint-config-html | Stylelint çš„å¯å…±äº« HTMLï¼ˆå’Œç±»ä¼¼ HTMLï¼‰é…ç½®ï¼Œæ†ç»‘ postcss-html å¹¶å¯¹å…¶è¿›è¡Œé…ç½®ã€‚ |
| stylelint-config-standard-scss | æ‰©å±• stylelint-config-standard å…±äº«é…ç½®ï¼Œå¹¶ä¸º SCSS é…ç½®å…¶è§„åˆ™ |
| stylelint-config-standard-vue | æ‰©å±• stylelint-config-standard  å…±äº«é…ç½®ï¼Œå¹¶ä¸º Vue é…ç½®å…¶è§„åˆ™ |
| stylelint-config-recess-order | å±æ€§çš„æ’åºï¼ˆæ’ä»¶åŒ…ï¼‰ |
| stylelint-prettier | å°†Prettierçš„æ ¼å¼åŒ–åŠŸèƒ½é›†æˆåˆ°Stylelintä¸­ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥åœ¨ä¿æŒåŸæœ‰Stylelinté…ç½®çš„åŸºç¡€ä¸Šï¼Œåˆ©ç”¨Prettierè¿›è¡Œä»£ç çš„è‡ªåŠ¨åŒ–æ ¼å¼åŒ– |
| postcss | postcss-html çš„ä¾èµ–åŒ… |
| postcss-html | ç”¨äºè§£æ HTMLï¼ˆå’Œç±»ä¼¼ HTMLï¼‰çš„ PostCSS è¯­æ³• |


##### 2ã€å®‰è£… Vscode æ’ä»¶ï¼ˆStyleLintï¼‰ï¼š
![](../images/Stylelint.png)![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1732698218523-24274aba-82dd-4d8f-9450-c18a1ee251ea.png)

##### 3ã€åœ¨ç›®å½•çš„ .vscode æ–‡ä»¶å¤¹ä¸‹æ–°å»º settings.jsonï¼š
```json
{
    "editor.formatOnSave": true,
    "editor.codeActionsOnSave": {
        "source.fixAll.stylelint": true
    },
    "stylelint.enable": true,
    "stylelint.validate": ["css", "less", "postcss", "scss", "vue", "sass", "html"],
    "files.eol": "\n"
}
```

> ğŸ˜ ä¹Ÿå¯ä»¥åœ¨ vscode ä¸­å…¨å±€é…ç½®ä¸Šè¿° json ä»£ç  ğŸ˜
>

##### 4ã€é…ç½® StyleLintï¼ˆ.stylelintrc.cjsï¼‰ï¼š
```javascript
module.exports = {
  // ç»§æ‰¿ä¸€ç³»åˆ—è§„åˆ™é›†åˆ
  extends: [
    'stylelint-config-standard', // é…ç½®stylelintæ‹“å±•æ’ä»¶
    'stylelint-config-html/vue', // é…ç½® vue ä¸­ template æ ·å¼æ ¼å¼åŒ–
    'stylelint-config-standard-scss', // é…ç½®stylelint scssæ’ä»¶
    'stylelint-config-standard-vue/scss', // é…ç½® vue ä¸­ scss æ ·å¼æ ¼å¼åŒ–
    'stylelint-config-recess-order', // é…ç½®stylelint csså±æ€§ä¹¦å†™é¡ºåºæ’ä»¶,
    'stylelint-prettier/recommended'
  ],
  overrides: [
    // æ‰«æ .vue/html æ–‡ä»¶ä¸­çš„<style>æ ‡ç­¾å†…çš„æ ·å¼
    {
      files: ['**/*.{vue,html}'],
      customSyntax: 'postcss-html'
    }
  ],
  /**
   * null  => å…³é—­è¯¥è§„åˆ™
   */
  rules: {
    'selector-class-pattern': null,
    'selector-pseudo-class-no-unknown': [
      true,
      {
        ignorePseudoClasses: ['global', 'v-deep', 'deep']
      }
    ],
    'at-rule-no-unknown': null,
    'scss/at-rule-no-unknown': [
      true,
      {
        ignoreAtRules: ['tailwind', 'tailwindcss'] //tailwindcssç›¸å…³é…ç½®
      }
    ]
  }
}

```

éœ€è¦å¿½ç•¥stylelintä»£ç æ£€æŸ¥çš„æ–‡ä»¶é…ç½®.stylelintignoreé…ç½®å¦‚ä¸‹ï¼š

```bash
/dist/*
node_modules/*
```

#### EditorConfig é…ç½®
##### 1ã€ç®€ä»‹ï¼š
+ **EditorConfig** å¸®åŠ©å¼€å‘äººå‘˜åœ¨ **ä¸åŒçš„ç¼–è¾‘å™¨** å’Œ **IDE** ä¹‹é—´å®šä¹‰å’Œç»´æŠ¤ä¸€è‡´çš„ç¼–ç æ ·å¼ã€‚

##### 2ã€å®‰è£… VsCode æ’ä»¶ï¼ˆEditorConfig ï¼‰ï¼š
![](../images/EditorConfig.png)![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1732699026813-eb473f7a-031c-4442-9405-35308a42275e.png)

##### 3ã€é…ç½® EditorConfigï¼ˆ.editorconfigï¼‰ï¼š
```bash
# @see: http://editorconfig.org

root = true

[*] # è¡¨ç¤ºæ‰€æœ‰æ–‡ä»¶é€‚ç”¨
#ç¼–ç 
charset = utf-8
#ç¼©è¿›æ–¹å¼
indent_style = space
#ç¼©è¿›ç©ºæ ¼æ•°
indent_size = 2
#æ¢è¡Œç¬¦lf
end_of_line = lf
#æ˜¯å¦åˆ é™¤è¡Œå°¾çš„ç©ºæ ¼
trim_trailing_whitespace = true
#æ˜¯å¦åœ¨æ–‡ä»¶çš„æœ€åæ’å…¥ä¸€ä¸ªç©ºè¡Œ
insert_final_newline = true

[*.md] # è¡¨ç¤ºä»… md æ–‡ä»¶é€‚ç”¨ä»¥ä¸‹è§„åˆ™
max_line_length = off # å…³é—­æœ€å¤§è¡Œé•¿åº¦é™åˆ¶
trim_trailing_whitespace = false # å…³é—­æœ«å°¾ç©ºæ ¼ä¿®å‰ª

```

#### Git æµç¨‹è§„èŒƒé…ç½®
| ä¾èµ– | ä½œç”¨æè¿° |
| :---: | --- |
| husky | æ“ä½œ **git** é’©å­çš„å·¥å…·ï¼ˆåœ¨ **git xx** ä¹‹å‰æ‰§è¡ŒæŸäº›å‘½ä»¤ï¼‰ |
| lint-staged | <font style="color:rgb(36, 41, 47);">å¦‚æœåœ¨æ•´ä¸ªé¡¹ç›®ä¸Šè¿›è¡Œä»£ç æ£€æŸ¥é‚£ä¹ˆæ•ˆç‡å°±ä¼šéå¸¸ä½ä¸‹ï¼Œæ‰€ä»¥æœ€å¥½çš„åšæ³•å°±æ˜¯æ£€æŸ¥é‚£äº›è¢«æ”¹åŠ¨äº†çš„æ–‡ä»¶ï¼Œè€Œ Lint-staged åˆ™å¯ä»¥å¸®æˆ‘ä»¬å®ç°è¿™ä¸ªç›®çš„:</font>åœ¨æäº¤ä¹‹å‰è¿›è¡Œ **eslint** æ ¡éªŒï¼Œå¹¶ä½¿ç”¨ **prettier** æ ¼å¼åŒ–æœ¬åœ°æš‚å­˜åŒºçš„ä»£ç ï¼Œ |
| <font style="color:rgb(36, 41, 47);">pretty-quick</font> | <font style="color:rgb(36, 41, 47);">å¦‚æœåœ¨æ•´ä¸ªé¡¹ç›®ä¸Šè¿›è¡Œä»£ç æ ¼å¼åŒ–ä¹Ÿæ˜¯æ•ˆç‡éå¸¸ä½ä¸‹çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ pretty-quick åœ¨æ›´æ”¹çš„æ–‡ä»¶ä¸Šè¿è¡Œ Prettier è¿›è¡Œä»£ç æ ¼å¼åŒ–</font> |
| @commitlint/cli | æ ¡éªŒ **git commit** ä¿¡æ¯æ˜¯å¦ç¬¦åˆè§„èŒƒï¼Œä¿è¯å›¢é˜Ÿçš„ä¸€è‡´æ€§ |
| @commitlint/config-conventional | **Anglar** çš„æäº¤è§„èŒƒ |
| commitizen | <font style="color:rgb(0, 0, 0);background-color:rgb(201, 228, 255);">åŸºäº Node.js çš„ git commit å‘½ä»¤è¡Œå·¥å…·ï¼Œç”Ÿæˆæ ‡å‡†åŒ–çš„ message</font> |
| cz-git | ä¸€æ¬¾å·¥ç¨‹æ€§æ›´å¼ºï¼Œè½»é‡çº§ï¼Œé«˜åº¦è‡ªå®šä¹‰ï¼Œæ ‡å‡†è¾“å‡ºæ ¼å¼çš„ **commitize** é€‚é…å™¨ |


##### 1ã€huskyï¼ˆæ“ä½œ git é’©å­çš„å·¥å…·ï¼‰ï¼š
> **å®‰è£…ï¼š**
>

```bash
npm install husky -D
```

> **ä½¿ç”¨ï¼ˆä¸ºäº†æ·»åŠ .husky æ–‡ä»¶å¤¹ï¼‰ï¼š**
>

```bash
# ç¼–è¾‘ package.json > prepare è„šæœ¬å¹¶è¿è¡Œä¸€æ¬¡

npm set-script prepare "husky install"
npm run prepare
```

##### 2ã€ lint-stagedï¼ˆæœ¬åœ°æš‚å­˜ä»£ç æ£€æŸ¥å·¥å…·ï¼‰
> **å®‰è£…ï¼š**
>

```bash
npm install lint-staged --D
```

> **æ·»åŠ  ESlint Hookï¼ˆåœ¨.husky æ–‡ä»¶å¤¹ä¸‹æ·»åŠ  pre-commit æ–‡ä»¶ï¼‰ï¼š**
>

> **ä½œç”¨ï¼šé€šè¿‡é’©å­å‡½æ•°ï¼Œåˆ¤æ–­æäº¤çš„ä»£ç æ˜¯å¦ç¬¦åˆè§„èŒƒï¼Œå¹¶ä½¿ç”¨ prettier æ ¼å¼åŒ–ä»£ç **
>

```bash
npx husky add .husky/pre-commit "npm run lint:lint-staged"
npx husky add .husky/pre-commit "npx pretty-quick --staged"
```

> æ–°å¢ **lint-staged.config.cjs** æ–‡ä»¶ï¼š
>

```javascript
module.exports = {
  '*.{js,jsx,ts,tsx}': ['eslint --fix', 'prettier --write'],
  '{!(package)*.json,*.code-snippets,.!(browserslist)*rc}': ['prettier --write--parser json'],
  'package.json': ['prettier --write'],
  '*.vue': ['eslint --fix', 'prettier --write', 'stylelint --fix'],
  '*.{scss,less,styl,html}': ['stylelint --fix', 'prettier --write'],
  '*.md': ['prettier --write']
}

```

##### 3ã€commitlintï¼ˆcommit ä¿¡æ¯æ ¡éªŒå·¥å…·ï¼Œä¸ç¬¦åˆåˆ™æŠ¥é”™ï¼‰
> **å®‰è£…ï¼š**
>

```bash
npm install @commitlint/cli @commitlint/config-conventional -D
```

> **é…ç½®å‘½ä»¤ï¼ˆåœ¨.husky æ–‡ä»¶å¤¹ä¸‹æ·»åŠ  commit-msg æ–‡ä»¶ï¼‰ï¼š**
>

```bash
npx husky add .husky/commit-msg 'npx --no-install commitlint --edit "$1"'
```

##### 4ã€commitizenï¼ˆåŸºäº Node.js çš„ git commit å‘½ä»¤è¡Œå·¥å…·ï¼Œç”Ÿæˆæ ‡å‡†åŒ–çš„ messageï¼‰
```bash
// å®‰è£… commitizenï¼Œå¦‚æ­¤ä¸€æ¥å¯ä»¥å¿«é€Ÿä½¿ç”¨ commitizen å‘½ä»¤è¿›è¡Œå¯åŠ¨ã€‚
npm install commitizen -D
```

##### 5ã€cz-git
> **æŒ‡å®šæäº¤æ–‡å­—è§„èŒƒï¼Œä¸€æ¬¾å·¥ç¨‹æ€§æ›´å¼ºï¼Œé«˜åº¦è‡ªå®šä¹‰ï¼Œæ ‡å‡†è¾“å‡ºæ ¼å¼çš„ commitizen é€‚é…å™¨**
>

```bash
npm install cz-git -D
```

> **é…ç½® package.jsonï¼š**
>

```bash
"config": {
  "commitizen": {
    "path": "./node_modules/cz-git"
  }
}
```

> **æ–°å»º .commitlintrc.cjs æ–‡ä»¶ï¼š**
>

```javascript
// .commitlintrc.js
/** @type {import('cz-git').UserConfig} */
module.exports = {
  ignores: [(commit) => commit.includes('init')],
  extends: ['@commitlint/config-conventional'],
  rules: {
    // @see: https://commitlint.js.org/#/reference-rules
  },
  prompt: {
    alias: { fd: 'docs: fix typos' },
    messages: {
      type: 'é€‰æ‹©ä½ è¦æäº¤çš„ç±»å‹ :',
      scope: 'é€‰æ‹©ä¸€ä¸ªæäº¤èŒƒå›´ï¼ˆå¯é€‰ï¼‰:',
      customScope: 'è¯·è¾“å…¥è‡ªå®šä¹‰çš„æäº¤èŒƒå›´ :',
      subject: 'å¡«å†™ç®€çŸ­ç²¾ç‚¼çš„å˜æ›´æè¿° :\n',
      body: 'å¡«å†™æ›´åŠ è¯¦ç»†çš„å˜æ›´æè¿°ï¼ˆå¯é€‰ï¼‰ã€‚ä½¿ç”¨ "|" æ¢è¡Œ :\n',
      breaking: 'åˆ—ä¸¾éå…¼å®¹æ€§é‡å¤§çš„å˜æ›´ï¼ˆå¯é€‰ï¼‰ã€‚ä½¿ç”¨ "|" æ¢è¡Œ :\n',
      footerPrefixesSelect: 'é€‰æ‹©å…³è”issueå‰ç¼€ï¼ˆå¯é€‰ï¼‰:',
      customFooterPrefix: 'è¾“å…¥è‡ªå®šä¹‰issueå‰ç¼€ :',
      footer: 'åˆ—ä¸¾å…³è”issue (å¯é€‰) ä¾‹å¦‚: #31, #I3244 :\n',
      confirmCommit: 'æ˜¯å¦æäº¤æˆ–ä¿®æ”¹commit ?'
    },
    types: [
      { value: 'feat', name: 'feat:     æ–°å¢åŠŸèƒ½ | A new feature' },
      { value: 'fix', name: 'fix:      ä¿®å¤ç¼ºé™· | A bug fix' },
      { value: 'docs', name: 'docs:     æ–‡æ¡£æ›´æ–° | Documentation only changes' },
      { value: 'style', name: 'style:    ä»£ç æ ¼å¼ | Changes that do not affect the meaning of the code' },
      { value: 'refactor', name: 'refactor: ä»£ç é‡æ„ | A code change that neither fixes a bug nor adds a feature' },
      { value: 'perf', name: 'perf:     æ€§èƒ½æå‡ | A code change that improves performance' },
      { value: 'test', name: 'test:     æµ‹è¯•ç›¸å…³ | Adding missing tests or correcting existing tests' },
      { value: 'build', name: 'build:    æ„å»ºç›¸å…³ | Changes that affect the build system or external dependencies' },
      { value: 'ci', name: 'ci:       æŒç»­é›†æˆ | Changes to our CI configuration files and scripts' },
      { value: 'revert', name: 'revert:   å›é€€ä»£ç  | Revert to a commit' },
      { value: 'chore', name: 'chore:    å…¶ä»–ä¿®æ”¹ | Other changes that do not modify src or test files' }
    ],
    useEmoji: false,
    emojiAlign: 'center',
    useAI: false,
    aiNumber: 1,
    themeColorCode: '',
    scopes: [],
    allowCustomScopes: true,
    allowEmptyScopes: true,
    customScopesAlign: 'bottom',
    customScopesAlias: 'custom',
    emptyScopesAlias: 'empty',
    upperCaseSubject: false,
    markBreakingChangeMode: false,
    allowBreakingChanges: ['feat', 'fix'],
    breaklineNumber: 100,
    breaklineChar: '|',
    skipQuestions: ['body', 'footer'],
    issuePrefixes: [
      // å¦‚æœä½¿ç”¨ gitee ä½œä¸ºå¼€å‘ç®¡ç†
      { value: 'link', name: 'link:     é“¾æ¥ ISSUES è¿›è¡Œä¸­' },
      { value: 'closed', name: 'closed:   æ ‡è®° ISSUES å·²å®Œæˆ' }
    ],
    customIssuePrefixAlign: 'top',
    emptyIssuePrefixAlias: 'skip',
    customIssuePrefixAlias: 'custom',
    allowCustomIssuePrefix: true,
    allowEmptyIssuePrefix: true,
    confirmColorize: true,
    scopeOverrides: undefined,
    defaultBody: '',
    defaultIssues: '',
    defaultScope: '',
    defaultSubject: ''
  }
}

```

#### é…ç½® package.json å‘½ä»¤
```json
{
    "scripts": {
        // æœ¬åœ°è¿è¡Œ(devç¯å¢ƒ)
        "dev": "vite",
        // æœ¬åœ°è¿è¡Œ(devç¯å¢ƒ)
        "serve": "vite",
        // æ„å»ºæ‰“åŒ…(devç¯å¢ƒ)
        "build:dev": "vue-tsc && vite build --mode development",
        // æ„å»ºæ‰“åŒ…(testç¯å¢ƒ)
        "build:test": "vue-tsc && vite build --mode test",
        // æ„å»ºæ‰“åŒ…(proç¯å¢ƒ)
        "build:pro": "vue-tsc && vite build --mode production",
        // æ£€æŸ¥é¡¹ç›® ts ç±»å‹
        "type:check": "vue-tsc --noEmit --skipLibCheck",
        // æœ¬åœ°ç¯å¢ƒé¢„è§ˆæ„å»ºåçš„ dist
        "preview": "npm run build:dev && vite preview",
        // æ‰§è¡Œ eslint æ ¡éªŒ
        "lint:eslint": "eslint --fix --ext .js,.ts,.vue ./src",
        // æ‰§è¡Œ prettier æ ¼å¼åŒ–
        "lint:prettier": "prettier --write \"src/**/*.{js,ts,json,tsx,css,less,scss,vue,html,md}\"",
        // æ‰§è¡Œ stylelint æ ¼å¼åŒ–
        "lint:stylelint": "stylelint --cache --fix \"**/*.{vue,less,postcss,css,scss}\" --cache --cache-location node_modules/.cache/stylelint/",
        // æ‰§è¡Œ lint-staged.config.js æ–‡ä»¶ä¸‹çš„å‘½ä»¤
        "lint:lint-staged": "lint-staged",
        // åˆå§‹åŒ– husky é…ç½®
        "prepare": "husky install",
        // è‡ªåŠ¨æ›´æ–°ç‰ˆæœ¬
        "release": "standard-version",
        // æäº¤ä»£ç (å¯è‡ªå®šä¹‰é…ç½®æ‰§è¡Œå‘½ä»¤)
        "commit": "git add -A && czg && git push"
    }
}
```

## å…¨å±€é…ç½®
### ç³»ç»Ÿå…¨å±€å˜é‡é…ç½®
åœ¨ src/config/index.tsæ–‡ä»¶ä¸­å¯å¯¹é¡¹ç›®çš„ä¸€äº›å…¨å±€é…ç½®æ ¹æ®ä¸šåŠ¡éœ€æ±‚è¿›è¡Œé‡æ–°é…ç½®é»˜è®¤å€¼ï¼š

```typescript
// ? å…¨å±€é»˜è®¤é…ç½®é¡¹
import type { Theme } from '@/hooks/interface'
import { primaryTypes } from '@/styles/theme/primary-type'

// ç™»å½•é¡µåœ°å€ï¼ˆé»˜è®¤ï¼‰
export const LOGIN_URL: string = '/login'
export const UI_COLORS: string[] = ['#4f75e9', '#4aca7d', '#f29d49', '#f25749']
// é»˜è®¤ä¸»é¢˜é¢œè‰²ç±»å‹
export const DEFAULT_PRIMARY_TYPE: Theme.PrimaryType = 'blue'
// é»˜è®¤ä¸»é¢˜é¢œè‰²
export const DEFAULT_PRIMARY: string = primaryTypes[DEFAULT_PRIMARY_TYPE]['--el-color-primary']

// è·¯ç”±ç™½åå•åœ°å€ï¼ˆæœ¬åœ°å­˜åœ¨çš„è·¯ç”± staticRouter.ts ä¸­ï¼‰
export const ROUTER_WHITE_LIST: string[] = ['/404', '/500', '/login']

// é»˜è®¤åº”ç”¨ID
export const APP_CODE = 'iot'
// é¦–é¡µåœ°å€ï¼ˆé»˜è®¤ï¼‰
export const HOME_URL: string = `/${APP_CODE}/home`
```

ç™»å½•åœ°å€ï¼Œé»˜è®¤ä¸»é¢˜è‰²ï¼›è·¯ç”±ç™½åå•ï¼Œé»˜è®¤é¦–é¡µï¼Œç³»ç»Ÿcode

#### LOGIN_URL ç™»å½•åœ°å€
å…¶ä¸­ç™»å½•åœ°å€æ˜¯ä»¥è·¯ç”±çš„æ–¹å¼è¿›è¡Œè·³è½¬çš„ã€‚å¦‚æœä¸šåŠ¡éœ€æ±‚æ˜¯å¯èƒ½è·³è½¬åˆ°å…¶ä»–å®Œæ•´é“¾æ¥ï¼Œå¯è¿›è¡Œå…¨å±€æœç´¢è¯¥å˜é‡è¿›è¡Œæ›´æ”¹è·³è½¬æ–¹å¼

#### DEFAULT_PRIMARY_TYPE é»˜è®¤ä¸»é¢˜è‰²ç±»å‹
æœ¬é¡¹ç›®ä¸­æœ‰ä¸‰ç§ä¸»é¢˜ï¼šä¸»é¢˜è“blueï¼Œå…šå»ºçº¢redï¼Œç”Ÿæ—¥é‡‘goldenï¼Œåˆ†åˆ«å¯¹åº”æœ‰ä¸åŒé¢œè‰²å’Œå¯¼èˆªèƒŒæ™¯å›¾ï¼Œç›¸å…³æ•°æ®è§src/styles/theme/primary-type.ts

```typescript
import type { Theme } from '@/hooks/interface'
import blueUrl from '@/assets/images/header-bg-blue.png'
import blueTopUrl from '@/assets/images/header-bg-blue-top.png'
import blueBottomUrl from '@/assets/images/header-bg-blue-bottom.png'
import redUrl from '@/assets/images/header-bg-red.png'
import redTopUrl from '@/assets/images/header-bg-red-top.png'
import redBottomUrl from '@/assets/images/header-bg-red-bottom.png'
import goldenUrl from '@/assets/images/header-bg-golden.png'
import goldenTopUrl from '@/assets/images/header-bg-golden-top.png'
import goldenBottomUrl from '@/assets/images/header-bg-golden-bottom.png'

export const primaryTypes: Record<Theme.PrimaryType, { [key: string]: string }> = {
  blue: {
    '--kr-color-primary': '#4f75e9',
    '--header-bg-img': `url("${blueUrl}")`,
    '--header-bg-img-top': `url("${blueTopUrl}")`,
    '--header-bg-img-bottom': `url("${blueBottomUrl}")`
  },

  red: {
    '--kr-color-primary': '#F26447',
    '--header-bg-img': `url("${redUrl}")`,
    '--header-bg-img-top': `url("${redTopUrl}")`,
    '--header-bg-img-bottom': `url("${redBottomUrl}")`
  },
  golden: {
    '--kr-color-primary': '#F5A24D',
    '--header-bg-img': `url("${goldenUrl}")`,
    '--header-bg-img-top': `url("${goldenTopUrl}")`,
    '--header-bg-img-bottom': `url("${goldenBottomUrl}")`
  }
}

```

é‡ç‚¹ï¼šé¡¹ç›®ä¸­å¼€å‘è€…å¯é€šè¿‡DEFAULT_PRIMARY_TYPEè¿›è¡Œè®¾ç½®é»˜è®¤ä¸»é¢˜ï¼›

ç³»ç»Ÿä¸­ä¹Ÿå†…ç½®äº†æ›´æ”¹ä¸»é¢˜çš„åŠŸèƒ½ï¼Œç”¨æˆ·å¯æ ¹æ®å–œå¥½é€‰æ‹©ä¸»é¢˜ï¼›

![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1732705612869-f177bdb4-1a53-45c4-b440-5e68a5bd8e30.png)

#### APP_CODE åº”ç”¨code(é‡ç‚¹)
+ é‡ç‚¹ï¼šè¿™é‡Œçš„åº”ç”¨codeåº”æ ¹æ®ä¸šåŠ¡ç³»ç»Ÿåœ¨å¼€å‘å¹³å°ä¸­æ³¨å†Œçš„åº”ç”¨ä¸­ä¿å­˜çš„ç¼–ç è®¾ç½®
+ åç»­éœ€è¦è¯·æ±‚çš„åº”ç”¨èœå•ï¼Œåº”ç”¨çš„å¤šè¯­è¨€ç­‰éƒ½éœ€è¦è¯¥code

![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1732705871946-6813c280-49e8-46ec-a36a-ff20ed2e3b1c.png)

#### HOME_URL é¦–é¡µåœ°å€
æ¨¡æ¿é¡¹ç›®ä¸­ï¼šå¦‚æœè®¾ç½®çš„è¯¥é¦–é¡µåœ°å€åœ¨è·¯ç”±ä¸­å­˜åœ¨åˆ™è®¤ä¸ºæ˜¯é¦–é¡µåœ°å€å¦åˆ™ä¼šæ‰¾åˆ°è·¯ç”±ä¸­çš„ç¬¬ä¸€ä¸ªæœ‰æ•ˆè·¯å¾„ä½œä¸ºè·¯ç”±åœ°å€ï¼Œè§src/utils/index.tsä¸­è·å–é¦–é¡µåœ°å€é€»è¾‘ä»£ç å¦‚ä¸‹ï¼š

```typescript
import router from '@/router'
import { HOME_URL } from '@/config'
/**
 *
 * @param routers è·¯ç”±åˆ—è¡¨
 * @returns é»˜è®¤é¦–é¡µ
 */
export function getHomeUrl(): string {
  const routers = router.getRoutes()
  let defaultHomePath
  routers.forEach((item: any) => {
    if (item.path === HOME_URL || item.isHomeUrl) {
      defaultHomePath = item.path
    }
  })
  return defaultHomePath || routers[0].path
}
```

åœ¨ç”¨åˆ°é¦–é¡µåœ°å€çš„åœ°æ–¹éƒ½ä¼šè°ƒç”¨è¯¥æ–¹æ³•ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹é€»è¾‘è¯·å…¨å±€æœç´¢getHomeUrlå³å¯æ‰¾åˆ°ä½¿ç”¨é¦–é¡µåœ°å€çš„åœ°æ–¹ã€‚

é‡ç‚¹ï¼šæ‰€ä»¥å»ºè®®åœ¨é…ç½®åº”ç”¨èœå•æ—¶é…ç½®å¥½é¦–é¡µåœ°å€ï¼Œå¹¶åœ¨src/config.tsä¸­èµ‹å€¼ç»™HOME_URL

### ç³»ç»ŸæœåŠ¡åœ°å€é…ç½®ï¼ˆé‡ç‚¹ï¼‰
+ ä¸ºäº†èƒ½å¤Ÿåœ¨éƒ¨ç½²æ—¶çµæ´»ä¿®æ”¹åç«¯æ¥å£åœ°å€ï¼Œè¯¥é¡¹ç›®æ¨¡æ¿å°†å‰ç«¯æ‰€éœ€è¦è¿æ¥çš„æ‰€æœ‰åœ°å€éƒ½ç»Ÿä¸€é…ç½®åœ¨äº†public/config.jsä¸­ï¼Œå¯æ ¹æ®ä¸šåŠ¡éœ€æ±‚è¿›è¡Œç›¸åº”æ¥å£åœ°å€è°ƒæ•´ä»£ç å¦‚ä¸‹ï¼š

```javascript
// eslint-disable-next-line no-unused-vars
window.serviceConfig = {
  // å¼€å‘ç¯å¢ƒé…ç½®
  development: {
    // æœ¬åœ°ç¯å¢ƒæ¥å£åœ°å€
    // åç«¯è®¿é—®åœ°å€çš„æ ¹è·¯å¾„ï¼Œåœ¨vue.config.jsä¸­é…ç½®devServerï¼Œè®¾ç½®æœåŠ¡è·¯å¾„çš„è·¯ç”±è§„åˆ™ï¼Œå¦‚æœæ˜¯åˆ†å¸ƒå¼ï¼Œåˆ™åˆ†åˆ«è®¾ç½®æ¯ä¸ªæœåŠ¡è·¯å¾„çš„è·¯ç”±è§„åˆ™
    VITE_API_URL: '',
    // WebSocketã€åœ¨çº¿æ–‡æ¡£ç­‰
    VITE_ONLINE_URL: '/api/ws',

    // å­—ä½“æ–‡ä»¶åœ°å€
    VITE_API_FONT_URL: 'http://10.11.228.190/font',
    // äº‘ç¨‹å‰ç«¯é¡¹ç›®è¿è¡Œçš„åœ°å€
    VITE_API_YUNCHENG_URL: `http://${location.hostname}:3000`
  },
  //  æ‰“åŒ…ä¹‹åçš„æµ‹è¯•ç¯å¢ƒé…ç½®
  test: {
    // æ¥å£åœ°å€
    VITE_API_URL: '',

    // WebSocketã€åœ¨çº¿æ–‡æ¡£ç­‰
    VITE_ONLINE_URL: '/api/ws',
    // å­—ä½“æ–‡ä»¶åœ°å€
    VITE_API_FONT_URL: 'http://10.11.228.190/font',
    // äº‘ç¨‹å‰ç«¯é¡¹ç›®è¿è¡Œçš„åœ°å€
    VITE_API_YUNCHENG_URL: `http://${location.hostname}:3000`
  },
  // æ‰“åŒ…ä¹‹åçš„ç”Ÿäº§ç¯å¢ƒé…ç½®
  production: {
    // æ¥å£åœ°å€
    VITE_API_URL: 'http://10.11.228.190',

    // WebSocketã€åœ¨çº¿æ–‡æ¡£ç­‰
    VITE_ONLINE_URL: 'http://10.11.228.190/api/ws',

    // å­—ä½“æ–‡ä»¶åœ°å€
    VITE_API_FONT_URL: 'http://10.11.228.190/font',
    // äº‘ç¨‹å‰ç«¯é¡¹ç›®è¿è¡Œçš„åœ°å€
    VITE_API_YUNCHENG_URL: 'http://10.11.228.190/yc'
  }
}

```

+ åœ¨src/api/config/service-port.tsæ ¹æ®åç«¯åšçš„æœåŠ¡å‰ç¼€ä»£ç†è¿›è¡Œç›¸å…³çš„æœåŠ¡å‰ç¼€é…ç½®ï¼›
+ ç„¶ååœ¨src/api/modulesä¸‹å»ºç›¸åº”æ¨¡å—æ¥å£æ–‡ä»¶è¿›è¡Œç›¸åº”æ¥å£åœ°å€æ‹¼æ¥ï¼›å¯å‚src/api/modules/common/login.ts

```javascript
// åç«¯å¾®æœåŠ¡æ¨¡å—å‰ç¼€

/**
 * åº”ç”¨çš„æœåŠ¡å‰ç¼€
 */
export const PORT_SYSTEM = '/api/api'


```

```javascript
import { PORT_SYSTEM } from '@/api/config/service-port'
import http from '@/api'

/**
 * @name ç™»å½•æ¨¡å—
 */
// ç™»å½•æ¨¡å—
export namespace Login {
  export interface ReqLoginForm {
    userName: string
    password: string
  }
  export interface ResLogin {
    token: string
    userInfo: {
      staffId: number
      [key: string]: any
    }
  }
  export interface ResAuthButtons {
    [key: string]: string[]
  }

  // è·å–éªŒè¯ç ç±»å‹è¿”å›ç±»å‹
  export interface Captcha {
    [key: string]: string[]
  }

  // æ ¡éªŒéªŒè¯ç å…¥å‚
  export interface CheckCaptcaReq {
    captchaType: string // éªŒè¯ç ç±»å‹ï¼Œæš‚æ—¶åªæœ‰ä¸€ç§,ä¸º captchaType:blockPuzzle
    pointJson: string // æ‹–åŠ¨çš„ç‚¹ä½ä¿¡æ¯(æœ‰åŠ å¯†)
    token: string // tokenä¿¡æ¯(éªŒè¯ç token)
  }

  // æ ¡éªŒéªŒè¯ç å‡ºå‚
  export interface CheckCaptcaRes {
    [key: string]: string[]
  }

  export interface AuthInfo {
    permissions: string[]
    roles: string[]
    menus: AppCustomRouteRecordRaw[]
  }
  export interface ReqGetParams {
    name?: string
    ecode?: string
    namespace?: string
    [property: string]: any
  }
  export interface AuthUser {
    appCode: string
    fetchAvatar: boolean // æ˜¯å¦æœ‰å¤´åƒ
  }
}
// è·å–éªŒè¯ç 
export const getCaptcha = (params: { captchaType: string }) => {
  return http.post<Login.Captcha>(PORT_SYSTEM + `/captcha/get`, params, { loading: false })
}

// è·å–éªŒè¯ç 
export const checkCaptcha = (params: Login.CheckCaptcaReq) => {
  return http.post<Login.CheckCaptcaRes>(PORT_SYSTEM + `/captcha/check`, params, { loading: false })
}

// ç”¨æˆ·ç™»å½•
export const authLogin = (params: Login.ReqLoginForm) => {
  return http.post<Login.ResLogin>(PORT_SYSTEM + `/user/auth/login`, params, { loading: false })
}

// è·å–ç”¨æˆ·ä¿¡æ¯å’Œæƒé™ä¿¡æ¯
export const getAutInfoApi = (params: Login.AuthUser) => {
  return http.post(PORT_SYSTEM + `/client/user-auth-info`, params)
  // return authInfo
}
// ç”¨æˆ·é€€å‡ºç™»å½•
export const logoutApi = () => {
  return http.post(PORT_SYSTEM + `/logout`)
}

```

## å…¨å±€æ ·å¼
```bash
styles                 
â”œâ”€ koron               
â”‚  â””â”€ var.scss         
â”œâ”€ tailwind            
â”‚  â”œâ”€ base.scss        
â”‚  â”œâ”€ components.scss  
â”‚  â””â”€ utilities.scss   
â”œâ”€ theme               
â”‚  â”œâ”€ aside.ts         
â”‚  â”œâ”€ header.ts        
â”‚  â”œâ”€ menu.ts          
â”‚  â””â”€ primary-type.ts  
â”œâ”€ common.scss         
â””â”€ index.scss          

```

+ koronæ–‡ä»¶å¤¹:å¯ä»¥å¯¹koron-uiç»„ä»¶åº“è¿›è¡Œä¸»é¢˜è‡ªå®šä¹‰è®¾ç½®--è‹¥äº§å“é£æ ¼ä¸å˜ï¼Œè¿™é‡Œæ— éœ€æ”¹åŠ¨ï¼›
+ tailwindæ–‡ä»¶å¤¹ï¼šå¯¹tailwind cssæ¡†æ¶ä¸­åŸºç¡€æ ·å¼çš„å¼•ç”¨--è¿™é‡Œæ— éœ€æ”¹åŠ¨
+ themeæ–‡ä»¶å¤¹:æ˜¯å¯¹é¡¹ç›®çš„å¤´éƒ¨å¯¼èˆªï¼Œä¾§è¾¹æ ï¼Œèœå•çš„**é»‘æš—æ¨¡å¼**å’Œ**æ­£å¸¸æ¨¡å¼**çš„**é¢œè‰²å˜é‡è®¾ç½®**ä»¥åŠå¯¹**ä¸‰ç§ä¸»é¢˜ç±»å‹**çš„é¢œè‰²å˜é‡è®¾ç½®ï¼›å¦‚æœéœ€è¦**è‡ªå®šä¹‰æ›´å¤šä¸»é¢˜è‰²æˆ–æ›´æ”¹ä¸»é¢˜è‰²**å¯åœ¨æ­¤å¤„ä¿®æ”¹ã€‚
+ common.scss: é¡¹ç›®å…¨å±€æ ·å¼
    1. å®šä¹‰äº†é¡µé¢åŠ è½½è¿›åº¦æ¡`<font style="color:#ED740C;">nprogress</font>`çš„æ ·å¼--è‹¥äº§å“é£æ ¼ä¸å˜ï¼Œ`<font style="color:#ED740C;">nprogress</font>`çš„æ ·å¼æ— éœ€æ”¹åŠ¨
    2. å®šä¹‰äº†**å æ»¡å®¹å™¨å‰©ä½™éƒ¨åˆ†**çš„class`<font style="color:#ED740C;">flex-full</font>`ä»¥åŠå…¶è¡ç”Ÿç±»ï¼Œéœ€è¦å®šä¹‰**å æ»¡å®¹å™¨å‰©ä½™éƒ¨åˆ†**çš„å…ƒç´ å¯ç›´æ¥ä½¿ç”¨è¯¥class** **ã€‚



é‡ç‚¹ï¼š

+ å»ºè®®å¼€å‘è¿‡ç¨‹ä¸­å°½é‡ä½¿ç”¨å·²å®šä¹‰å¥½çš„[æ ·å¼å˜é‡](http://10.11.3.132:8082/platform/ebs_ui/blob/master/packages/theme-chalk/src/element/var.scss)è‡ªåŠ¨ç”Ÿæˆçš„cssså˜é‡è€Œéå®é™…æ ·å¼å€¼ï¼šæ¯”å¦‚ä½¿ç”¨ä¸»é¢˜è‰²ï¼Œä½¿ç”¨å¸¸ç”¨å­—ä½“å¤§å°ï¼Œå­—ä½“é¢œè‰²ç­‰ç­‰ã€‚
+ å…¶ä¸­[æ ·å¼å˜é‡](http://10.11.3.132:8082/platform/ebs_ui/blob/master/packages/theme-chalk/src/element/var.scss)ä¸­çš„scsså˜é‡æ˜¯æ ¹æ®elementPlusçš„å®šåˆ¶çš„ä¸»é¢˜èƒ½å¤Ÿè‡ªåŠ¨ç”Ÿæˆcsså˜é‡ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨ElementPlusçš„csså˜é‡å³å¯ï¼Œå¦‚ä¸»é¢˜è‰²var(--el-color-primary)

## å­—ä½“å›¾æ ‡ä½¿ç”¨
æœ¬é¡¹ç›®æ¨¡æ¿ä¸­åœ¨main.tsåˆ†åˆ«å¼•å…¥äº†åŸºç¡€å›¾æ ‡å’Œèœå•å›¾æ ‡å¦‚ä¸‹ï¼š

```typescript
// iconfont
/** å…¬å¸çš„é€šç”¨åŸºç¡€iconå›¾æ ‡
 * å›¾æ ‡åº“åœ°å€: https://www.iconfont.cn/manage/index?spm=a313x.manage_index.i1.db775f1f3.53683a81TEUz0d&manage_type=myprojects&projectId=4651197
 * è¯´æ˜ï¼š ä¸å¼•å…¥ä¹Ÿå¯é€šè¿‡ç»„ä»¶åº“ä¸­kr-svg-iconç»„ä»¶ä½¿ç”¨
 *  */
import '@/assets/iconfonts/common/iconfont.js'
/** å…¬å¸çš„èœå•å›¾æ ‡
 * å›¾æ ‡åº“åœ°å€: https://www.iconfont.cn/manage/index?spm=a313x.manage_index.i1.db775f1f3.53683a81TEUz0d&manage_type=myprojects&projectId=4616214
 * è¯´æ˜ï¼šæ¯ä¸ªç³»ç»Ÿè¦ç”¨çš„èœå•å›¾æ ‡åº“è¦ä¸èœå•é…ç½®ç³»ç»Ÿï¼ˆåº”ç”¨å¼€å‘å¹³å°ï¼‰ä¸ºèœå•é…ç½®çš„å›¾æ ‡ä¿æŒä¸€è‡´
 *  */
import '@/assets/iconfonts/menu/iconfont.js'


```

ä½¿ç”¨æ–¹æ³•ï¼š

1. å¼•å…¥åŸºç¡€å›¾æ ‡å’Œèœå•å›¾æ ‡æ–‡ä»¶
2. ä½¿ç”¨kr-svg-iconç»„ä»¶ï¼ˆç»„ä»¶æ•™ç¨‹è§[koron-uiç»„ä»¶åº“æ–‡æ¡£](http://10.11.228.190:8889)ï¼‰

æ³¨æ„ï¼šå„é¡¹ç›®è¦ä¸åº”ç”¨å¼€å‘å¹³å°åŠæ—¶æ²Ÿé€šè¿›è¡ŒåŒæ­¥å›¾æ ‡æ–‡ä»¶ï¼ˆåç»­å¯éƒ¨ç½²å›¾æ ‡ä¸ºåœ¨çº¿æ¨¡å¼ï¼ˆéœ€è¦æœ‰ä¸ªé™æ€èµ„æºæœåŠ¡åœ°å€ï¼Œç±»ä¼¼æ€æºå­—ä½“éƒ¨ç½²æ–¹å¼ï¼‰ï¼Œå¼•å…¥å›¾æ ‡æ–‡ä»¶é“¾æ¥åœ°å€å°±å¯åŒæ­¥äº†ï¼‰



## å¸ƒå±€ï¼ˆä¸€èˆ¬æ— éœ€æ”¹åŠ¨ï¼‰
è¯¥æ¡†æ¶çš„æ€»ä½“å¸ƒå±€å’Œå…¬å…±åŠŸèƒ½æ— ç‰¹æ®Šéœ€æ±‚ä¸€èˆ¬ä¸ç”¨æ”¹åŠ¨ï¼Œå¦‚æœå› ä¸ºæ¥å£æ•°æ®ç»“æ„æˆ–é€»è¾‘çš„è°ƒæ•´å¯å‚è€ƒä»¥ä¸‹å„ä¸ªéƒ¨åˆ†çš„ä»‹ç»å¸®åŠ©å¼€å‘è€…å¿«é€Ÿç†è§£å¼€å‘é€»è¾‘ä»è€Œèƒ½å¤Ÿæé«˜ç›¸åº”çš„å¼€å‘æ•ˆç‡ã€‚

### <font style="color:rgb(0, 0, 0);">é¡¶éƒ¨å¯¼èˆªçš„ä»‹ç»</font>
![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1733298160387-0d0220ed-6b4c-4f37-8828-f4d99fa23571.png)

#### <font style="color:rgb(0, 0, 0);">title</font>
ç³»ç»Ÿåç§°ï¼Œåœ¨æœ¬é¡¹ç›®ä¸­æ˜¯é€šè¿‡`src/layouts/components/Header/components/Title.vue`ç»„ä»¶æ¸²æŸ“çš„

é€šè¿‡**è¯·æ±‚åº”ç”¨åˆ—è¡¨**å’Œæœ¬åœ°é…ç½®çš„**APP_CODE**è¿‡æ»¤å‡ºè¯¥åº”ç”¨å¯¹è±¡è·å¾—title.

æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š

![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1733283076617-1f53947e-d9c6-480a-b215-bcdd47d8938e.png)

é‡ç‚¹ï¼šè‹¥éœ€è¦ä¿®æ”¹titleç›¸å…³é€»è¾‘å¯æ ¹æ®ä¸Šè¿°ä»‹ç»åœ¨ç›¸å…³ä»£ç ä½ç½®è¿›è¡Œé€»è¾‘ä¿®æ”¹ã€‚

#### <font style="color:rgb(0, 0, 0);">logo</font>
ç³»ç»Ÿlogoï¼Œåœ¨æœ¬é¡¹ç›®ä¸­æ˜¯åœ¨`src/layouts/layoutClassic/index.vue`æ¸²æŸ“logoå›¾ç‰‡å®ç°çš„ã€‚

![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1733284933418-9455f683-ceed-4f01-9c7c-e96d5448c115.png)

é‡ç‚¹ï¼šå…¶ä¸­logoå›¾ç‰‡åœ°å€ï¼š`@/assets/images/logo.png`ï¼Œå¦‚éœ€è¦ä¿®æ”¹ï¼Œæ›¿æ¢æ‰å›¾ç‰‡å³å¯

#### <font style="color:rgb(0, 0, 0);">å¯¼èˆªå³ä¾§ï¼š</font>
åœ¨æœ¬é¡¹ç›®ä¸­æ˜¯é€šè¿‡`src/layouts/components/Header/ToolBarRight.vue`ç»„ä»¶æ¸²æŸ“çš„

ç”±ç”¨æˆ·åç§°ï¼Œæ¶ˆæ¯æç¤ºï¼Œè®¾ç½®ä¸‰éƒ¨åˆ†ç»„æˆ

![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1733293738508-ecd8ae8d-a7e2-4989-b732-7636af061766.png)

##### <font style="color:rgb(0, 0, 0);">ç”¨æˆ·åç§°æ˜¾ç¤º</font>
Â é€šè¿‡çŠ¶æ€ç®¡ç†å™¨ä¸­userStoreçš„æ•°æ®è·å–ï¼š`userStore.loginUserInfo?.realName`

![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1733293765965-2136ac80-43f4-4869-bb80-b1a798eac5c8.png)

##### <font style="color:rgb(0, 0, 0);">æ¶ˆæ¯æç¤º</font>
åœ¨æœ¬é¡¹ç›®ä¸­æ˜¯é€šè¿‡`src/layouts/components/Header/components/Message.vue`ç»„ä»¶æ¸²æŸ“çš„ï¼Œç›¸å…³æ¶ˆæ¯çš„è¯·æ±‚æ¥å£ï¼ˆsrc/api/modules/commonmessage-listï¼‰åœ¨æ­¤å¤„è°ƒç”¨,å¦‚éœ€ä¿®æ”¹ç›¸å…³æ¶ˆæ¯çš„é€»è¾‘å¯åœ¨æ­¤å¤„è¿›è¡Œå¼€å‘ã€‚

##### <font style="color:rgb(0, 0, 0);">è®¾ç½®å›¾æ ‡ä¸­æ›´å¤šåŠŸèƒ½(è¿™é‡Œæ˜¯)</font>
<font style="color:rgb(0, 0, 0);">åœ¨æœ¬é¡¹ç›®ä¸­æ˜¯é€šè¿‡</font>`<font style="color:rgb(0, 0, 0);">src/layouts/components/Header/components/Setting.vue</font>`<font style="color:rgb(0, 0, 0);">ç»„ä»¶æ¸²æŸ“çš„</font>

<font style="color:rgb(0, 0, 0);">å…¶ä¸­åŒ…å«äº†ä¸ªäººä¿¡æ¯ï¼Œä¿®æ”¹å¯†ç ï¼Œè®¾ç½®çš®è‚¤ï¼Œè®¾ç½®è¯­è¨€ï¼Œè®¾ç½®å­—ä½“ï¼Œé€€å‡ºç™»å½•ç­‰åŠŸèƒ½ï¼Œè¯¦è§ç›¸å…³ç»„ä»¶å³å¯</font>

### <font style="color:rgb(0, 0, 0);">èœå•å¸ƒå±€çš„ä»‹ç»</font>
![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1733298195255-d6489460-71fe-4c5c-8bbd-8246570a9377.png)

èœå•çš„æ¸²æŸ“åœ¨`src/layouts/layoutClassic/index.vue`ä¸­å¼€å‘ï¼š

![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1733295183115-6e67633c-9efa-42e0-bf3e-c52cc467d3b9.png)

èœå•æ•°æ®æ˜¯menuListæ˜¯æ ¹æ®çŠ¶æ€ç®¡ç†å™¨authStoreçš„showMenuListGetè·å–çš„

### <font style="color:rgb(0, 0, 0);">tabé¡µç­¾çš„ä»‹ç»</font>
![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1733298245476-83cdfa17-d45b-45f7-8cbb-976385b5d93f.png)

è¯¥åŠŸèƒ½ç”¨äºæ–¹ä¾¿ç”¨æˆ·å¿«é€Ÿæ‰“å¼€å·²æ‰“å¼€çš„é¡µé¢

åœ¨æœ¬é¡¹ç›®ä¸­æ˜¯é€šè¿‡`src/layouts/components/Tabs`ç»„ä»¶æ¸²æŸ“çš„

é¡µç­¾çš„æ˜¾ç¤ºå…³é—­é€šè¿‡çŠ¶æ€ç®¡ç†å™¨`src/stores/modules/tabs.ts`è¿›è¡Œé€»è¾‘å¤„ç†çš„



# ç¬¬ä¸‰éƒ¨åˆ†:åŸºç¡€åŠŸèƒ½ä½¿ç”¨
## å…¬å…±ç»„ä»¶
å·²åœ¨main.tsä¸­è¿›è¡Œå…¨å±€æ³¨å†Œï¼Œå¯ç›´æ¥ä½¿ç”¨ã€‚

### <font style="color:rgb(0, 0, 0);">å·¦å³å¸ƒå±€ç»„ä»¶TwoColPage</font>
å›ºå®šå·¦ä¾§å®¹å™¨å®½åº¦ï¼Œå³ä¾§å®¹å™¨å æ»¡å‰©ä½™ç©ºé—´

æºç ä½ç½®ï¼š`src/components/TwoColPage`

ä½¿ç”¨æ—¶å·¦å³ä¸¤éƒ¨åˆ†åˆ†åˆ«é€šè¿‡å…·åæ’æ§½rightå’Œleftæ¸²æŸ“è¿›å»

```vue
<template>
  <TwoColPage>
    <template #left>
      <div></div>
    </template>
    <template #right>
      <div></div>
    </template>
  </TwoColPage>
</template>
```

<font style="color:rgb(44, 62, 80);">ä»£ç æ¼”ç¤ºå‚è€ƒ åº”ç”¨å¼€å‘å¹³å°ã€‹ç»„ç»‡ç®¡ç†ã€‹ç»„ç»‡ç»“æ„ï¼ˆsrc/views/organization/organization-item/index.vue)</font>

![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1733299653405-9bb7e1fe-0a4f-4c45-9dfe-8bbb58ea99a5.png)

![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1733912774459-a636d7e7-0de7-4a28-86dc-e1d668f354bc.png)

:::info
ç»Ÿä¸€çš„å¸ƒå±€ç»„ä»¶å¸®åŠ©ç³»ç»Ÿèƒ½å¤Ÿå¸ƒå±€ä¿æŒä¸€è‡´ï¼Œç»´æŠ¤æ›´æ–¹ä¾¿

:::

### é€‰äººç»„ä»¶UserSelect
ä½œä¸ºè¡¨å•æ§ä»¶ï¼Œç‚¹å‡»è¯¥æ§ä»¶ï¼Œå¼¹å‡ºå·¦ç»„ç»‡å³ç”¨æˆ·çš„é€‰äººå¼¹çª—.

æ³¨æ„ï¼šè¯¥ç»„ä»¶å±äºä¸šåŠ¡ç»„ä»¶ï¼šåœ¨è¯¥ç»„ä»¶å†…æ˜¯è¯·æ±‚äº†ç»„ç»‡ï¼Œäººå‘˜ç­‰æ¥å£ï¼Œæ•°æ®å­—æ®µæ˜¯ç¡®å®šçš„ï¼Œæ‰€ä»¥åœ¨ä¸ºmodelValueèµ‹å€¼æ—¶æ³¨æ„è¦æ±‚çš„æ•°æ®ç±»å‹

æºç ä½ç½®ï¼š`src/components/UserSelect`

å¯é€šè¿‡multipleå±æ€§é…ç½®å¤šé€‰ è¿˜æ˜¯å•é€‰ï¼›é€šè¿‡default-value ä¸ºæ§ä»¶åˆå§‹åŒ–æ‰€é€‰äººå‘˜ï¼Œé€šè¿‡changeäº‹ä»¶è·å¾—å·²é€‰äººå‘˜

è¯¥ç»„ä»¶å±æ€§åŠäº‹ä»¶è¯´æ˜å¦‚ä¸‹ï¼š

å±æ€§

| å±æ€§å | è¯´æ˜ | ç±»å‹ | é»˜è®¤å€¼ |
| --- | --- | --- | --- |
| default-value  | åˆå§‹åŒ–å·²é€‰æ•°æ®(å¿…ä¼ ) | `SelStaff`[] | [] |
| multiple | æ˜¯å¦å¤šé€‰ | boolean | true |


äº‹ä»¶

| äº‹ä»¶å | è¯´æ˜ | Type |
| --- | --- | --- |
| change | å½“ç‚¹å‡»ç¡®å®šæŒ‰é’®è§¦å‘çš„äº‹ä»¶ | Function:(ids:string[],selectedData:`User.Staff`[] ) => void |


å…¶ä¸­`SelStaff`ç»“æ„ä¸­çš„staffIdå¿…é¡»ä¼ é€’ï¼š

```typescript
interface SelStaff {
  staffId: number // å‘˜å·¥ID
  [property: string]: any
}
```

`User.Staff ` æ¥æºäº 'src/api/modules/common/user',æ•°æ®ç»“æ„å¦‚ä¸‹ï¼š

```vue
interface Staff {
    /**
     * è´¦å·çŠ¶æ€(1æ­£å¸¸ï¼›2å†»ç»“)
     */
    accountStatus: AccountStatus
    /**
     * åº”ç”¨code
     */
    appCode?: string
    /**
     * å¤´åƒ
     */
    avatar?: string
    /**
     * ç”Ÿæ—¥
     */
    birthday?: Date
    /**
     * ç›´æ¥ä¸Šçº§
     */
    directSupervisor?: string
    /**
     * å²—ä½ç¼–ç 
     */
    dutyCode?: number
    /**
     * é‚®ç®±
     */
    email: string
    /**
     * è‹±æ–‡å
     */
    englishName?: string
    /**
     * æ€§åˆ«(1ç”·ï¼›2å¥³ï¼›)
     */
    gender: Gender
    /**
     * æ˜¯å¦å®ä½“ç”¨æˆ·
     */
    isEntityUser: boolean
    /**
     * æ‰‹æœºå·
     */
    mobile: string
    /**
     * ç»„ç»‡Nodeåç§°
     */
    orgNodeName?: string
    /**
     * èŒåŠ¡ç¼–ç 
     */
    positionCode?: number
    /**
     * å§“å
     */
    realName: string
    /**
     * å‘˜å·¥ID
     */
    staffId: number
    /**
     * å‘˜å·¥çŠ¶æ€(1åœ¨èŒï¼›2ç¦»èŒï¼›3ä¼‘å‡)
     */
    staffStatus: StaffStatus
    /**
     * æ›´æ–°æ—¶é—´ï¼Œç³»ç»Ÿè‡ªåŠ¨èµ‹å€¼
     */
    updateTime?: Date
    /**
     * æ›´æ–°äººï¼Œç³»ç»Ÿè‡ªåŠ¨èµ‹å€¼ç”¨æˆ·è´¦å·
     */
    updateUser?: string
    /**
     * ç”¨æˆ·ç™»å½•å
     */
    username: string
    /**
     * å·¥å·
     */
    workNo: string
    [property: string]: any
  }
```

ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š

```vue
<template>
   <UserSelect
    :default-value="selectUser"
    :multiple="false"
    @change="userSelChange"
  ></UserSelect>
</template>
<script setup lang="ts" name="TrustFormDialog">
import { ref, reactive } from 'vue'
import type { User } from '@/api/modules/common/user'
import UserSelect from '@/components/UserSelect/index.vue'

const model = ref<{ [key: string]: any }>({})

// é€‰ä¸­çš„äºº
const selectUser = ref<
  {
    staffId: number // å‘˜å·¥ID
    [property: string]: any
  }[]
>([])

const userSelChange = (ids: (string | number)[], data: User.Staff[]) => {
  const selectedObj = data[0]
  model.value.delegateId = ids.join(',')
  model.value.delegateName = selectedObj.realName
  model.value.delegateDeptId = selectedObj.orgNodeId
  model.value.delegateDeptName = selectedObj.orgNodeName
  model.value.delegate = model.value.delegateName ? model.value.delegateName + '/' + model.value.delegateDeptName : null
}

</script>
```

<font style="color:rgb(44, 62, 80);">ä»£ç æ¼”ç¤ºå‚è€ƒ åº”ç”¨å¼€å‘å¹³å°ã€‹æµç¨‹ä¸­å¿ƒã€‹æˆ‘çš„å§”æ‰˜ã€‹æˆ‘ç»™ä»–äººçš„å§”æ‰˜ã€‹æ–°å¢ï¼ˆsrc/views/workflow/modules/trust-task/FormDialog.vue)</font>

![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1733305530401-270f4eda-02c1-45b0-a1ea-be43e2de046c.png)

![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1733305541132-295f991c-bf45-41d2-92b0-ced9c63780af.png)

![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1733305419494-a38c4368-ab13-4408-99be-ad7225d85376.png)

## å›½é™…åŒ–
æœ¬é¡¹ç›®ä¸­å›½é™…åŒ–åˆ†ä¸ºé™æ€æ•°æ®å¤šè¯­è¨€é…ç½®å’ŒåŠ¨æ€æ•°æ®å¤šè¯­è¨€é…ç½®

æœ¬é¡¹ç›®åŸºäºvue-i18nå®ç°å›½é™…åŒ–çš„ï¼Œå®ç°çš„åŸºæœ¬æ€è·¯å¦‚ä¸‹ï¼š

### <font style="color:rgb(25, 27, 31);"> å®šä¹‰è¯­è¨€åŒ…ï¼š</font>
<font style="color:rgb(25, 27, 31);">éœ€è¦å‡ ç§è¯­è¨€å±•ç¤ºï¼Œå°±å®šä¹‰å‡ ä¸ªè¯­è¨€åŒ…,æœ¬é¡¹ç›®æ¨¡æ¿ä¸­åªå®šä¹‰äº†ä¸‰ç§è¯­è¨€ï¼Œ</font>

:::info
**<font style="color:rgb(25, 27, 31);">å¦‚æœéœ€è¦é…ç½®å…¶ä»–è¯­è¨€ï¼Œå¯åœ¨</font>**<font style="color:rgb(25, 27, 31);">languages/modulesä¸‹</font>**<font style="color:rgb(25, 27, 31);">å¢åŠ ç›¸åº”è¯­è¨€åŒ…ã€‚</font>**

:::

![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1732869676907-8b2ab086-0808-41be-87b3-c905440c67b2.png)

### **<font style="color:rgb(25, 27, 31);">åˆ›å»ºå¯¹è±¡ï¼Œå¯¹è¯­è¨€åŒ…è¿›è¡Œæ•´åˆ</font>**
<font style="color:rgb(25, 27, 31);">å¯¹è±¡çš„ key ä¸ºè¯­è¨€åŒ…çš„å¼•ç”¨ï¼Œå€¼ä¸ºè¯­è¨€åŒ…å¯¹è±¡</font>

<font style="color:rgb(25, 27, 31);">åœ¨é¡¹ç›®ä¸­åˆ›å»ºè¯­è¨€åŒ…æ–‡ä»¶å¤¹languages/modulesä¸­å­˜æ”¾éœ€è¦çš„è¯­è¨€åŒ…tsæ–‡ä»¶ï¼Œä¾‹å¦‚åˆ›å»ºzh-hans.ts,zh-hant.tså’Œen-us.tsä¸‰ä¸ªè¯­è¨€ï¼Œæ¯ç§è¯­è¨€åŒ…ä¸­é”®åæ˜¯è‡ªå®šä¹‰çš„ï¼Œåé¢ä¼šåœ¨ç»„ä»¶ä¸­ä½¿ç”¨ã€‚ä¾‹å¦‚è¯­è¨€åŒ…éƒ¨åˆ†é…ç½®å¦‚ä¸‹ï¼š</font>

```typescript
export default {
  header: {
    personalData: 'ä¸ªäººä¿¡æ¯',
    changePassword: 'ä¿®æ”¹å¯†ç ',
    theme: 'è®¾ç½®çš®è‚¤',
    themeConfig: {},
    language: 'è®¾ç½®è¯­è¨€',
    fontSizeConfig: 'è®¾ç½®å­—ä½“',
    version: 'ç‰ˆæœ¬',
    logout: 'é€€å‡ºç™»å½•',
    system: 'åå°ç®¡ç†ç³»ç»Ÿ',
    def: 'é»˜è®¤'
  }
} 
```

```typescript
export default{
  header: {
    personalData: 'Profile',
    changePassword: 'Change Password',
    theme: 'Look And Feel',
    language: 'Language',
    fontSizeConfig: 'Font Size',
    version: 'Version',
    logout: 'Log Out',
    system: 'BackGround Manage System'
  }
}
```

:::info
**<font style="color:rgb(25, 27, 31);">é‡ç‚¹ï¼šå¦‚æœéœ€è¦é…ç½®å…¶ä»–ç³»ç»Ÿå†…çš„é™æ€æ–‡å­—ï¼Œå¯åœ¨å„ä¸ªè¯­è¨€åŒ…ä¸­å¢åŠ ç›¸åº”é”®å€¼ã€‚</font>**

:::

#### é™æ€å¤šè¯­è¨€é…ç½®
é™æ€å¤šè¯­è¨€é…ç½®åœ¨å‰ç«¯é¡¹ç›®æœ¬åœ°é…ç½®:ç³»ç»Ÿå†…é™æ€æ–‡å­—

åœ¨src/languages/moduleså„ä¸ªè¯­è¨€åŒ…å†…é…ç½®

1. å¸ƒå±€å¤´éƒ¨å„ä¸ªåŠŸèƒ½çš„æ–‡å­—æ˜¾ç¤º

![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1732874107526-68b4cbdf-10f6-4059-961f-5020c805ae1d.png)

2. httpé”™è¯¯ç çš„æç¤ºä¿¡æ¯å’Œé”™è¯¯é¡µé¢çš„æ–‡å­—

![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1732874462837-197265fd-2416-4b15-a0dd-f0ef3e93c94b.png)

3. ç™»å½•æ¨¡å—çš„æ–‡å­—ä¿¡æ¯

![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1732874498807-61fcd47f-89a7-45a7-a1a5-a6305ef418c4.png)

4. æµç¨‹ç›¸å…³çš„æ–‡å­—æ˜¾ç¤º

![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1732874521784-8c0d26b0-ddc9-49ed-bfee-b3d26d6eac34.png)

#### åŠ¨æ€å¤šè¯­è¨€é…ç½®
åŠ¨æ€æ•°æ®å¤šè¯­è¨€é€šè¿‡æ¥å£è¯·æ±‚è·å¾—

ä¸€èˆ¬å„ä¸ªæ¨¡å—çš„è¡¨æ ¼å­—æ®µï¼Œè¡¨å•å­—æ®µç­‰éƒ½æ˜¯é€šè¿‡åœ¨**åº”ç”¨å¼€å‘å¹³å°**é…ç½®è¯æ¡ï¼Œç„¶åå†åœ¨é¡¹ç›®ä¸­åŠ è½½è·å–çš„ã€‚

:::info
é‡ç‚¹ï¼šéœ€è¦é…ç½®è¯­è¨€å’Œè¯­è¨€è¯æ¡è¯·é€šè¿‡**åº”ç”¨å¼€å‘å¹³å°**é…ç½®ã€‚

:::

å®ç°åŸç†ï¼ˆå¯ä¸çœ‹ï¼‰ï¼š

åœ¨è·¯ç”±æ‹¦æˆªå¤„é€šè¿‡çŠ¶æ€ç®¡ç†å™¨ä¸­src/stores/modules/language.tsä¸­çš„isSetLanguageåˆ¤æ–­æ˜¯å¦å·²åŠ è½½è¿‡è¯æ¡

![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1733124886761-6f1cd373-49a7-4083-84d3-4b3c9f6e9704.png)

è‹¥æœªåŠ è½½å°±ä¼šé€šè¿‡çŠ¶æ€ç®¡ç†å™¨ä¸­çš„setLanguageListæ–¹æ³•è¿›è¡Œè¯·æ±‚è¯¥åº”ç”¨çš„è¯­è¨€ç§ç±»å’Œå„è¯­è¨€ç§ç±»å¯¹åº”çš„è¯æ¡ï¼Œå„ç±»è¯­è¨€è¯·æ±‚çš„è¯æ¡åˆ†åˆ«ä¸æœ¬åœ°è¯­è¨€åŒ…è¿›è¡Œå¯¹æ¯”ï¼šç›¸åŒkeyå€¼çš„ï¼Œè¯·æ±‚çš„æ•°æ®ä¼šè¦†ç›–æ‰æœ¬åœ°è¯­è¨€åŒ…ä¸­ç›¸åº”çš„å€¼ã€‚

![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1733127904828-cb819a6e-fcf2-4f61-ac6f-5fd796fa037b.png)

### <font style="color:rgb(25, 27, 31);">å¼•å…¥è¯­è¨€åŒ…</font>
#### å¼•å…¥æœ¬åœ°è¯­è¨€åŒ… (å¯ä¸çœ‹)
å®ç°åŸç†ï¼ˆå¯ä¸çœ‹ï¼‰ï¼š

åœ¨src/languages/index.tså¼•å…¥æœ¬åœ°è¯­è¨€åŒ…ï¼Œå¹¶åˆ›å»ºi18nå®ä¾‹æŠ›å‡ºã€‚

```typescript
import { createI18n } from 'vue-i18n'
import { getBrowserLang } from '@/utils'

// å®šä¹‰ä¸€ä¸ªé€šç”¨çš„åµŒå¥—å¯¹è±¡ç±»å‹
interface NestedObject {
  [key: string]: any // æ‰€æœ‰å±æ€§å¯ä»¥æ˜¯ä»»æ„ç±»å‹
}

// å¼•å…¥ç›®å½•ä¸‹æ–‡ä»¶
const modules = import.meta.glob('./modules/*', { eager: true })
/**
 * è·å–æ‰€æœ‰æœ¬åœ°è¯­è¨€æ–‡ä»¶
 * @param {Object} mList
 */
function getLangFiles(mList: NestedObject): NestedObject {
  const msg: NestedObject = {}
  for (const path in mList) {
    if (mList[path].default) {
      const pathName = path.slice(path.lastIndexOf('/') + 1, path.length - 3) //  è·å–æ–‡ä»¶å
      if (msg[pathName]) {
        msg[pathName] = {
          ...mList[pathName],
          ...mList[path].default
        }
      } else {
        msg[pathName] = mList[path].default
      }
    }
  }
  return msg
}
export const message = getLangFiles(modules) // è·å–æ‰€æœ‰æœ¬åœ°è¯­è¨€æ–‡ä»¶

// åˆ›å»ºi8å®ä¾‹
const i18n = createI18n({
  allowComposition: true,
  legacy: false,
  locale: getBrowserLang(),
  messages: message
})

export default i18n


```

#### å¼•å…¥åŠ¨æ€æ•°æ®è¯­è¨€åŒ…(å¯ä¸çœ‹)
å®ç°åŸç†ï¼ˆå¯ä¸çœ‹ï¼‰ï¼š

åœ¨src/stores/modules/language.tsä¸­å¼•å…¥i18nå®ä¾‹ï¼Œå¹¶åœ¨è·å–åˆ°åŠ¨æ€æ•°æ®è¯­è¨€åŒ…åè¿›è¡Œè¯­è¨€åŒ…é…ç½®ï¼š

![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1733132664579-6c301858-a221-44a7-b7b6-f38305702f14.png)

#### å¼•å…¥ç¬¬ä¸‰æ–¹è¯­è¨€åŒ…
å¦‚æœéœ€è¦å¼•å…¥å…¶ä»–ç¬¬ä¸‰æ–¹è¯­è¨€åŒ…å¯æŒ‰ç…§ä¸‹æ–¹å®ç°æ–¹å¼å¼•å…¥ï¼š

åœ¨æœ¬é¡¹ç›®App.vueä¸­éœ€è¦å¼•å…¥elementPlusè¯­è¨€åŒ…å’ŒkoronUiè¯­è¨€åŒ…

![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1733133244143-115cdec7-d3fc-4293-a762-ad17d6fc1648.png)

æœ¬é¡¹ç›®ä¸­ä¹Ÿåšäº†åŠ¨æ€åˆ‡æ¢è¯­è¨€çš„åŠŸèƒ½ï¼š

src/layouts/components/Header/components/Language.vue

![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1733133389050-7daaeb89-fb1f-47c9-b072-922d43fb395c.png)

src/App.vue

![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1733133333626-0af6ca94-68a3-4b7d-871d-184a58a9c21d.png)

### <font style="color:rgb(25, 27, 31);">æŒ‚è½½å¯¹è±¡</font>
å®ç°åŸç†ï¼ˆå¯ä¸çœ‹ï¼‰ï¼š

<font style="color:rgb(25, 27, 31);">åœ¨é¡¹ç›®çš„ä¸»å…¥å£æ–‡ä»¶ä¸­æŒ‚è½½i18nå¯¹è±¡ï¼Œä¾‹å¦‚main.tsä¸­ï¼š</font>

```typescript
// vue i18n
import I18n from '@/languages/index'
// App.vue
import App from './App.vue'
const app = createApp(App)
app.use(I18n)
```

### ä½¿ç”¨ï¼ˆé‡ç‚¹ï¼‰
#### **<font style="color:rgb(25, 27, 31);">åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨</font>**
å‚è€ƒï¼šsrc/views/login/components/ResetPassword.vue

```html
<el-input
  :placeholder="$t('login.resetPassword.smsPlaceholder')"
  clearable
>
  <template #suffix>
    <el-button
      type="primary"
      class="w-full code"
      >{{ $t('login.resetPassword.getSmsCode') }}</el-button
    >
  </template>
</el-input>
```

#### åœ¨vueæ–‡ä»¶ä¸­scriptä¸­ä½¿ç”¨
å‚è€ƒï¼šsrc/views/login/components/ResetPassword.vue

```html
<script setup lang="ts">
  import { ElMessageBox, ElMessage } from 'element-plus'
  import { useI18n } from 'vue-i18n'
  const { t } = useI18n()
  const logout = () => {
    ElMessageBox.confirm(t('common.loginOutMessage'), t('common.reminder'), {
      confirmButtonText: t('common.ok'),
      cancelButtonText: t('common.cancel'),
      type: 'warning'
    }).then(async () => {
      ElMessage.success(t('common.ok'))
    })
  }
</script>
```

#### åœ¨æ™®é€štsæˆ–jsæ–‡ä»¶ä¸­ä½¿ç”¨ï¼š
å‚è€ƒï¼šsrc/api/helper/check-status.ts

åœ¨æ–‡ä»¶ä¸­å¼•å…¥I18nå®ä¾‹,ç„¶åä½¿ç”¨å®ä¾‹çš„globalå¯¹è±¡ä¸­çš„tæ–¹æ³•

```typescript
import { ElMessage } from 'element-plus'
import I18n from '@/languages/index'
const { t } = I18n.global as any
ElMessage.error(t('error.400'))
```

## è·¯ç”±ã€èœå•
è·¯ç”±é…ç½®åœ¨ [src/routers](https://github.com/HalseySpicy/Geeker-Admin/tree/master/src/routers) æ–‡ä»¶ä¸‹é¢ï¼š

:::info
+ é¡¹ç›®é»˜è®¤é‡‡ç”¨åŠ¨æ€æ·»åŠ è·¯ç”±æ–¹å¼æ§åˆ¶
+ éœ€è¦å…¶å®ƒè·¯ç”±åŠŸèƒ½æ ¹æ®è‡ªå·±é¡¹ç›®éœ€æ±‚æ”¹é€ 

:::

### ç›®å½•ç»“æ„
```plain
.
â”œâ”€ routers                    # è·¯ç”±ç›¸å…³æ–‡ä»¶
â”œ â”œâ”€ modules                  # è·¯ç”±æ¨¡å—
â”œ â”œ â”œâ”€ dynamicRouter.ts       # åŠ¨æ€è·¯ç”±æ·»åŠ é€»è¾‘
â”œ â”‚ â””â”€ staticRouter.ts        # é™æ€è·¯ç”±é…ç½®
â”œ â””â”€index.ts                  # å°è£…åçš„è·¯ç”±æ‹¦æˆª
â””â”€
```

### è·¯ç”±å‚æ•°
```typescript
/** è·¯ç”±å‚æ•°ç®€ä»‹ */
interface RouteRecordRaw {
    /** è·¯ç”±è®¿é—®è·¯å¾„ */
    path: string;
    /** è·¯ç”± name */
    name: string;
    /** è·¯ç”±é‡å®šå‘åœ°å€ */
    redirect?: string;
    /** è§†å›¾æ–‡ä»¶è·¯å¾„ */
    component: string | (() => Promise<unknown>);
    /** è·¯ç”±å…ƒä¿¡æ¯ */
    meta: {
       /**å¤–é“¾åœ°å€ */
        url?:string;
        /** èœå•å’Œé¢åŒ…å±‘å¯¹åº”çš„å›¾æ ‡ */
        icon: string;
      
        /** è·¯ç”±æ ‡é¢˜ (ç”¨ä½œ document.title || èœå•çš„åç§°) */
        title: string;
      
        /** æ˜¯å¦åœ¨èœå•ä¸­éšè— (é€šå¸¸åˆ—è¡¨è¯¦æƒ…é¡µéœ€è¦éšè—) */
        hide: boolean;

        /** å½“å‰è·¯ç”±æ˜¯å¦ç¼“å­˜ */
        isKeepAlive: boolean;
        /** èœå•æ˜¯å¦å›ºå®šåœ¨æ ‡ç­¾é¡µä¸­ (é¦–é¡µé€šå¸¸æ˜¯å›ºå®šé¡¹) */
        isAffix:boolean;
       /** èœå•æ˜¯å¦å…¨å± (ç¤ºä¾‹ï¼šæ•°æ®å¤§å±é¡µé¢) */
        isFull: boolean;
        /** èœå•æ˜¯å¦å†…åµŒåœ¨layoutä¸‹ */
        isInner:boolean;
        /** å¤–é“¾èœå•åœ¨æ–°é¡µç­¾ä¸­æ‰“å¼€ */
        isOut:boolean;
    };
    /** å¤šçº§è·¯ç”±åµŒå¥— */
    children: RouteRecordRaw[];
}
```

:::warning
+ å½“pathä»¥"http://"æˆ–"https://"å¼€å¤´æ—¶è®¤ä¸ºæ˜¯å¤–é“¾ï¼›
+ èœå•æ‰“å¼€æ–¹å¼ï¼šå†…åµŒï¼Œå…¨å±ï¼Œæ–°é¡µç­¾ï¼Œä¸‰ä¸ªæ–¹å¼æ˜¯äº’æ–¥çš„ã€‚
+ æ–°é¡µç­¾æ–¹å¼åœ¨pathé…ç½®çš„æ˜¯å¤–é“¾æ—¶èµ·ä½œç”¨ï¼Œå¦åˆ™å½“ä½œå†…åµŒèœå•å¤„ç†ï¼›å†…åµŒï¼Œå…¨å±æ— è®ºpathæ˜¯æ™®é€šèœå•è·¯å¾„è¿˜æ˜¯å¤–é“¾éƒ½èµ·ä½œç”¨ï¼›

:::

### è·¯ç”±å®ç°
+ é»˜è®¤æ ¹æ®åç«¯æ¥å£è¿”å›çš„æ•°æ®ç”ŸæˆåŠ¨æ€è·¯ç”±,åœ¨utils/router-helper.tsä¸­çš„generateRouteæ–¹æ³•å¯¹åŸå§‹åç«¯æ•°æ®è¿›è¡Œå¤„ç†è¿”å›RouteRecordRawæ¥å£å¯¹åº”ç»“æ„çš„è·¯ç”±æ•°æ®

```typescript
// å¤„ç†æ ‘ç»“æ„çš„åŸå§‹æ•°æ®ä¸ºè·¯ç”±éœ€è¦çš„
export function generateRoute(data: any[], parentPath: string, parentStatus: boolean, arr: any[]) {
  data.forEach((item, index) => {
    if (item.style === 3) {
      return
    }
    arr.push({
      path: `${parentPath}/${item.path}`,
      name: `${item.interfaceItemId}`,
      meta: {
        icon: item.icon,
        title: item.name,
        hide: item.hide,
        isKeepAlive: item.keepAlive,
        isAffix: false,
        isFull: item.openMode === '2',
        isInner: item.openMode === '1',
        isOut: item.openMode === '3'
      },

      children: []
    })

    if (isHttp(item.path)) {
      arr[index].meta.url = item.path
      // å¤–é“¾çš„èœå•ï¼šæ— ç»„ä»¶ï¼Œæ— å­èœå•
      arr[index].component = ''
      arr[index].name = `${parentPath.replace(/\//g, '_').substring(1)}_${item.interfaceItemId}`
      delete arr[index].children
      if (item.openMode === '1' || item.openMode === '2') {
        arr[index].path = `${parentPath}/${item.interfaceItemId}`
        arr[index].component = InnerLink
      } else {
        arr[index].path = item.path
      }
    } else {
      // èœå•ç±»å‹çš„ï¼š
      if (item.component && typeof item.component === 'string') {
        // é…ç½®çš„ç»„ä»¶è·¯å¾„ä¸å­˜åœ¨æ—¶ï¼Œä¼šèµ‹å€¼ä¸ºundefined
        arr[index].component = modules['/src/views' + item.component + '.vue']
      }
      if (item.children && item.children.length > 0) {
        const list = item.children
        arr[index].redirect = `${parentPath}/${item.path}/${list[0].path}`
        generateRoute(item.children, `${parentPath}/${item.path}`, parentStatus && item.status, arr[index].children)
      } else {
        delete arr[index].children
      }
    }
  })
  return arr
}
```



+ å¦‚æœæƒ³æŠŠè·¯ç”±å˜æˆæœ¬åœ°ï¼Œç›´æ¥æ›´æ”¹ [src/api/modules/common/login.ts => getAutInfoApi](http://10.11.3.132:8082/platform/ebs_vue3_template/blob/master/src/api/modules/common/login.ts) æ–¹æ³•

```typescript
import authInfo from "@/assets/json/auth-info.json";

// è·å–æƒé™ä¿¡æ¯
export const getAuthUserApi = (params: Login.AuthUser) => {
  //return http.post(PORT_SYSTEM + `/client/user-auth-info`, params)
  // å¦‚æœæƒ³è®©èœå•å˜ä¸ºæœ¬åœ°æ•°æ®ï¼Œæ³¨é‡Šä¸Šä¸€è¡Œä»£ç ï¼Œå¹¶å¼•å…¥æœ¬åœ° authMenuList.json æ•°æ®
  return authInfo
}
```

### ç”Ÿæˆçš„è·¯ç”±ç»“æœ
#### ä¸€çº§è·¯ç”±
```typescript
const home = {
    "path": "/admin_portal/home",
    "name": "Home",
    "meta": {
        "icon": "anli",
        "parentIcon": "anli",
        "title": "é¦–é¡µ",
        "hide": false,
        "alwaysShow": false,
        "isKeepAlive": false,
        "isFull": false,
        "isAffix": false,
        "isInner": true,
        "isOut": false
    }
};
```

#### äºŒçº§è·¯ç”±
```typescript
const application = {
    "path": "/admin_portal/applyfolder",
    "name": "Applyfolder",
    "redirect": "/admin_portal/applyfolder/application"
    "meta": {
        "icon": "",
        "parentIcon": "",
        "title": "åº”ç”¨ç®¡ç†",
        "hide": false,
        "alwaysShow": false,
        "isKeepAlive": false,
        "isFull": false,
        "isAffix": false,
        "isInner": true,
        "isOut": false
    },
    "children": [
        {
            "path": "/admin_portal/applyfolder/application",
            "name": "Application",
            "meta": {
                "icon": "yingyongzhuce",
                "parentIcon": "yingyongzhuce",
                "title": "åº”ç”¨ç®¡ç†",
                "hide": false,
                "alwaysShow": false,
                "isKeepAlive": false,
                "isFull": false,
                "isAffix": false,
                "isInner": true,
                "isOut": false
            }
        },
        {
            "path": "/admin_portal/applyfolder/application/permission",
            "name": "Application/permission",
            "meta": {
                "icon": "zhuceyouli",
                "parentIcon": "zhuceyouli",
                "title": "æƒé™é¡¹ç®¡ç†",
                "hide": false,
                "alwaysShow": false,
                "isKeepAlive": false,
                "isFull": false,
                "isAffix": false,
                "isInner": true,
                "isOut": false
            }
        }
    ],
    
};
```

### èœå•
+ æ ¹æ®åå°è¿”å›çš„èœå•æ•°æ®è½¬æ¢è€Œæ¥
+ æ‰€ä»¥åªè¦æ›´æ”¹åå°æ•°æ®èœå•ä¼šéšä¹‹æ”¹å˜ï¼Œæ•´ä¸ªé¡¹ç›®åªéœ€ç»´æŠ¤ä¸€å¥—æ•°æ®å³å¯

:::info
+ èœå•å±•ç¤ºæ—¶éœ€è¦è¿‡æ»¤æ‰ hide å±æ€§ä¸º true çš„è·¯ç”±

:::

+ utils/router-helper.tsï¼š

```typescript
/**
 * @description ä½¿ç”¨é€’å½’è¿‡æ»¤å‡ºéœ€è¦æ¸²æŸ“åœ¨å·¦ä¾§èœå•çš„åˆ—è¡¨ (éœ€å‰”é™¤ hide == true çš„èœå•)
 * @param {Array} menuList èœå•åˆ—è¡¨
 * @returns {Array}
 * */
export function getShowMenuList(menuList: AppRouteRecordRaw[]) {
  const newMenuList: AppRouteRecordRaw[] = JSON.parse(JSON.stringify(menuList))
  return newMenuList.filter((item) => {
    item.children?.length && (item.children = getShowMenuList(item.children))
    return !item.meta?.hide
  })
}
```

## æƒé™ç®¡ç†
### æƒé™çš„é…ç½®
åœ¨**åº”ç”¨å¼€å‘å¹³å°**è¿›è¡Œèœå•é…ç½®ï¼ŒæŒ‰é’®é…ç½®ï¼Œç„¶ååœ¨æƒé™ç®¡ç†å¤„è¿›è¡Œä¸ºè§’è‰²é…ç½®æƒé™èœå•å’Œæƒé™æŒ‰é’®

#### æƒé™é¡¹é…ç½®
ä¸»è¦æ˜¯ä¸ºåŠŸèƒ½æŒ‰é’®é…ç½®æƒé™æ ‡è¯†ï¼Œä»¥ä¾¿åç»­è¿›è¡Œæƒé™é…ç½®ï¼Œå‰ç«¯å¼€å‘è€…ä¹Ÿåº”ä¸åç«¯å¼€å‘è€…åå•†å¥½å¯¹åº”çš„æƒé™æ ‡è¯†åœ¨æ­¤é…ç½®ï¼Œä»¥ä¾¿åç»­æƒé™æŒ‰é’®çš„ä½¿ç”¨ã€‚

![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1733280709573-6945067d-1b60-415c-95ab-5726cfc04033.png)

#### èœå•é…ç½®
![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1733195937673-5357cf17-863f-4a3c-a832-26ff81db5c6e.png)

![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1733196439856-24345508-b540-425a-aff8-d4990ffb1657.png)

èœå•çš„é…ç½®åˆ†ä¸º3ç±»ï¼šç›®å½•ï¼Œèœå•ï¼ŒæŒ‰é’®ï¼Œåˆ†åˆ«éœ€è¦é…ç½®çš„å±æ€§ä¸å°½ç›¸åŒ

ç›®å½•ï¼š

![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1733214319388-f1d97011-971e-4489-82ee-79ae7f3135b0.png)

èœå•ï¼š

![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1733214332309-3d630dfd-5403-473f-bac2-50821e24d4e3.png)

æŒ‰é’®é…ç½®ï¼š

![](https://cdn.nlark.com/yuque/0/2024/png/38559051/1733214297551-c836348c-a40d-419f-a4ae-0c1f4b905038.png)

å…·ä½“é…ç½®è§„åˆ™è§ä¸‹æ–¹**æƒé™çš„ä½¿ç”¨**å­—æ®µå¯¹ç…§å…³ç³»å¤„

### æƒé™çš„ä½¿ç”¨
#### èœå•æƒé™çš„ä½¿ç”¨
åœ¨å¹³å°å¤„é…ç½®çš„ç›¸å…³å±æ€§é€šè¿‡è¯·æ±‚æ¥å£ï¼ˆ [src/api/modules/common/login.ts => getAuthUserApi](http://10.11.3.132:8082/platform/ebs_vue3_template/blob/master/src/api/modules/common/login.ts) æ–¹æ³•ï¼‰è·å–å½“å‰ç”¨æˆ·çš„æƒé™èœå•ï¼Œç„¶åé€šè¿‡utils/router-helper.tsä¸­çš„generateRouteæ–¹æ³•å¯¹åŸå§‹åç«¯æ•°æ®è¿›è¡Œå¤„ç†è¿”å›RouteRecordRawæ¥å£å¯¹åº”ç»“æ„çš„è·¯ç”±æ•°æ®ï¼Œå…·ä½“å­—æ®µå¯¹ç…§å…³ç³»å¦‚ä¸‹ï¼ˆä¹Ÿæ˜¯**<font style="color:#FFFFFF;background-color:#DF2A3F;">ç›®å½•èœå•æŒ‰é’®çš„é…ç½®è§„åˆ™</font>**ï¼‰ï¼š

1. **èœå•åç§°**(name):  å¯¹åº”è·¯ç”±çš„metaä¸­çš„titleå­—æ®µ
2. **é¡µé¢æ‰“å¼€æ–¹å¼**(openMode):
+ å€¼ä¸º1æ˜¯**å†…åµŒ** å¯¹åº”è·¯ç”±çš„meta.isInnerä¸ºtrue,
+ å€¼ä¸º2æ˜¯**å…¨å±** å¯¹åº”è·¯ç”±çš„meta.isFullä¸ºtrue,
+ å€¼ä¸º3æ˜¯**æ–°é¡µç­¾** å¯¹åº”è·¯ç”±çš„meta.isOutä¸ºtrue,

:::warning
+ å½“pathä»¥"http://"æˆ–"https://"å¼€å¤´æ—¶è®¤ä¸ºæ˜¯å¤–é“¾ï¼›
+ èœå•æ‰“å¼€æ–¹å¼ï¼šå†…åµŒï¼Œå…¨å±ï¼Œæ–°é¡µç­¾ï¼Œä¸‰ä¸ªæ–¹å¼æ˜¯äº’æ–¥çš„ã€‚
+ æ–°é¡µç­¾æ–¹å¼åœ¨pathé…ç½®çš„æ˜¯å¤–é“¾æ—¶èµ·ä½œç”¨ï¼Œå¦åˆ™å½“ä½œå†…åµŒèœå•å¤„ç†ï¼›å†…åµŒï¼Œå…¨å±æ— è®ºpathæ˜¯æ™®é€šèœå•è·¯å¾„è¿˜æ˜¯å¤–é“¾éƒ½èµ·ä½œç”¨ï¼›

:::

3. **é¡µé¢è·¯ç”±**(path)ï¼šç›¸å½“äºæ˜¯å½“å‰èŠ‚ç‚¹çš„æ ‡è¯†ï¼Œå½“é…ç½®çš„ä¸æ˜¯å¤–é“¾æ—¶å¯¹åº”çš„è·¯ç”±pathæ˜¯ç”±**çˆ¶èŠ‚ç‚¹è·¯ç”±path**+**'/'**+**å½“å‰èŠ‚ç‚¹çš„path**ç»„æˆï¼Œæ‰€ä»¥å®è´¨ä¸Šæ˜¯ç”¨æ¥ä½œä¸ºå¯¹åº”è·¯ç”±çš„pathçš„æœ«å°¾çš„ä¸€ä¸ªæ‹¼æ¥å­—ç¬¦ä¸²ã€‚

:::info
åœ¨é…ç½®è¯¥å±æ€§æ³¨æ„æ˜¯ä¸€ä¸²è‹±æ–‡å­—ç¬¦ä¸²æˆ–æ•°å­—æˆ–è‹±æ–‡å­—ç¬¦ä¸²å’Œæ•°å­—ç»„åˆï¼Œå‰é¢ä¸èƒ½å¸¦'/'ï¼Œä¾‹å¦‚ï¼šmyFirstMenu

:::

4. **å¯¹åº”çš„vueç»„ä»¶(component)**:ç»„ä»¶ç›¸å¯¹è·¯å¾„ï¼Œç”¨äºé…ç½®è·¯ç”±çš„è§†å›¾æ–‡ä»¶è·¯å¾„

:::info
åœ¨é…ç½®è¯¥å±æ€§æ—¶ï¼šä¾‹å¦‚ç»„ä»¶æ˜¯ src/views/demo/DemoViewList.vueï¼Œåˆ™è¯¥å±æ€§åªéœ€è¾“å…¥ /demo/DemoViewList

:::

5. **å…³è”æƒé™ï¼š**ä¸ºæƒé™é…ç½®åšå‡†å¤‡
6. **å›¾æ ‡(icon)**ï¼šå¯¹åº”è·¯ç”±çš„meta.iconç”¨äºæ¸²æŸ“èœå•æ—¶æ¸²æŸ“é…ç½®çš„èœå•å›¾æ ‡
7. **å¯ç”¨è·¯ç”±ç¼“å­˜(keepAlive)**:åªæœ‰èœå•ç±»å‹æœ‰è¯¥å±æ€§ï¼Œå¯¹åº”è·¯ç”±çš„meta.isKeepAlive
8. **éšè—(hide)**ï¼šåªæœ‰èœå•ç±»å‹æœ‰è¯¥å±æ€§ï¼Œå¯¹åº”è·¯ç”±çš„meta.hide



åœ¨é¡µé¢ä¸­æœªå±•ç¤ºå‡ºçš„å±æ€§è¿˜æœ‰ï¼š

è·¯ç”±çš„nameç”¨æ¥æ ‡è¯†è·¯ç”±çš„å”¯ä¸€æ€§çš„è¿™é‡Œç”¨åç«¯è¿”å›æ¥çš„interfaceItemIdè¡¨ç¤º

è·¯ç”±çš„meta.urlï¼šå¦‚æœpathé…ç½®çš„æ˜¯å¤–é“¾ï¼Œåˆ™ä¼šä¸ºè·¯ç”±çš„metaå…ƒä¿¡æ¯ä¸­é…ç½®urlå±æ€§ç”¨æ¥å­˜è¯¥å¤–é“¾å€¼ï¼Œç”¨äºå†…åµŒæ–¹å¼å’Œå…¨å±æ–¹å¼è·¯ç”±è·³è½¬æ—¶ï¼Œiframeè·å–å½“å‰è·¯ç”±çš„å¤–é“¾åœ°å€ï¼›æ‰“å¼€æ–°é¡µç­¾æ–¹å¼æ—¶ï¼Œç‚¹å‡»èœå•ä»¥é“¾æ¥çš„æ–¹å¼è·³è½¬è€Œä¸æ˜¯è·¯ç”±è·³è½¬ã€‚

```typescript
// å¤„ç†æ ‘ç»“æ„çš„åŸå§‹æ•°æ®ä¸ºè·¯ç”±éœ€è¦çš„
export function generateRoute(data: any[], parentPath: string, parentStatus: boolean, arr: any[]) {
  data.forEach((item, index) => {
    if (item.style === 3) {
      return
    }
    arr.push({
      path: `${parentPath}/${item.path}`,
      name: `${item.interfaceItemId}`,
      meta: {
        icon: item.icon,
        title: item.name,
        hide: item.hide,
        isKeepAlive: item.keepAlive,
        isAffix: false,
        isFull: item.openMode === '2',
        isInner: item.openMode === '1',
        isOut: item.openMode === '3'
      },

      children: []
    })

    if (isHttp(item.path)) {
      arr[index].meta.url = item.path
      // å¤–é“¾çš„èœå•ï¼šæ— ç»„ä»¶ï¼Œæ— å­èœå•
      arr[index].component = ''
      arr[index].name = `${parentPath.replace(/\//g, '_').substring(1)}_${item.interfaceItemId}`
      delete arr[index].children
      if (item.openMode === '1' || item.openMode === '2') {
        arr[index].path = `${parentPath}/${item.interfaceItemId}`
        arr[index].component = InnerLink
      } else {
        arr[index].path = item.path
      }
    } else {
      // èœå•ç±»å‹çš„ï¼š
      if (item.component && typeof item.component === 'string') {
        // é…ç½®çš„ç»„ä»¶è·¯å¾„ä¸å­˜åœ¨æ—¶ï¼Œä¼šèµ‹å€¼ä¸ºundefined
        arr[index].component = modules['/src/views' + item.component + '.vue']
      }
      if (item.children && item.children.length > 0) {
        const list = item.children
        arr[index].redirect = `${parentPath}/${item.path}/${list[0].path}`
        generateRoute(item.children, `${parentPath}/${item.path}`, parentStatus && item.status, arr[index].children)
      } else {
        delete arr[index].children
      }
    }
  })
  return arr
}
```

#### æŒ‰é’®æƒé™çš„ä½¿ç”¨
1.  é€šè¿‡è¯·æ±‚æ¥å£ï¼ˆ [src/api/modules/common/login.ts => getAutInfoApi](http://10.11.3.132:8082/platform/ebs_vue3_template/blob/master/src/api/modules/common/login.ts) æ–¹æ³•ï¼‰å½“å‰ç”¨æˆ·çš„æƒé™æŒ‰é’®ï¼Œå¹¶å­˜åœ¨stores/modules/auth.tsä¸­å®šä¹‰çš„authButtonListï¼Œ
2. é€šè¿‡åœ¨src/directives/modules/auth.tsä¸­å®šä¹‰çš„v-authæŒ‡ä»¤ç¡®å®šæ˜¯å¦å±•ç¤ºé¡µé¢ä¸­çš„åŠŸèƒ½æŒ‰é’®ï¼›

:::info
å…·ä½“ä½¿ç”¨åªéœ€è¦åœ¨vueæ–‡ä»¶ä¸­ä½¿ç”¨è¯¥æŒ‡ä»¤ï¼Œå¹¶ä¸ºè¯¥æŒ‡ä»¤ä¼ å…¥è¯¥æŒ‰é’®çš„æƒé™æ ‡è¯†å³å¯ï¼š

:::

ä¾‹å¦‚ï¼šç”¨æˆ·ç®¡ç†æ¨¡å—ï¼Œå¯¹â€æ–°å»ºâ€œæŒ‰é’®è¿›è¡Œæƒé™è®¾ç½®,å…¶ä¸­â€˜user:staff:saveâ€™ä¸ºç”¨æˆ·æ–°å¢ä¿®æ”¹çš„æƒé™æ ‡è¯†

```html
<el-button
  v-auth="'user:staff:save'"
  type="primary"
>
 </el-button>
```

## ç½‘ç»œè¯·æ±‚
+ é¡¹ç›®å°è£…äº†`Axios`æ¥åšç½‘ç»œè¯·æ±‚ï¼ŒåŒ…æ‹¬è¯·æ±‚ Loadingã€é”™è¯¯å¤„ç†ã€å–æ¶ˆè¯·æ±‚ç­‰åŠŸèƒ½
+ å¯ä»¥æŒ‰ç…§è‡ªå·±é¡¹ç›®éœ€æ±‚æ¥è¿›è¡Œå°è£…

### ç›®å½•ç»“æ„
```plain
â”œâ”€ api                               ç½‘ç»œè¯·æ±‚æ–‡ä»¶å¤¹                                 
â”‚  â”œâ”€ config                         è¯·æ±‚é…ç½®ä¿¡æ¯   
â”‚  â”‚  â”œâ”€ http-enum.ts                è¯·æ±‚ç›¸å…³çš„æšä¸¾ç±»å‹ 
â”‚  â”‚  â””â”€ service-port.ts             åç«¯å¾®æœåŠ¡æ¨¡å—å‰ç¼€  
â”‚  â”œâ”€ helper                         è¯·æ±‚è¾…åŠ©å·¥å…·  
â”‚  â”‚  â”œâ”€ axios-cancel.ts             æ‹¦æˆªé‡å¤è¯·æ±‚ 
â”‚  â”‚  â”œâ”€ check-status.ts             å¯¹å„ä¸ªhttpé”™è¯¯ç åšçš„ç›¸å…³çš„åé¦ˆ  
â”‚  â”‚  â””â”€ service-loading.ts          å…¨å±€è¯·æ±‚loadingé…ç½®
â”‚  â”œâ”€ interface                      apiæ¥å£çš„è¯·æ±‚å‚æ•°å’Œè¿”å›æ•°æ®çš„ç±»å‹å®šä¹‰æ–‡ä»¶å¤¹  
â”‚  â”‚  â””â”€ index.ts                      
â”‚  â”œâ”€ modules                        è¯·æ±‚å‡½æ•°æ¨¡å—ï¼Œå¼ºçƒˆå»ºè®®æ ¹æ®ä¸åŒçš„æ¨¡å—åˆ›å»ºä¸åŒçš„è¯·æ±‚æ–‡ä»¶  
â”‚  â”‚  â””â”€ common                      å…¬å…±è¯·æ±‚æ¥å£  
â”‚  â”‚     â”œâ”€ application.ts           åº”ç”¨åˆ—è¡¨  
â”‚  â”‚     â”œâ”€ dict.ts                  æ•°æ®å­—å…¸  
â”‚  â”‚     â”œâ”€ language-item.ts         è¯­è¨€è¯æ¡  
â”‚  â”‚     â”œâ”€ language.ts              è¯­è¨€åˆ—è¡¨  
â”‚  â”‚     â”œâ”€ login.ts                 ç™»å½•  
â”‚  â”‚     â”œâ”€ message-list.ts          æ¶ˆæ¯åˆ—è¡¨  
â”‚  â”‚     â””â”€ user.ts                  ç”¨æˆ·  
   â””â”€ index.ts                       å°è£…åçš„axiosï¼šè¯·æ±‚æ‹¦æˆªï¼Œå“åº”æ‹¦æˆª  
```



### é…ç½®ï¼ˆé‡ç‚¹ï¼‰
> ä¸å‡ºæ„å¤–çš„è¯ï¼Œä½ åº”è¯¥è¦ä¿®æ”¹è¯·æ±‚çš„`baseURL`ã€‚
>

åœ¨`index.ts`æ–‡ä»¶çš„ 28 è¡Œä½ å¯ä»¥çœ‹åˆ°ä¸€ä¸ªé»˜è®¤çš„åŸºç¡€é…ç½®

```typescript
const config = {
  // é»˜è®¤åœ°å€è¯·æ±‚åœ°å€ï¼Œå¯åœ¨public/config.js æ–‡ä»¶ä¸­ä¿®æ”¹å„ä¸ªç¯å¢ƒä¸‹çš„è¯·æ±‚åœ°å€
  baseURL: window.serviceConfig[import.meta.env.VITE_USER_NODE_ENV].VITE_API_URL as string,
  // è®¾ç½®è¶…æ—¶æ—¶é—´
  timeout: ResultEnum.TIMEOUT as number,
  // è·¨åŸŸæ—¶å€™å…è®¸æºå¸¦å‡­è¯
  withCredentials: true
}
```

ä½ å¯ä»¥åœ¨æ­¤å¤„ä¿®æ”¹æˆ–æ·»åŠ  axios çš„åŸºæœ¬é…ç½®ã€‚

:::info
é‡ç‚¹ï¼š`baseURL`æ˜¯é€šè¿‡ç¯å¢ƒå˜é‡åŠ è½½çš„ï¼Œå¯ä»¥é€šè¿‡é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„`public/config.js`æ–‡ä»¶ä¸­ä¿®æ”¹ä¸åŒç¯å¢ƒä¸‹çš„`VITE_API_URL`ï¼Œè€Œä¸æ˜¯åœ¨æ­¤å¤„ç›´æ¥ä¿®æ”¹ã€‚

:::

### è¯·æ±‚æ‹¦æˆª
ä»£ç ä½ç½®ï¼š`index.ts 58:108`

```typescript
/**
     * @description è¯·æ±‚æ‹¦æˆªå™¨
     * å®¢æˆ·ç«¯å‘é€è¯·æ±‚ -> [è¯·æ±‚æ‹¦æˆªå™¨] -> æœåŠ¡å™¨
     * tokenæ ¡éªŒ(JWT) : æ¥å—æœåŠ¡å™¨è¿”å›çš„ token,å­˜å‚¨åˆ° vuex/pinia/æœ¬åœ°å‚¨å­˜å½“ä¸­
     */
    this.service.interceptors.request.use(
      (config: CustomAxiosRequestConfig) => {
        const userStore = useUserStore()
        // é‡å¤è¯·æ±‚ä¸éœ€è¦å–æ¶ˆï¼Œåœ¨ api æœåŠ¡ä¸­é€šè¿‡æŒ‡å®šçš„ç¬¬ä¸‰ä¸ªå‚æ•°: { cancel: false } æ¥æ§åˆ¶
        config.cancel ??= true
        config.cancel && axiosCanceler.addPending(config)
        // å½“å‰è¯·æ±‚ä¸éœ€è¦æ˜¾ç¤º loadingï¼Œåœ¨ api æœåŠ¡ä¸­é€šè¿‡æŒ‡å®šçš„ç¬¬ä¸‰ä¸ªå‚æ•°: { loading: false } æ¥æ§åˆ¶
        config.loading ??= true
        config.loading && showFullScreenLoading()

        // æ˜¯å¦éœ€è¦è®¾ç½® token
        let isToken = (config!.headers || {}).isToken === false
        whiteList.some((v) => {
          if (config.url && config.url.indexOf(v) > -1) {
            return (isToken = true)
          } else {
            return (isToken = false)
          }
        })
        if (config.headers && typeof config.headers.set === 'function' && !isToken) {
          config.headers.set('x-access-token', userStore.token)
          config.headers.set('Authorization', `Bearer ${userStore.token}`)
        }
        // è¯·æ±‚å¤´æºå¸¦Application:åº”ç”¨ç¼–ç 
        const appCode = useAuthStore().appCode
        config.headers.set('Application', appCode)
        // è¯·æ±‚å¤´æºå¸¦Langï¼šå›½é™…åŒ–è¯­è¨€ç§ç±»
        config.headers.set('Lang', useGlobalStore().language as unknown as string)

        // è¯·æ±‚å¤´æºå¸¦Ignore-Translateï¼šæ˜¯å¦éœ€è¦ç¿»è¯‘
        const configUrl = config.url as unknown as string
        const isIgnoreTranslate = IgnoreTranslateList.some((item: string) => configUrl.startsWith(item))
        if (!isIgnoreTranslate) {
          config.headers.set('Ignore-Translate', false)
        } else {
          config.headers.set('Ignore-Translate', true)
        }

        if (config.method === 'get') {
          config.params = {
            _t: Date.parse(String(new Date())) / 1000,
            ...config.params
          }
        }
        return config
      },
      (error: AxiosError) => {
        console.log('requestError', error)
        return Promise.reject(error)
      }
    )
```

+ åœ¨è¯·æ±‚ä¹‹å‰æ£€æŸ¥å½“å‰è¯·æ±‚éœ€ä¸éœ€è¦å…¨å±€çš„ loadingï¼Œ
+ åœ¨è¯·æ±‚ä¹‹å‰æ£€æŸ¥å½“å‰è¯·æ±‚éœ€ä¸éœ€è¦æºå¸¦token,è‹¥éœ€è¦åˆ™åœ¨ header è¯·æ±‚å¤´ä¸­æºå¸¦`x-access-token`å’Œ`Authorization`åˆ†åˆ«ç”¨äºäº‘ç¨‹å·¥ä½œæµè¯·æ±‚æ¥å£å’Œå¹³å°è¯·æ±‚æ¥å£ã€‚token åç§°ä¸ä¸€å®šæ˜¯`x-access-token`æˆ–`Authorization`ï¼Œå…·ä½“æƒ…å†µæ ¹æ®è‡ªå·±é¡¹ç›®é…ç½®
+ ä»»ä½•æ¥å£è¯·æ±‚å¤´headeréƒ½éœ€è¦æºå¸¦`Application`ã€`Lang`ã€`Ignore-Translate`ã€‚

### å“åº”æ‹¦æˆª
ä»£ç ä½ç½®ï¼š`index.ts 114:166`

```typescript
this.service.interceptors.response.use(
  (response: AxiosResponse & { config: CustomAxiosRequestConfig }) => {
    const { data, config } = response
    if (!data) {
      // è¿”å›â€œ[HTTP]è¯·æ±‚æ²¡æœ‰è¿”å›å€¼â€;
      throw new Error()
    }
    const userStore = useUserStore()
    axiosCanceler.removePending(config)
    config.loading && tryHideFullScreenLoading()
    // ç™»å½•å¤±æ•ˆ
    if (data.code === ResultEnum.OVERDUE) {
      // åˆ é™¤token,åˆ é™¤ç”¨æˆ·ç¼“å­˜
      userStore.loginOut()
      // åˆ·æ–°é¡µé¢é‡æ–°èµ°ä¸€æ¬¡è·¯ç”±è®©å®ƒè¿‡router.beforeEachçš„æ ¡éªŒ
      const href = window.location.href
      window.location.href = href
      ElMessage.error(data.message)
      return Promise.reject(data)
    }
    // å…¨å±€é”™è¯¯ä¿¡æ¯æ‹¦æˆªï¼ˆé˜²æ­¢ä¸‹è½½æ–‡ä»¶çš„æ—¶å€™è¿”å›æ•°æ®æµï¼Œæ²¡æœ‰ code ç›´æ¥æŠ¥é”™ï¼‰
    if (data.code && data.code !== ResultEnum.SUCCESS) {
      config.errMsg ??= true
      config.errMsg && ElMessage.error(data.message)
  
      return Promise.reject(data)
    }
  
    // å…¼å®¹äº‘ç¨‹çš„ç»“æœæ˜¯resultå­—æ®µæ¥æ”¶çš„ï¼Œè½¬æˆæˆ‘ä»¬é€šç”¨çš„dataå­—æ®µï¼š
    renameKey(data, 'result', 'data')
    // æˆåŠŸè¯·æ±‚ï¼ˆåœ¨é¡µé¢ä¸Šé™¤éç‰¹æ®Šæƒ…å†µï¼Œå¦åˆ™ä¸ç”¨å¤„ç†å¤±è´¥é€»è¾‘ï¼‰
    return data
  },
  async (error: AxiosError) => {
    console.log('responseError', error)
    const { response } = error
    tryHideFullScreenLoading()
    // è¯·æ±‚è¶…æ—¶ && ç½‘ç»œé”™è¯¯å•ç‹¬åˆ¤æ–­ï¼Œæ²¡æœ‰ response
    if (error.message.indexOf('timeout') !== -1) ElMessage.error(t('error.408'))
    if (error.message.indexOf('Network Error') !== -1) ElMessage.error(t('error.networkError'))
    // æ ¹æ®æœåŠ¡å™¨å“åº”çš„é”™è¯¯çŠ¶æ€ç ï¼Œåšä¸åŒçš„å¤„ç†
    if (response) checkStatus(response.status)
    // æœåŠ¡å™¨ç»“æœéƒ½æ²¡æœ‰è¿”å›(å¯èƒ½æœåŠ¡å™¨é”™è¯¯å¯èƒ½å®¢æˆ·ç«¯æ–­ç½‘)ï¼Œæ–­ç½‘å¤„ç†:å¯ä»¥è·³è½¬åˆ°æ–­ç½‘é¡µé¢
    if (!window.navigator.onLine && router.currentRoute.value.path !== '/500')
      router.replace({
        path: '/500',
        query: {
          redirect: router.currentRoute.value.fullPath
        }
      })
    return Promise.reject(error)
  }
);
```

+ åœ¨è·å–åˆ°æ¥å£çš„å“åº”åï¼Œä¸ç®¡æˆåŠŸæˆ–å¤±è´¥ï¼Œå…ˆå°è¯•å…³é—­å…¨å±€ loading`tryHideFullScreenLoading`ï¼Œç„¶åæ ¹æ®æˆåŠŸæˆ–å¤±è´¥åšä¸åŒçš„å¤„ç†ã€‚
+ å½“ä¸šåŠ¡ä¸Šçš„codeä¸å®šä¹‰çš„æˆåŠŸçš„ç¼–ç ` ResultEnum.SUCCESS`ä¸ç›¸ç­‰æ—¶ï¼Œå¯æ ¹æ®è¯·æ±‚æ—¶è®¾ç½®çš„configçš„errMsgç¡®å®šæ˜¯å¦ç›´æ¥åœ¨æ­¤å¤„æ˜¾ç¤ºåç«¯è¿”å›çš„æŠ¥é”™ä¿¡æ¯

:::info
é»˜è®¤éƒ½æ˜¯ç›´æ¥æ˜¾ç¤ºæŠ¥é”™ä¿¡æ¯ï¼Œè‹¥éœ€è¦ä¸åœ¨æ­¤å¤„å¤„ç†é”™è¯¯ä¿¡æ¯æ˜¾ç¤ºå¯åœ¨æ¥å£è¯·æ±‚æ—¶è®¾ç½®config.errMsgä¸ºfalse

:::



:::info
è¿™é‡Œçš„è¯·æ±‚æˆåŠŸæŒ‡çš„æ˜¯**ç½‘ç»œè¯·æ±‚**ï¼Œä¸æ˜¯**ä¸šåŠ¡é€»è¾‘**æˆåŠŸã€‚

:::

+ è¯·æ±‚æˆåŠŸåä¼šåˆ¤æ–­æ¥å£è¿”å›çš„å“åº”æ•°æ®é‡Œçš„ codeã€‚æ ¹æ®ä¸åŒçš„ code åšä¸åŒçš„å¤„ç†ã€‚  
è¿™é‡Œè¦æ³¨æ„`ResultEnum`ä¸­å®šä¹‰çš„ code æ˜¯ä¸æ˜¯è·Ÿä½ ä¸šåŠ¡ä¸Šçš„ code ä¸€æ ·ã€‚
+ è¯·æ±‚å¤±è´¥ä¹Ÿæ˜¯ä¸€æ ·ï¼Œåªä¸è¿‡è¿™é‡Œçš„å¤±è´¥æ˜¯æŒ‡ç½‘ç»œå¤±è´¥ã€‚ç½‘ç»œè¯·æ±‚å¤±è´¥åæœåŠ¡å™¨è¿”å›çš„çŠ¶æ€ç éƒ½æ˜¯æœ‰è¿¹å¯å¾ªçš„ï¼Œåªéœ€è¦æ ¹æ®ä¸åŒçš„çŠ¶æ€ç ï¼Œåšä¸åŒçš„å¤„ç†ã€‚è¿™å°±æ˜¯`checkStatus`çš„å·¥ä½œã€‚

### ç¤ºä¾‹ï¼ˆé‡ç‚¹ï¼‰
> ç°åœ¨è¦å†™ä¸€ä¸ªç™»å½•æ¥å£
>

1. api->modules ä¸­æ–°å»ºä¸€ä¸ª`login.ts`æ–‡ä»¶ã€‚
2. åœ¨`login.ts`ä¸­å¼•å…¥å°è£…åçš„ axiosã€‚
3. åœ¨`login.ts`ä¸­å¼•å…¥ç›¸åº”çš„åç«¯æœåŠ¡å‰ç¼€
4. ç¼–å†™è¯·æ±‚å‡½æ•°ã€‚
5. å¯é€‰çš„ï¼Œç»™è¯·æ±‚å‡½æ•°çš„å…¥å‚å’Œè¿”å›å€¼åŠ ä¸Š TS ç±»å‹é™åˆ¶ã€‚

```typescript
import { PORT_SYSTEM } from '@/api/config/service-port'
import http from '@/api'

/**
 * @name ç™»å½•æ¨¡å—
 */
// ç™»å½•æ¨¡å—
export namespace Login {
  export interface ReqLoginForm {
    userName: string
    password: string
  }
  export interface ResLogin {
    token: string
    userInfo: {
      staffId: number
      [key: string]: any
    }
  }
}
// ç”¨æˆ·ç™»å½•
// æ¾æ•£çš„ç±»å‹é™åˆ¶
export const loginApi = (params: any) => {
    return http.post(PORT_SYSTEM + `/user/auth/login`, params,{ loading: false });
};

// ä¸¥æ ¼çš„ç±»å‹é™åˆ¶
export const typeloginApi = (params: Login.ReqLoginForm) => {
  return http.post<Login.ResLogin>(PORT_SYSTEM + `/user/auth/login`, params, { loading: false })
}



```

å¦‚ä½•ä½¿ç”¨ api å‡½æ•°å‘¢ï¼Œå¾ˆç®€å•ã€‚

```typescript
import { loginApi } from "@/api/modules/login";

// æ¨¡æ‹Ÿè¡¨å•æ•°æ®
const form = {
    account: "admin",
    password: "123456",
};
const login = async () => {
    // å¦‚æœè¯·æ±‚æˆåŠŸï¼Œé‚£ä¹ˆå°±ä¼šæ‰§è¡Œä¸‹é¢çš„ä»£ç ã€‚åŸºæœ¬ä¸Šä¸éœ€è¦é”™è¯¯å¤„ç†ï¼Œé”™è¯¯æƒ…å†µéƒ½è¢«æ‹¦æˆªäº†
    // é™¤éä½ æœ‰éœ€è¦ï¼Œä½ å¯ä»¥ä½¿ç”¨`.catch`
    // const data = await loginApi(form).catch((err)=>{
    // é”™è¯¯å¤„ç†
    // })
    const data = await loginApi(form);
    // ä¿å­˜tokenï¼Œè·³è½¬é¡µé¢ç­‰æ“ä½œ
};
```

