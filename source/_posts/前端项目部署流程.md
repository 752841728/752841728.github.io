title: 前端项目部署流程
author: Funny Boy
date: 2023-08-28 17:35:26
tags: ["Nginx"]
categories: ["服务器"]

---

# 前言
项目组没有运维，前端负责打包部署

---

# 一、vue-cli打包优化

## 1.productionSourceMap
虽然减少包体积，但是无法定位出现问题的代码
```javascript
productionSourceMap: false,
```
## 2.gzip

```javascript
npm install compression-webpack-plugin
```

```javascript
const CompressionWebpackPlugin = require("compression-webpack-plugin");

plugins: [
  new CompressionWebpackPlugin(),
],
```

# 二、vite打包优化
## 1.分包

```javascript
build: {
  rollupOptions: {
    output: {
      // 对静态资源进行单独打包
      assetFileNames: "static/[ext]/[name].[hash].[ext]",
      // 对项目依赖进行单独打包
      manualChunks: (id) => {
        if (id.includes("node_modules")) {
          return "vandor";
        }
      },
    },
  },
},
```

### 出现内存不足，报JavaScript heap out of memory错误

安装依赖

```javascript
npm install cross-env increase-memory-limit
```
修改package.json文件
```javascript
"scripts": {
  "fix-memory-limit": "cross-env LIMIT=4096 increase-memory-limit"
},
```
执行命令

```javascript
npm run fix-memory-limit
```
### 报"node --max-old-space-size=4096"不是内部或外部命令，也不是可运行的程序或批处理文件错误
批量替换node_modules/.bin的*.cmd文件的"%_prog%"为%_prog%
![在这里插入图片描述](https://raw.githubusercontent.com/752841728/hexo-picture/main/img/9-1.png)
## 2.gzip

```javascript
npm install vite-plugin-compression
```

```javascript
import VitePluginCompression from "vite-plugin-compression";

plugins: [
  VitePluginCompression()
],
```

# 三、nginx部署

使用Xshell新建会话
![在这里插入图片描述](https://raw.githubusercontent.com/752841728/hexo-picture/main/img/9-2.png)
进入到部署的目录下
![在这里插入图片描述](https://raw.githubusercontent.com/752841728/hexo-picture/main/img/9-3.png)
使用Xftp传输打包好的包
![在这里插入图片描述](https://raw.githubusercontent.com/752841728/hexo-picture/main/img/9-4.png)
使用unzip dist.zip命令解压即可

---

# 总结
部署前端项目其实非常简单