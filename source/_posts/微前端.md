title: 前端项目部署流程
author: Funny Boy
date: 2025-01-08 17:53:05
tags: ["Vue"]
categories: ["前端"]

---

@[TOC](文章目录)

---
# 一、monorepo
pnpm-workspace.yaml

```javascript
packages:
  # all packages in direct subdirs of packages/
  - "main"
  # all packages in subdirs of components/
  - "web/**"

  - "common"
```
子模块复用

```javascript
pnpm -F main add common
```
# 二、无界
[无界微前端官网](https://github.com/Tencent/wujie)
## main
```javascript
pnpm i wujie
pnpm i wujie-vue3
```

main.js
```javascript
import Wujie from "wujie-vue3"	// 引入对应版本
app.use(Wujie)
```

App.vue
```javascript
<template>
  <div>
    <h1>这是主应用</h1>
    <WujieVue url="http://localhost:5174/" name="vue3"></WujieVue>
  </div>
</template>
```
# 三、源码
[wujie-vue3源码](https://juejin.cn/post/7212603829572911159?searchId=202501062132300B836B213173F98EB919#heading-12)

# 四、通讯
## window
主应用定义一个全局变量
```javascript
var a = 'xiaoman'
```
子应用通过 window.parent.a 就可以访问到
```javascript
const send = () => {
  console.log(alert(window.parent.a))
}
```
## props
通过props给子应用注入参数
```javascript
<WujieVue :props="{name:'xm',age:18}"  url="http://127.0.0.1:5174/" name="vue3"></WujieVue> <!--子应用vue3-->
```
子应用可以通过$wujie来获取
```javascript
window.$wujie.props
```
## event bus
主应用通过bus 监听
```javascript
import {bus} from 'wujie'
bus.$on('vue3', (data: any) => {
    console.log(data)
})
```
子应用通过emit触发事件（反之也可以 主应用emit触发子应用on监听）
```javascript
 window.$wujie.bus.$emit('vue3', {name:'xm',age:18})
```